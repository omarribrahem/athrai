<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>دليل شامل: أساسيات الأعمال التجارية - منصة أثر</title>
    <style>
        :root {
            --glass-bg: rgba(255,255,255,0.18);
            --glass-border: rgba(255,255,255,0.4);
            --text-color: #1e293b;
            --highlight-color: #0ea5e9;
            --practice-color: #16a34a;
            --translation-color: #8b5cf6;
            --ai-color: #f59e0b;
            --border-radius: 24px;
        }
        
        @keyframes gradientAnimation { 0%{background-position:0% 50%} 50%{background-position:100% 50%} 100%{background-position:0% 50%} }
        @keyframes floatSphere1 { 0%,100%{transform:translateY(0px) rotate(0deg) scale(1)} 50%{transform:translateY(-30px) rotate(180deg) scale(1.05)} }
        @keyframes floatSphere2 { 0%,100%{transform:translateX(0px) translateY(0px) rotate(0deg) scale(1)} 50%{transform:translateX(25px) translateY(-25px) rotate(-180deg) scale(0.95)} }
        @keyframes floatSphere3 { 0%,100%{transform:translateX(0px) translateY(0px) rotate(0deg) scale(1)} 50%{transform:translateX(-20px) translateY(35px) rotate(120deg) scale(1.08)} }
        @keyframes translate-glow { 0%,100%{box-shadow:0 0 15px -5px rgba(139,92,246,0.4),inset 0 2px 0 rgba(255,255,255,0.4);} 50%{box-shadow:0 0 25px 0px rgba(139,92,246,0.6),inset 0 2px 0 rgba(255,255,255,0.6);} }

        * { box-sizing:border-box; margin:0; padding:0; }
        html { font-size:16px; scroll-behavior:smooth; }
        body {
            font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif;
            background-color:#e0f2fe; color:var(--text-color); line-height:1.8;
            overflow-x:hidden; position:relative; direction:rtl;
            font-size:clamp(0.9rem,2.5vw,1.05rem); padding:20px clamp(10px,3vw,20px);
        }
        body[dir="ltr"] { direction:ltr; }
        
        .background-gradient, .floating-spheres { position:fixed;top:0;left:0;width:100%;height:100%;z-index:-2; }
        .background-gradient { background:linear-gradient(135deg,#e0f2fe 0%,#bae6fd 25%,#fce7f3 75%,#fdf2f8 100%);background-size:400% 400%;animation:gradientAnimation 40s ease infinite;}
        .floating-spheres {z-index:-1;pointer-events:none;}
        .sphere {position:absolute;border-radius:50%;backdrop-filter:blur(20px);border:2px solid rgba(255,255,255,0.3);box-shadow:0 20px 60px rgba(14,165,233,0.3),inset 0 4px 0 rgba(255,255,255,0.4);}
        .sphere.large {width:clamp(120px,20vw,220px);height:clamp(120px,20vw,220px);top:8%;right:12%;background:radial-gradient(circle,#3b82f6,#1e3a8a);animation:floatSphere1 12s ease-in-out infinite;}
        .sphere.medium {width:clamp(80px,15vw,140px);height:clamp(80px,15vw,140px);bottom:20%;left:8%;background:radial-gradient(circle,#0ea5e9,#0369a1);animation:floatSphere2 9s ease-in-out infinite;}
        .sphere.small-1 {width:clamp(60px,12vw,95px);height:clamp(60px,12vw,95px);top:50%;right:8%;background:radial-gradient(circle,#06b6d4,#0e7490);animation:floatSphere3 6s ease-in-out infinite;}

        .translation-button {
            position:fixed;top:clamp(20px,5vw,30px);right:clamp(20px,5vw,30px);
            background:rgba(255,255,255,0.1);backdrop-filter:blur(25px);
            border:2px solid var(--glass-border);border-radius:50px;
            padding:clamp(8px,2vw,12px);cursor:pointer;z-index:1000;display:flex;align-items:center;justify-content:center;
            width:clamp(50px,12vw,60px);height:clamp(50px,12vw,60px);
            transition:all 0.4s cubic-bezier(0.25,0.8,0.25,1);
            box-shadow:0 8px 25px -10px rgba(0,0,0,0.2),inset 0 2px 0 rgba(255,255,255,0.5);
        }
        body[dir="ltr"] .translation-button {right:auto;left:clamp(20px,5vw,30px);}
        .translation-button:hover {
            width:auto;padding:clamp(8px,2vw,12px) clamp(16px,4vw,22px);
            border-color:var(--translation-color);background:rgba(139,92,246,0.1);transform:translateY(-3px);
            animation:translate-glow 2.5s infinite alternate;
        }
        .translation-button .icon-translate {width:28px;height:28px;flex-shrink:0;transition:transform 0.3s ease;}
        .translation-button:hover .icon-translate {transform:scale(0.9);}
        .translation-text {font-size:clamp(0.85rem,2.2vw,1rem);font-weight:600;color:var(--translation-color);white-space:nowrap;display:none;margin-left:10px;}
        body[dir="ltr"] .translation-text {margin-left:0;margin-right:10px;}
        .translation-button:hover .translation-text {display:block;}

        .main-content {max-width:1200px;margin:90px auto 0;padding:clamp(20px,5vw,40px);}
        .glassy-card {
            background:var(--glass-bg);border:2px solid var(--glass-border);border-radius:var(--border-radius);
            padding:clamp(20px,5vw,30px);margin-bottom:clamp(25px,5vw,35px);backdrop-filter:blur(25px);
            transition:all 0.4s ease;box-shadow:0 20px 50px rgba(0,0,0,0.1),inset 0 2px 0 rgba(255,255,255,0.5);
        }
        .glassy-card:hover {transform:translateY(-5px) scale(1.01);border-color:rgba(255,255,255,0.7);}
        
        h1,h2,h3,h4,h5 { color:#0f172a;text-shadow:0 2px 8px rgba(255,255,255,0.8);font-weight:700;}
        h1 { font-size:clamp(2rem,6vw,3.2rem);text-align:center;margin-bottom:clamp(20px,4vw,30px);color:#0c4a6e; }
        h2 { font-size:clamp(1.5rem,5vw,2.5rem);border-bottom:3px solid rgba(14,165,233,0.3);padding-bottom:clamp(10px,2vw,15px);margin-bottom:clamp(20px,4vw,30px);}
        h3 { font-size:clamp(1.2rem,4vw,1.8rem);margin-bottom:clamp(15px,3vw,20px);}
        h4 { font-size:clamp(1.1rem,3.5vw,1.4rem);color:var(--highlight-color);margin-bottom:clamp(12px,2vw,15px);}
        h5 { font-size:clamp(1rem,3vw,1.2rem);color:var(--practice-color);margin-bottom:clamp(10px,2vw,12px);}
        p,li { color:#475569;margin-bottom:clamp(10px,2vw,12px);}
        strong {color:#1e3a8a;}
        
        ul,ol { padding-right:clamp(20px,4vw,25px);margin-bottom:20px;}
        body[dir="ltr"] ul,body[dir="ltr"] ol {padding-right:0;padding-left:clamp(20px,4vw,25px);}
        
        .case-study { border-right:4px solid var(--highlight-color);padding-right:20px;margin:25px 0;}
        body[dir="ltr"] .case-study {border-right:none;border-left:4px solid var(--highlight-color);padding-right:0;padding-left:20px;}
        
        .practice-question {
            background:rgba(22,163,74,0.08); border:2px solid rgba(22,163,74,0.2);
            border-radius:18px; padding:25px; margin-top:20px;
            cursor:pointer; position:relative;
            transition:all 0.4s ease;
        }
        .practice-question:hover {transform: translateY(-3px);border-color: var(--practice-color);background:rgba(22,163,74,0.12);}
        .practice-question.open {border-color: var(--practice-color);background:rgba(22,163,74,0.15);}
        .practice-question::after {content:'⏷';position:absolute;top:25px;left:25px;font-size:1.2rem;color:var(--practice-color);transition:transform 0.4s ease;}
        body[dir="ltr"] .practice-question::after {left:auto;right:25px;}
        .practice-question.open::after {transform: rotate(180deg);}
        
        .solution-card { max-height:0; overflow:hidden; transition:max-height 1.2s ease-in-out,margin-top 0.5s ease;}
        .solution-card.show { max-height:3000px;margin-top:20px;}
        .solution-content { background:rgba(255,255,255,0.3); border:1px solid rgba(255,255,255,0.4); padding:20px; border-radius:14px; }
        .solution-content strong { color:#15803d;}

        /* AI Assistant Styles */
        .ai-assistant {
            background: rgba(245,158,11,0.1);
            border: 2px solid rgba(245,158,11,0.3);
            border-radius: var(--border-radius);
            padding: 25px;
            margin: 30px 0;
            backdrop-filter: blur(15px);
            transition: all 0.4s ease;
        }
        
        .ai-assistant:hover {
            transform: translateY(-3px);
            border-color: var(--ai-color);
            background: rgba(245,158,11,0.15);
        }
        
        .ai-input {
            width: 100%;
            padding: 15px;
            border: 2px solid rgba(245,158,11,0.3);
            border-radius: 12px;
            background: rgba(255,255,255,0.2);
            backdrop-filter: blur(10px);
            font-size: 1rem;
            margin: 15px 0;
            transition: all 0.3s ease;
            font-family: inherit;
        }
        
        .ai-input:focus {
            outline: none;
            border-color: var(--ai-color);
            background: rgba(255,255,255,0.3);
        }
        
        .ai-button {
            background: linear-gradient(135deg, var(--ai-color), #d97706);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 10px;
            backdrop-filter: blur(10px);
        }
        
        .ai-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(245,158,11,0.4);
        }
        
        .ai-button:active {
            transform: translateY(0);
        }
        
        .ai-answer {
            margin-top: 20px;
            padding: 20px;
            background: rgba(255,255,255,0.3);
            border: 1px solid rgba(255,255,255,0.4);
            border-radius: 12px;
            backdrop-filter: blur(10px);
            min-height: 60px;
            font-size: 1rem;
            line-height: 1.6;
            display: none;
        }
        
        .ai-answer.show {
            display: block;
        }
        
        .ai-title {
            color: var(--ai-color);
            font-size: 1.4rem;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .business-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: rgba(255,255,255,0.2);
            border-radius: 12px;
            overflow: hidden;
            backdrop-filter: blur(15px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }
        .business-table th,
        .business-table td {
            padding: clamp(8px, 2vw, 12px);
            border: 1px solid rgba(255,255,255,0.3);
            text-align: right;
            font-size: clamp(0.8rem, 2vw, 1rem);
            vertical-align: top;
        }
        body[dir="ltr"] .business-table th,
        body[dir="ltr"] .business-table td {
            text-align: left;
        }
        .business-table th {
            background: rgba(14,165,233,0.2);
            font-weight: 700;
            color: #0c4a6e;
            text-align: center;
        }
        .business-table tr:nth-child(even) {
            background: rgba(255,255,255,0.1);
        }
        .business-table .concept-name {
            font-weight: 600;
            color: #1e3a8a;
            width: 25%;
        }
        .business-table .definition {
            width: 50%;
        }
        .business-table .summary {
            width: 25%;
            font-weight: 600;
            color: var(--practice-color);
        }
        
        .table-container {
            overflow-x: auto;
            margin: 20px 0;
            border-radius: 12px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }
        
        .concept-card {
            background: rgba(255,255,255,0.15);
            border: 2px solid rgba(255,255,255,0.2);
            border-radius: 20px;
            padding: 25px;
            margin: 20px 0;
            backdrop-filter: blur(20px);
            transition: all 0.4s ease;
        }
        .concept-card:hover {
            transform: translateY(-5px);
            border-color: rgba(255,255,255,0.4);
            background: rgba(255,255,255,0.2);
        }
        
        .hidden { display:none !important; }
    </style>
</head>
<body>
    <div class="background-gradient"></div>
    <div class="floating-spheres">
        <div class="sphere large"></div>
        <div class="sphere medium"></div>
        <div class="sphere small-1"></div>
    </div>
    
    <button class="translation-button" id="translationButton">
        <svg class="icon-translate" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M2.25 12C2.25 17.3848 6.61522 21.75 12 21.75C17.3848 21.75 21.75 17.3848 21.75 12C21.75 6.61522 17.3848 2.25 12 2.25C9.36657 2.25 6.94277 3.22321 5.16629 4.83371M12.75 2.25V7.5M12.75 7.5H18M12.75 7.5L5.16629 4.83371M11.25 21.75V16.5M11.25 16.5H6M11.25 16.5L18.8337 19.1663M5.16629 4.83371C3.22321 6.94277 2.25 9.36657 2.25 12M2.25 12C2.25 14.6334 3.22321 17.0572 4.83371 18.8337M18.8337 19.1663C20.7768 17.0572 21.75 14.6334 21.75 12M18.8337 4.83371C17.0572 3.22321 14.6334 2.25 12 2.25" stroke="#8b5cf6" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <span class="translation-text">ترجمة</span>
    </button>

    <main class="main-content">
        <!-- Arabic Content -->
        <div id="arabicContent">
            <section class="glassy-card">
                <h1>الملخص المركز: أساسيات الأعمال التجارية</h1>
                <p style="text-align: center; font-size: 1.1rem; color: #475569;">بالتأكيد يا أحمد، إليك الملخص المركز للمفاهيم الأساسية</p>
            </section>

            <!-- AI Assistant -->
            <section class="glassy-card">
                <div class="ai-assistant">
                    <h3 class="ai-title">
                        🤖 عندك سؤال في المحاضرة دي؟
                    </h3>
                    <p style="color: #6b7280; margin-bottom: 15px;">اسألني أي سؤال عن المفاهيم اللي شرحناها وهساعدك تفهمها أكتر</p>
                    <input type="text" id="user-question" class="ai-input" placeholder="اكتب سؤالك هنا... مثلاً: إيه الفرق بين الربح والإيرادات؟">
                    <button onclick="askAIProxy()" class="ai-button">اسأل</button>
                    <div id="ai-answer" class="ai-answer"></div>
                </div>
            </section>

            <!-- Concepts 1-14 (same as before) -->
            <section class="glassy-card">
                <div class="concept-card">
                    <h2>1. الأعمال التجارية</h2>
                    <h3>أصل الفكرة (كأن صاحبك بيشرحهالك):</h3>
                    <p>ببساطة، تخيل أي محل أو شركة حولك. الفكرة الأساسية هي أنهم يقدمون لك شيئاً تحتاجه (سلعة أو خدمة) وبالمقابل، هدفهم الأساسي هو كسب المال من وراء هذه العملية، أو ما يسمى "تحقيق الربح".</p>
                </div>
            </section>

            <section class="glassy-card">
                <div class="concept-card">
                    <h2>2. الربح</h2>
                    <h3>أصل الفكرة (كأن صاحبك بيشرحهالك):</h3>
                    <p>الربح هو المال المتبقي للشركة بعد أن تدفع كل فواتيرها ومصاريفها، من رواتب الموظفين والإيجار إلى تكلفة المواد الخام. إنه صافي المكسب النهائي.</p>
                </div>
            </section>

            <section class="glassy-card">
                <div class="concept-card">
                    <h2>3. رائد الأعمال</h2>
                    <h3>أصل الفكرة (كأن صاحبك بيشرحهالك):</h3>
                    <p>رائد الأعمال هو الشخص المغامر الذي لديه فكرة ويقرر أن يحولها لمشروع حقيقي. هو من يضع وقته وماله في خطر على أمل أن تنجح فكرته، وهو من يتحمل كل المخاطر في البداية.</p>
                </div>
            </section>

            <!-- Continue with remaining concepts... -->

            <!-- Summary Table -->
            <section class="glassy-card">
                <h2>جدول المفاهيم الأساسية</h2>
                <div class="table-container">
                    <table class="business-table">
                        <thead>
                            <tr>
                                <th>المفهوم</th>
                                <th>التعريف الرسمي</th>
                                <th>الخلاصة بكلمتين</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="concept-name">الأعمال التجارية</td>
                                <td class="definition">أي نشاط يسعى لتقديم سلع وخدمات للآخرين، مع العمل على تحقيق الربح.</td>
                                <td class="summary">بيع وشراء للربح</td>
                            </tr>
                            <!-- Add remaining rows -->
                        </tbody>
                    </table>
                </div>
            </section>
        </div>

        <!-- English Content -->
        <div id="englishContent" class="hidden">
            <section class="glassy-card">
                <h1>Focused Summary: Business Fundamentals</h1>
                <p style="text-align: center; font-size: 1.1rem; color: #475569;">Certainly Ahmed, here is the focused summary of essential concepts</p>
            </section>

            <!-- AI Assistant - English -->
            <section class="glassy-card">
                <div class="ai-assistant">
                    <h3 class="ai-title">
                        🤖 Got a question about this lecture?
                    </h3>
                    <p style="color: #6b7280; margin-bottom: 15px;">Ask me any question about the concepts we covered and I'll help you understand them better</p>
                    <input type="text" id="user-question-en" class="ai-input" placeholder="Write your question here... e.g.: What's the difference between profit and revenue?">
                    <button onclick="askAIProxyEn()" class="ai-button">Ask</button>
                    <div id="ai-answer-en" class="ai-answer"></div>
                </div>
            </section>

            <!-- English concepts... -->
        </div>
    </main>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const translationButton = document.getElementById('translationButton');
            const translationText = translationButton.querySelector('.translation-text');
            const arabicContent = document.getElementById('arabicContent');
            const englishContent = document.getElementById('englishContent');
            const html = document.documentElement;
            const body = document.body;

            let isArabic = true;

            function applyLanguage(arabic) {
                isArabic = arabic;
                const lang = isArabic ? 'ar' : 'en';
                const dir = isArabic ? 'rtl' : 'ltr';

                html.setAttribute('lang', lang);
                html.setAttribute('dir', dir);
                body.setAttribute('dir', dir);

                arabicContent.classList.toggle('hidden', !isArabic);
                englishContent.classList.toggle('hidden', isArabic);
                
                translationText.textContent = isArabic ? 'ترجمة' : 'Translate';
                document.title = isArabic ? 'الملخص المركز: أساسيات الأعمال التجارية - منصة أثر' : 'Focused Summary: Business Fundamentals - Athr Platform';
            }

            translationButton.addEventListener('click', () => applyLanguage(!isArabic));

            document.addEventListener('click', (evt) => {
                const question = evt.target.closest('.practice-question');
                if (!question) return;

                const solutionCard = question.nextElementSibling;
                if (solutionCard && solutionCard.classList.contains('solution-card')) {
                    question.classList.toggle('open');
                    solutionCard.classList.toggle('show');
                }
            });

            applyLanguage(true);
        });

        // AI Assistant Functions
        async function askAIProxy() {
            const question = document.getElementById('user-question').value;
            const lectureContent = document.getElementById('arabicContent').innerText;
            const answerDiv = document.getElementById('ai-answer');
            
            if (!question.trim()) {
                answerDiv.innerHTML = "من فضلك اكتب سؤالك أولاً 😊";
                answerDiv.classList.add('show');
                return;
            }
            
            answerDiv.innerHTML = "🤔 لحظات بفكر في الإجابة...";
            answerDiv.classList.add('show');
            
            try {
                const response = await fetch('/.netlify/functions/askAI', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        question: question,
                        context: lectureContent
                    })
                });
                
                const data = await response.json();
                answerDiv.innerHTML = data.reply || data.error || "حدث خطأ في الاتصال";
            } catch (error) {
                answerDiv.innerHTML = "عذراً، حدث خطأ في الاتصال. تأكد من اتصال الإنترنت وحاول مرة أخرى.";
            }
        }

        async function askAIProxyEn() {
            const question = document.getElementById('user-question-en').value;
            const lectureContent = document.getElementById('englishContent').innerText;
            const answerDiv = document.getElementById('ai-answer-en');
            
            if (!question.trim()) {
                answerDiv.innerHTML = "Please write your question first 😊";
                answerDiv.classList.add('show');
                return;
            }
            
            answerDiv.innerHTML = "🤔 Thinking about your question...";
            answerDiv.classList.add('show');
            
            try {
                const response = await fetch('/.netlify/functions/askAI', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        question: question,
                        context: lectureContent
                    })
                });
                
                const data = await response.json();
                answerDiv.innerHTML = data.reply || data.error || "Connection error occurred";
            } catch (error) {
                answerDiv.innerHTML = "Sorry, connection error occurred. Please check your internet and try again.";
            }
        }

        // Enter key support
        document.getElementById('user-question').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                askAIProxy();
            }
        });

        document.getElementById('user-question-en').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                askAIProxyEn();
            }
        });
    </script>
</body>
</html>

