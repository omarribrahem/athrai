<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="description" content="منصة أثر التعليمية - محتوى متخصص لكلية التجارة مع فيديو تفاعلي" />
  <meta name="keywords" content="اقتصاد، محاسبة، إدارة، تجارة، تنبؤ، business, economics, accounting, finance, forecasting" />
  <title>منصة أثر - التمهيد الأسي وطرق التنبؤ</title>
  
  <!-- ==================== FONTS ==================== -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;800&family=IBM+Plex+Sans+Arabic:wght@400;500;600;700&family=Inter:wght@400;500;600;700;800&family=Roboto+Mono:wght@400;500;600&display=swap" rel="stylesheet">
  
  <!-- ==================== MATH RENDERING ==================== -->
  <script>
    window.MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']],
        displayMath: [['$$', '$$'], ['\\[', '\\]']],
        processEscapes: true,
        processEnvironments: true,
        packages: {'[+]': ['ams', 'newcommand', 'mathtools', 'boldsymbol']},
        macros: {
          RR: "{\\mathbb{R}}",
          ZZ: "{\\mathbb{Z}}",
          NN: "{\\mathbb{N}}",
          bold: ["{\\bf #1}", 1],
          Delta: "{\\varDelta}",
          Sigma: "{\\varSigma}"
        }
      },
      svg: { fontCache: 'global', scale: 1.1 },
      options: {
        skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
        ignoreHtmlClass: 'tex2jax_ignore',
        processHtmlClass: 'tex2jax_process'
      },
      startup: {
        pageReady: () => {
          console.log('✅ MathJax is ready!');
          return MathJax.startup.defaultPageReady();
        }
      }
    };
  </script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js" id="MathJax-script" async></script>
  
  <!-- KaTeX (Alternative - Faster) -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>
  
  <!-- ==================== BUSINESS/FINANCE LIBRARIES ==================== -->
  
  <!-- Formula.js - Excel Financial Functions -->
  <script src="https://cdn.jsdelivr.net/npm/@formulajs/formulajs/dist/formula.min.js"></script>
  
  <!-- Finance.js - Financial Calculations -->
  <script src="https://cdn.jsdelivr.net/npm/financejs@4.1.0/finance.min.js"></script>
  
  <!-- Accounting.js - Currency & Number Formatting -->
  <script src="https://cdn.jsdelivr.net/npm/accounting@0.4.1/accounting.min.js"></script>
  
  <!-- Numeral.js - Number Formatting -->
  <script src="https://cdn.jsdelivr.net/npm/numeral@2.0.6/numeral.min.js"></script>
  
  <!-- Math.js - Advanced Math Operations -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/11.11.0/math.min.js"></script>
  
  <!-- Decimal.js - Precise Decimal Arithmetic -->
  <script src="https://cdn.jsdelivr.net/npm/decimal.js@10.4.3/decimal.min.js"></script>
  
  <!-- Big.js - Arbitrary Precision -->
  <script src="https://cdn.jsdelivr.net/npm/big.js@6.2.1/big.min.js"></script>
  
  <!-- ==================== STATISTICS & DATA ANALYSIS ==================== -->
  
  <!-- jStat - Statistical Functions -->
  <script src="https://cdn.jsdelivr.net/npm/jstat@latest/dist/jstat.min.js"></script>
  
  <!-- Simple Statistics -->
  <script src="https://unpkg.com/simple-statistics@7.8.3/dist/simple-statistics.min.js"></script>
  
  <!-- Regression.js - Regression Analysis -->
  <script src="https://cdn.jsdelivr.net/npm/regression@2.0.1/dist/regression.min.js"></script>
  
  <!-- Danfo.js - Pandas for JavaScript -->
  <script src="https://cdn.jsdelivr.net/npm/danfojs@1.1.2/lib/bundle.min.js"></script>
  
  <!-- PapaParse - CSV Parser -->
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
  
  <!-- SheetJS - Excel Files -->
  <script src="https://cdn.sheetjs.com/xlsx-0.20.1/package/dist/xlsx.full.min.js"></script>
  
  <!-- ==================== ADVANCED MATH ==================== -->
  
  <!-- Algebrite - Symbolic Math -->
  <script src="https://algebrite.org/algebrite.bundle-for-browser.js"></script>
  
  <!-- Nerdamer - Computer Algebra System -->
  <script src="https://cdn.jsdelivr.net/npm/nerdamer@1.1.13/nerdamer.core.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/nerdamer@1.1.13/Algebra.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/nerdamer@1.1.13/Calculus.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/nerdamer@1.1.13/Solve.js"></script>
  
  <!-- GeoGebra - Interactive Math -->
  <script src="https://www.geogebra.org/apps/deployggb.js"></script>
  
  <!-- Desmos Calculator API -->
  <script src="https://www.desmos.com/api/v1.8/calculator.js?apiKey=dcb31709b452b1cf9dc26972add0fda6"></script>
  
  <!-- JSXGraph - Dynamic Geometry -->
  <script src="https://cdn.jsdelivr.net/npm/jsxgraph/distrib/jsxgraphcore.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jsxgraph/distrib/jsxgraph.css">
  
  <!-- Function Plot - Mathematical Functions -->
  <script src="https://unpkg.com/function-plot/dist/function-plot.js"></script>
  
  <!-- ==================== CHARTS & GRAPHS (MOBILE OPTIMIZED) ==================== -->
  
  <!-- Chart.js - Simple Charts -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
  
  <!-- Echarts - Professional Charts -->
  <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
  
  <!-- ApexCharts - Modern Charts -->
  <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
  
  <!-- Plotly - Interactive Scientific Charts -->
  <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
  
  <!-- D3.js - Custom Data Visualizations -->
  <script src="https://d3js.org/d3.v7.min.js"></script>
  
  <!-- Highcharts - Professional Business Charts -->
  <script src="https://code.highcharts.com/highcharts.js"></script>
  <script src="https://code.highcharts.com/modules/exporting.js"></script>
  <script src="https://code.highcharts.com/modules/export-data.js"></script>
  
  <!-- TradingView Charting Library (Financial Charts) -->
  <script src="https://s3.tradingview.com/tv.js"></script>
  
  <!-- C3.js - D3-based Charts -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/c3/0.7.20/c3.min.css" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/c3/0.7.20/c3.min.js"></script>

  <!-- ==================== TABLES & DATA GRIDS ==================== -->
  
  <!-- jQuery (Required for DataTables) -->
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  
  <!-- DataTables - Interactive Tables -->
  <link rel="stylesheet" href="https://cdn.datatables.net/1.13.7/css/jquery.dataTables.min.css">
  <script src="https://cdn.datatables.net/1.13.7/js/jquery.dataTables.min.js"></script>
  <script src="https://cdn.datatables.net/buttons/2.4.2/js/dataTables.buttons.min.js"></script>
  <script src="https://cdn.datatables.net/buttons/2.4.2/js/buttons.html5.min.js"></script>
  
  <!-- Tabulator - Modern Tables -->
  <link href="https://unpkg.com/tabulator-tables@5.5.2/dist/css/tabulator.min.css" rel="stylesheet">
  <script src="https://unpkg.com/tabulator-tables@5.5.2/dist/js/tabulator.min.js"></script>
  
  <!-- AG Grid - Enterprise-grade Tables -->
  <script src="https://cdn.jsdelivr.net/npm/ag-grid-community/dist/ag-grid-community.min.js"></script>
  
  <!-- Handsontable - Spreadsheet-like -->
  <link href="https://cdn.jsdelivr.net/npm/handsontable/dist/handsontable.full.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/handsontable/dist/handsontable.full.min.js"></script>
  
  <!-- ==================== DIAGRAMS & FLOWCHARTS ==================== -->
  
  <!-- Mermaid - Diagrams & Flowcharts -->
  <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
  
  <!-- Vis.js - Network Diagrams -->
  <script src="https://unpkg.com/vis-network@9.1.6/dist/vis-network.min.js"></script>
  <link href="https://unpkg.com/vis-network@9.1.6/dist/dist/vis-network.min.css" rel="stylesheet">
  
  <!-- Cytoscape.js - Graph Theory & Networks -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/cytoscape/3.26.0/cytoscape.min.js"></script>
  
  <!-- GoJS - Interactive Diagrams -->
  <script src="https://unpkg.com/gojs@3.0.0/release/go.js"></script>
  
  <!-- ==================== ANIMATIONS ==================== -->
  
  <!-- Anime.js -->
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js"></script>
  
  <!-- GSAP -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.3/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.3/ScrollTrigger.min.js"></script>
  
  <!-- AOS - Animate On Scroll -->
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
  
  <!-- ==================== CODE HIGHLIGHTING ==================== -->
  
  <!-- Prism.js -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-sql.min.js"></script>
  
  <!-- ==================== PDF & PRINTING ==================== -->
  
  <!-- PDF.js -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
  
  <!-- html2pdf.js -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
  
  <!-- jsPDF -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  
  <!-- Print.js -->
  <script src="https://printjs-4de6.kxcdn.com/print.min.js"></script>
  <link rel="stylesheet" href="https://printjs-4de6.kxcdn.com/print.min.css">
  
  <!-- ==================== MARKDOWN & TEXT ==================== -->
  
  <!-- Marked.js -->
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  
  <!-- DOMPurify -->
  <script src="https://cdn.jsdelivr.net/npm/dompurify@3.0.6/dist/purify.min.js"></script>
  
  <!-- Markdown-it -->
  <script src="https://cdn.jsdelivr.net/npm/markdown-it@13.0.2/dist/markdown-it.min.js"></script>
  
  <!-- ==================== UI COMPONENTS ==================== -->
  
  <!-- SweetAlert2 - Beautiful Alerts -->
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  
  <!-- Toastify - Notifications -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
  <script src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
  
  <!-- Tippy.js - Tooltips -->
  <script src="https://unpkg.com/@popperjs/core@2"></script>
  <script src="https://unpkg.com/tippy.js@6"></script>
  
  <!-- NProgress - Progress Bar -->
  <script src="https://unpkg.com/nprogress@0.2.0/nprogress.js"></script>
  <link rel="stylesheet" href="https://unpkg.com/nprogress@0.2.0/nprogress.css">
  
  <!-- Progressbar.js -->
  <script src="https://cdn.rawgit.com/kimmobrunfeldt/progressbar.js/1.0.0/dist/progressbar.min.js"></script>
  
  <!-- ==================== CALENDAR & TIME ==================== -->
  
  <!-- FullCalendar -->
  <link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.9/index.global.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.9/index.global.min.js"></script>
  
  <!-- Flatpickr - Date Picker -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
  <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
  
  <!-- Moment.js -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.4/moment-with-locales.min.js"></script>
  
  <!-- ==================== ICONS ==================== -->
  
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  
  <!-- ==================== UTILITIES ==================== -->
  
  <!-- Lodash -->
  <script src="https://cdn.jsdelivr.net/npm/lodash@4.17.21/lodash.min.js"></script>
  
  <!-- Fuse.js - Fuzzy Search -->
  <script src="https://cdn.jsdelivr.net/npm/fuse.js@7.0.0"></script>
  
  <!-- List.js - Search & Sort -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/list.js/2.3.1/list.min.js"></script>
  
  <!-- ==================== STORAGE ==================== -->
  
  <!-- LocalForage -->
  <script src="https://cdn.jsdelivr.net/npm/localforage@1.10.0/dist/localforage.min.js"></script>
  
  <!-- ==================== ACADEMIC TOOLS ==================== -->
  
  <!-- Intro.js - Guided Tours -->
  <link href="https://cdn.jsdelivr.net/npm/intro.js@7.2.0/minified/introjs.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/intro.js@7.2.0/intro.min.js"></script>
  
  <!-- Driver.js - Product Tours -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/driver.js@1.3.1/dist/driver.css">
  <script src="https://cdn.jsdelivr.net/npm/driver.js@1.3.1/dist/driver.js.iife.js"></script>
  
  <!-- ==================== ML/AI (Optional) ==================== -->
  
  <!-- TensorFlow.js -->
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@4.13.0/dist/tf.min.js"></script>
  
  <!-- ML5.js -->
  <script src="https://unpkg.com/ml5@1/dist/ml5.min.js"></script>
  
  <!-- ==================== SWIPER (Sliders) ==================== -->
  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
  <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
  
  <!-- ==================== PARTICLES (Optional) ==================== -->
  
  <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
  
  <!-- ==================== RECOMMENDED ENHANCEMENTS ==================== -->
  
  <!-- Hammer.js - Touch Gestures (للتنقل السريع) -->
  <script src="https://cdn.jsdelivr.net/npm/hammerjs@2.0.8/hammer.min.js"></script>
  
  <!-- Howler.js - Audio (نطق المصطلحات) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/howler/2.2.4/howler.min.js"></script>
  
  <!-- Canvas Confetti - Celebrations (احتفالات الإجابات الصحيحة) -->
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/dist/confetti.browser.min.js"></script>
  
  <!-- Sortable.js - Drag & Drop (أسئلة التفاعلية) -->
  <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.1/Sortable.min.js"></script>
  
  <!-- Intersection Observer Polyfill (تتبع التقدم) -->
  <script src="https://polyfill.io/v3/polyfill.min.js?features=IntersectionObserver"></script>
  
  <!-- Plyr.js - Enhanced Video Player -->
  <link rel="stylesheet" href="https://cdn.plyr.io/3.7.8/plyr.css" />
  <script src="https://cdn.plyr.io/3.7.8/plyr.js"></script>
  
  <!-- Lottie - Vector Animations (شرح المفاهيم) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lottie-web/5.12.2/lottie.min.js"></script>
  
  <!-- Flickity - Carousel (عرض الأمثلة) -->
  <link rel="stylesheet" href="https://unpkg.com/flickity@2/dist/flickity.min.css">
  <script src="https://unpkg.com/flickity@2/dist/flickity.pkgd.min.js"></script>
<style>
    /* ==================== ROOT VARIABLES ==================== */
    :root {
      --color-primary: #16a34a;
      --color-primary-dark: #4d7c0f;
      --color-primary-medium: #22c55e;
      --color-ai: #f59e0b;
      --color-business: #2563eb;
      --color-finance: #059669;
      --color-accounting: #dc2626;
      --color-economics: #7c3aed;
      --glass-bg: rgba(240, 253, 244, 0.25);
      --glass-border: rgba(255, 255, 255, 0.4);
      --text-color: #0f172a;
      --border-radius: 24px;
      --font-arabic: 'IBM Plex Sans Arabic', 'Cairo', -apple-system, BlinkMacSystemFont, sans-serif;
      --font-english: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      --font-mono: 'Roboto Mono', 'Courier New', monospace;
    }

    /* ==================== ANIMATIONS ==================== */
    @keyframes gradientShift {
      0%, 100% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
    }
    @keyframes waveFlow {
      0%, 100% { transform: translateX(-25%) scaleY(1) scaleX(1); }
      33% { transform: translateX(-10%) scaleY(1.1) scaleX(0.9); }
      66% { transform: translateX(10%) scaleY(0.9) scaleX(1.1); }
    }
    @keyframes translate-glow {
      0%, 100% { box-shadow: 0 0 15px -5px rgba(77, 124, 15, 0.4), inset 0 2px 0 rgba(255,255,255,0.4); }
      50% { box-shadow: 0 0 25px 0px rgba(77, 124, 15, 0.6), inset 0 2px 0 rgba(255,255,255,0.6); }
    }
    @keyframes ai-glow {
      0%, 100% { box-shadow: 0 0 15px -5px rgba(245, 158, 11, 0.4), inset 0 2px 0 rgba(255,255,255,0.4); }
      50% { box-shadow: 0 0 25px 0px rgba(245, 158, 11, 0.6), inset 0 2px 0 rgba(255,255,255,0.6); }
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: scale(0.95); }
      to { opacity: 1; transform: scale(1); }
    }
    @keyframes slideUp {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    @keyframes slideDown {
      from { opacity: 0; transform: translateY(-20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    @keyframes typing {
      0%, 100% { opacity: 0.3; }
      50% { opacity: 1; }
    }
    @keyframes typingDots {
      0%, 20% { opacity: 0; }
      40% { opacity: 1; }
      60%, 100% { opacity: 0; }
    }
    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-10px); }
      75% { transform: translateX(10px); }
    }
    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }
    @keyframes pulse {
      0%, 100% { opacity: 1; transform: scale(1); }
      50% { opacity: 0.8; transform: scale(0.95); }
    }
    @keyframes countUp {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    @keyframes spin {
      to { transform: translate(-50%, -50%) rotate(360deg); }
    }
    @keyframes tapFeedback {
      0% { opacity: 0; transform: translateY(-50%) scale(0.6); }
      50% { opacity: 1; transform: translateY(-50%) scale(1.15); }
      100% { opacity: 0; transform: translateY(-50%) scale(1); }
    }

    /* ==================== BASE STYLES ==================== */
    * { 
      box-sizing: border-box; 
      margin: 0; 
      padding: 0;
      -webkit-tap-highlight-color: transparent;
    }
    html { 
      font-size: clamp(0.9rem, 2.5vw, 1.05rem); 
      scroll-behavior: smooth;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }
    body {
      font-family: var(--font-arabic);
      background: #f0fdf4;
      color: var(--text-color);
      line-height: 1.8;
      overflow-x: hidden;
      direction: rtl;
      padding: clamp(10px, 3vw, 20px);
      font-weight: 400;
      touch-action: manipulation;
    }
    body[dir="ltr"] { 
      direction: ltr; 
      font-family: var(--font-english);
    }

    /* ==================== BACKGROUND WAVES ==================== */
    .background-waves {
      position: fixed; inset: 0; z-index: -2;
      background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 25%, #fefce8 50%, #ecfccb 75%, #f0fdf4 100%);
      background-size: 400% 400%;
      animation: gradientShift 20s ease infinite;
    }
    .wave-layer {
      position: absolute; bottom: -10%; left: -10%; width: 120%; height: 300px;
      background: linear-gradient(90deg, rgba(22,163,74,0.08), rgba(77,124,15,0.08), rgba(34,197,94,0.08));
      border-radius: 60% 40% 0 0;
      animation: waveFlow 15s ease-in-out infinite;
    }
    .wave-layer:nth-child(2) {
      bottom: -5%; height: 250px; animation-delay: -5s;
      background: linear-gradient(90deg, rgba(77,124,15,0.06), rgba(34,197,94,0.06));
      border-radius: 40% 60% 0 0;
    }
    .wave-layer:nth-child(3) {
      bottom: 0%; height: 200px; animation-delay: -10s;
      background: linear-gradient(90deg, rgba(34,197,94,0.04), rgba(22,163,74,0.04));
      border-radius: 80% 20% 0 0;
    }

    /* ==================== TRANSLATION BUTTON ==================== */
    .translation-button {
      position: fixed; top: clamp(20px, 5vw, 30px); right: clamp(20px, 5vw, 30px);
      background: rgba(255,255,255,0.15); backdrop-filter: blur(30px);
      border: 2px solid var(--glass-border); border-radius: 50px;
      padding: clamp(8px, 2vw, 12px); cursor: pointer; z-index: 1000;
      width: clamp(50px, 12vw, 60px); height: clamp(50px, 12vw, 60px);
      display: flex; align-items: center; justify-content: center;
      transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
      box-shadow: 0 8px 25px -10px rgba(0,0,0,0.2), inset 0 2px 0 rgba(255,255,255,0.6);
    }
    .translation-button svg { width: 28px; height: 28px; flex-shrink: 0; transition: transform 0.3s ease; }
    .translation-button svg path, .translation-button svg circle { stroke: var(--color-primary-dark); }
    body[dir="ltr"] .translation-button { right: auto; left: clamp(20px, 5vw, 30px); }
    .translation-button:hover {
      width: auto; padding: clamp(8px, 2vw, 12px) clamp(16px, 4vw, 22px);
      border-color: var(--color-primary-dark);
      background: rgba(77, 124, 15, 0.15);
      transform: translateY(-3px);
      animation: translate-glow 2.5s infinite alternate;
    }
    .translation-button:hover svg { transform: scale(0.9); }
    .translation-text {
      font-size: clamp(0.85rem, 2.2vw, 1rem); 
      font-weight: 600;
      color: var(--color-primary-dark); 
      white-space: nowrap;
      display: none; 
      margin-left: 10px;
    }
    body[dir="ltr"] .translation-text { margin-left: 0; margin-right: 10px; }
    .translation-button:hover .translation-text { display: block; }

    /* ==================== AI FAB BUTTON ==================== */
    .ai-fab-button {
      position: fixed; bottom: clamp(20px, 5vw, 30px); right: clamp(20px, 5vw, 30px);
      background: rgba(255,255,255,0.15); backdrop-filter: blur(30px);
      border: 2px solid var(--glass-border); border-radius: 50px;
      padding: clamp(10px, 2.5vw, 14px); cursor: pointer; z-index: 1000;
      width: clamp(56px, 14vw, 70px); height: clamp(56px, 14vw, 70px);
      display: flex; align-items: center; justify-content: center;
      transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
      box-shadow: 0 8px 25px -10px rgba(245, 158, 11, 0.3), inset 0 2px 0 rgba(255,255,255,0.6);
    }
    body[dir="ltr"] .ai-fab-button { right: auto; left: clamp(20px, 5vw, 30px); }
    .ai-fab-button:hover {
      width: auto; padding: clamp(10px, 2.5vw, 14px) clamp(18px, 4.5vw, 24px);
      border-color: var(--color-ai);
      background: rgba(245, 158, 11, 0.15);
      transform: translateY(-3px);
      animation: ai-glow 2.5s infinite alternate;
    }
    .ai-fab-button svg { 
      width: clamp(28px, 7vw, 36px); 
      height: clamp(28px, 7vw, 36px); 
      flex-shrink: 0; 
      transition: transform 0.3s ease; 
    }
    .ai-fab-button:hover svg { transform: scale(0.9) rotate(5deg); }
    .ai-fab-text {
      font-size: clamp(0.85rem, 2.2vw, 1rem); 
      font-weight: 600;
      color: var(--color-ai); 
      white-space: nowrap;
      display: none; 
      margin-left: 10px;
    }
    body[dir="ltr"] .ai-fab-text { margin-left: 0; margin-right: 10px; }
    .ai-fab-button:hover .ai-fab-text { display: block; }

    /* ==================== AI CHAT MODAL ==================== */
    .ai-chat-modal {
      position: fixed; inset: 0;
      background: rgba(0, 0, 0, 0.3); backdrop-filter: blur(10px);
      display: none; align-items: center; justify-content: center;
      z-index: 2000; padding: 20px;
    }
    .ai-chat-modal.visible { display: flex; animation: fadeIn 0.3s ease; }
    
    .ai-chat-container {
      background: var(--glass-bg); 
      border: 2px solid var(--glass-border); 
      border-radius: var(--border-radius);
      width: 90%; max-width: 600px; height: 80%; max-height: 700px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.2);
      display: flex; flex-direction: column;
      transform: scale(0.95); transition: transform 0.3s ease;
      backdrop-filter: blur(25px);
      overflow: hidden;
    }
    .ai-chat-modal.visible .ai-chat-container { transform: scale(1); }
    
    .ai-chat-header {
      padding: 15px 20px;
      border-bottom: 2px solid var(--glass-border);
      display: flex; justify-content: space-between; align-items: center;
      background: linear-gradient(180deg, rgba(255,255,255,0.4), transparent);
    }
    .ai-chat-header h3 {
      color: var(--color-primary);
      margin: 0;
      font-size: clamp(1.1rem, 4vw, 1.3rem);
      font-weight: 700;
    }
    .ai-chat-close-btn {
      background: linear-gradient(135deg, rgba(255,255,255,0.3), rgba(255,255,255,0.1));
      border: 1.5px solid rgba(255, 255, 255, 0.5);
      backdrop-filter: blur(10px);
      color: #64748b;
      width: 38px;
      height: 38px;
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
      font-size: 0;
      box-shadow: 0 4px 12px rgba(0,0,0,0.08), inset 0 1px 0 rgba(255,255,255,0.6);
      position: relative;
      overflow: hidden;
    }
    .ai-chat-close-btn::before {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(135deg, transparent, rgba(220, 38, 38, 0.1));
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    .ai-chat-close-btn:hover::before { opacity: 1; }
    .ai-chat-close-btn:hover {
      border-color: rgba(220, 38, 38, 0.4);
      transform: translateY(-2px) scale(1.05);
      box-shadow: 0 6px 20px rgba(220, 38, 38, 0.25), inset 0 1px 0 rgba(255,255,255,0.8);
    }
    .ai-chat-close-btn svg {
      width: 18px;
      height: 18px;
      color: #64748b;
      transition: all 0.3s ease;
      position: relative;
      z-index: 1;
    }
    .ai-chat-close-btn:hover svg {
      color: #dc2626;
      transform: rotate(90deg) scale(1.1);
    }
    
    .ai-chat-messages {
      flex: 1; overflow-y: auto; padding: 20px;
      display: flex; flex-direction: column; gap: 15px;
    }
    .ai-chat-messages::-webkit-scrollbar { width: 10px; }
    .ai-chat-messages::-webkit-scrollbar-track {
      background: rgba(255,255,255,0.2);
      border-radius: 10px;
    }
    .ai-chat-messages::-webkit-scrollbar-thumb {
      background: rgba(22, 163, 74, 0.4);
      border-radius: 10px;
      border: 2px solid transparent;
      background-clip: padding-box;
    }
    .ai-chat-messages::-webkit-scrollbar-thumb:hover {
      background: rgba(22, 163, 74, 0.6);
      background-clip: padding-box;
    }
    
    .chat-message {
      max-width: 85%;
      padding: 10px 15px;
      border-radius: 18px;
      line-height: 1.6;
      animation: slideUp 0.3s ease;
    }
    .user-message {
      background: rgba(22,163,74,0.2);
      color: #14532d;
      border-bottom-right-radius: 4px;
      align-self: flex-end;
    }
    body[dir="ltr"] .user-message {
      border-bottom-left-radius: 4px;
      border-bottom-right-radius: 18px;
      align-self: flex-start;
    }
    .ai-message {
      background: rgba(245,158,11,0.15);
      color: #78350f;
      border-bottom-left-radius: 4px;
      align-self: flex-start;
    }
    body[dir="ltr"] .ai-message {
      border-bottom-right-radius: 4px;
      border-bottom-left-radius: 18px;
      align-self: flex-end;
    }
    
    .chat-message strong { color: #1e3a8a; font-weight: 700; }
    .chat-message ul { margin: 8px 0; padding-right: 20px; }
    body[dir="ltr"] .chat-message ul { padding-right: 0; padding-left: 20px; }
    .chat-message li { margin-bottom: 4px; color: inherit; }
    
    .typing-indicator {
      background: rgba(245,158,11,0.15) !important;
      color: #9ca3af !important;
      font-style: italic;
    }
    .dot {
      animation: typingDots 1.5s infinite;
      font-size: 1.2em;
      color: var(--color-ai) !important;
    }
    .dot:nth-child(2) { animation-delay: 0.3s; }
    .dot:nth-child(3) { animation-delay: 0.6s; }
    
    .ai-chat-input-area {
      padding: 15px 20px;
      border-top: 2px solid var(--glass-border);
      display: flex; gap: 10px;
      background: linear-gradient(0deg, rgba(255,255,255,0.4), transparent);
    }
    #ai-chat-input {
      flex-grow: 1;
      border: 2px solid var(--glass-border);
      background: rgba(255,255,255,0.3);
      border-radius: 50px;
      padding: 10px 18px;
      font-size: 1rem;
      color: var(--text-color);
      outline: none;
      transition: border-color 0.3s, box-shadow 0.3s;
      font-family: inherit;
    }
    #ai-chat-input:focus {
      border-color: var(--color-ai);
      box-shadow: 0 0 10px rgba(245,158,11,0.3);
    }
    #ai-chat-input:disabled { opacity: 0.6; cursor: not-allowed; }
    
    #ai-chat-send-btn {
      background-color: var(--color-ai);
      border: none; border-radius: 50%;
      width: 48px; height: 48px; flex-shrink: 0;
      cursor: pointer;
      display: flex; align-items: center; justify-content: center;
      transition: background-color 0.3s, transform 0.2s, opacity 0.3s;
    }
    #ai-chat-send-btn:hover:not(:disabled) {
      background-color: #fbbf24;
      transform: scale(1.05);
    }
    #ai-chat-send-btn:disabled {
      opacity: 0.6; cursor: not-allowed; transform: none;
    }
    #ai-chat-send-btn svg { width: 24px; height: 24px; color: white; }

    /* ==================== MAIN CONTENT ==================== */
    .main-content { max-width: 1200px; margin: 90px auto 0; padding: clamp(20px, 5vw, 40px); }
    .glassy-card {
      background: var(--glass-bg);
      border: 2px solid var(--glass-border);
      border-radius: var(--border-radius);
      padding: clamp(20px, 5vw, 30px);
      margin-bottom: clamp(25px, 5vw, 35px);
      backdrop-filter: blur(25px);
      transition: all 0.4s ease;
      box-shadow: 0 20px 50px rgba(0,0,0,0.1), inset 0 2px 0 rgba(255,255,255,0.5);
    }
    .glassy-card:hover { transform: translateY(-5px) scale(1.01); border-color: rgba(255,255,255,0.7); }

    /* ==================== TYPOGRAPHY ==================== */
    h1, h2, h3, h4, h5 { 
      font-weight: 700; 
      text-shadow: 0 2px 8px rgba(255,255,255,0.8);
      letter-spacing: -0.02em;
    }
    h1 {
      font-size: clamp(2rem, 6vw, 3.2rem);
      text-align: center;
      margin-bottom: clamp(20px, 4vw, 30px);
      color: #14532d;
      font-weight: 800;
    }
    h2 {
      font-size: clamp(1.5rem, 5vw, 2.5rem);
      border-bottom: 3px solid rgba(22,163,74,0.3);
      padding-bottom: clamp(10px, 2vw, 15px);
      margin-bottom: clamp(20px, 4vw, 30px);
      color: #166534;
      font-weight: 700;
    }
    h3 {
      font-size: clamp(1.2rem, 4vw, 1.8rem);
      margin-bottom: clamp(15px, 3vw, 20px);
      color: #15803d;
      font-weight: 600;
    }
    h4 {
      font-size: clamp(1.1rem, 3.5vw, 1.4rem);
      color: var(--color-primary);
      margin-bottom: clamp(12px, 2vw, 15px);
      font-weight: 600;
    }
    p, li { 
      color: #475569; 
      margin-bottom: clamp(10px, 2vw, 12px);
      line-height: 1.85;
    }
    strong { color: #14532d; font-weight: 600; }
    ul, ol { padding-right: clamp(20px, 4vw, 25px); margin-bottom: 20px; }
    body[dir="ltr"] ul, body[dir="ltr"] ol { padding-right: 0; padding-left: clamp(20px, 4vw, 25px); }

    /* ==================== HIGHLIGHTERS ==================== */
    mark {
      border-radius: 4px;
      padding: 2px 6px;
      font-weight: 500;
      border: none;
    }
    .highlight-green { background: rgba(22,163,74,0.2); color: #14532d; }
    .highlight-blue { background: rgba(59,130,246,0.2); color: #1e3a8a; }
    .highlight-yellow { background: rgba(234,179,8,0.2); color: #713f12; }
    .highlight-orange { background: rgba(249,115,22,0.2); color: #7c2d12; }
    .highlight-pink { background: rgba(236,72,153,0.2); color: #831843; }
    .highlight-business { background: rgba(37,99,235,0.2); color: #1e3a8a; }
    .highlight-finance { background: rgba(5,150,105,0.2); color: #064e3b; }
    .highlight-accounting { background: rgba(220,38,38,0.2); color: #7f1d1d; }
    .highlight-economics { background: rgba(124,58,237,0.2); color: #4c1d95; }

    /* ==================== INTERACTIVE QUESTIONS ==================== */
    .question-container {
      background: rgba(22,163,74,0.08);
      border: 2px solid rgba(22,163,74,0.2);
      border-radius: 18px;
      padding: 20px;
      margin: 20px 0;
      cursor: pointer;
      position: relative;
      transition: all 0.3s ease;
    }
    .question-container:hover {
      transform: translateY(-2px);
      border-color: var(--color-primary-medium);
      background: rgba(22,163,74,0.12);
    }
    .question-container.open {
      border-color: var(--color-primary-medium);
      background: rgba(22,163,74,0.15);
    }

    .question-header {
      font-weight: 600;
      color: var(--color-primary);
      margin-bottom: 0;
      font-size: 1.05rem;
      display: flex;
      align-items: center;
      gap: 12px;
      padding-right: 35px;
    }
    body[dir="ltr"] .question-header { padding-right: 0; padding-left: 35px; }

    .question-icon {
      width: 22px;
      height: 22px;
      flex-shrink: 0;
    }

    .arrow-icon {
      width: 18px;
      height: 18px;
      position: absolute;
      top: 22px;
      right: 20px;
      transition: transform 0.3s ease;
      flex-shrink: 0;
    }
    body[dir="ltr"] .arrow-icon { right: auto; left: 20px; }
    .question-container.open .arrow-icon { transform: rotate(180deg); }

    .question-content {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.5s ease, margin-top 0.3s ease;
    }
    .question-content.show { max-height: 2000px; margin-top: 20px; }

    .mcq-options { list-style: none; padding: 0; margin-top: 15px; }
    .mcq-option {
      background: rgba(255,255,255,0.3);
      border: 2px solid rgba(255,255,255,0.4);
      border-radius: 12px;
      padding: 14px 18px;
      margin: 10px 0;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
      position: relative;
    }
    .mcq-option:hover {
      background: rgba(22,163,74,0.15);
      transform: translateX(-5px);
      border-color: var(--color-primary);
    }
    body[dir="ltr"] .mcq-option:hover { transform: translateX(5px); }
    .mcq-option.selected {
      background: rgba(22,163,74,0.2);
      border-color: var(--color-primary);
      transform: scale(1.02);
    }
    .mcq-option.correct {
      background: linear-gradient(135deg, rgba(34,197,94,0.3), rgba(22,163,74,0.2));
      border-color: var(--color-primary-medium);
      color: #14532d;
      font-weight: 600;
    }
    .mcq-option.incorrect {
      background: linear-gradient(135deg, rgba(239,68,68,0.3), rgba(220,38,38,0.2));
      border-color: #dc2626;
      color: #7f1d1d;
      animation: shake 0.5s ease;
    }

    .solution-content {
      background: rgba(255,255,255,0.3);
      border: 1px solid rgba(255,255,255,0.4);
      padding: 20px;
      border-radius: 14px;
      animation: slideUp 0.6s ease;
    }
    .solution-content strong { color: #15803d; }

    /* ==================== TABLES ==================== */
    .table-container { 
      overflow-x: auto; 
      margin: 20px 0; 
      border-radius: 12px; 
      box-shadow: 0 8px 25px rgba(0,0,0,0.1); 
    }
    .concepts-table {
      width: 100%;
      border-collapse: collapse;
      background: rgba(255,255,255,0.2);
      border-radius: 12px;
      overflow: hidden;
      backdrop-filter: blur(15px);
    }
    .concepts-table th, .concepts-table td {
      padding: clamp(8px, 2vw, 12px);
      border: 1px solid rgba(255,255,255,0.3);
      text-align: right;
      font-size: clamp(0.8rem, 2vw, 1rem);
      vertical-align: top;
    }
    body[dir="ltr"] .concepts-table th,
    body[dir="ltr"] .concepts-table td { text-align: left; }
    .concepts-table th {
      background: rgba(22,163,74,0.2);
      font-weight: 700;
      color: var(--color-primary);
      text-align: center;
    }
    .concepts-table tr:hover { background: rgba(255,255,255,0.1); }

    /* Financial Tables */
    .financial-table th {
      background: rgba(5,150,105,0.2);
      color: var(--color-finance);
    }
    .accounting-table th {
      background: rgba(220,38,38,0.2);
      color: var(--color-accounting);
    }

    /* ==================== CHARTS (MOBILE OPTIMIZED) ==================== */
    .chart-container {
      position: relative;
      background: rgba(255,255,255,0.3);
      border-radius: 16px;
      padding: clamp(15px, 3vw, 20px);
      margin: 20px 0;
      backdrop-filter: blur(10px);
      box-shadow: 0 8px 25px rgba(0,0,0,0.1);
    }
    .chart-container canvas {
      display: block !important;
      width: 100% !important;
      height: auto !important;
      max-height: clamp(280px, 60vh, 450px) !important;
      min-height: 220px !important;
    }
    @media (max-width: 768px) {
      .chart-container canvas {
        max-height: 350px !important;
        min-height: 250px !important;
      }
    }
    @media (max-width: 480px) {
      .chart-container canvas {
        max-height: 300px !important;
        min-height: 220px !important;
      }
    }

    /* ==================== CODE BLOCKS ==================== */
    pre[class*="language-"] {
      border-radius: 12px;
      margin: 20px 0;
      box-shadow: 0 8px 25px rgba(0,0,0,0.1);
      font-family: var(--font-mono);
    }

    /* ==================== BUSINESS SPECIFIC STYLES ==================== */
    .currency { 
      font-family: var(--font-mono); 
      font-weight: 600; 
      color: var(--color-finance); 
    }
    .percentage { 
      font-family: var(--font-mono); 
      font-weight: 600; 
      color: var(--color-business); 
    }
    .formula-box {
      background: rgba(124,58,237,0.1);
      border: 2px solid rgba(124,58,237,0.3);
      border-radius: 12px;
      padding: 20px;
      margin: 20px 0;
      font-family: var(--font-mono);
    }
    
    /* Progress Indicators */
    .progress-bar {
      height: 8px;
      background: rgba(255,255,255,0.3);
      border-radius: 10px;
      overflow: hidden;
      margin: 10px 0;
    }
    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--color-primary), var(--color-primary-medium));
      border-radius: 10px;
      transition: width 1s ease;
    }
    
    /* Stats Cards */
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin: 20px 0;
    }
    .stat-card {
      background: rgba(255,255,255,0.2);
      padding: 25px;
      border-radius: 16px;
      text-align: center;
      border: 2px solid rgba(255,255,255,0.3);
      transition: all 0.3s ease;
    }
    .stat-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 30px rgba(0,0,0,0.15);
    }
    .stat-value {
      font-size: 2.5rem;
      font-weight: 800;
      margin-bottom: 8px;
    }
    .stat-label {
      font-size: 1rem;
      font-weight: 600;
      opacity: 0.8;
    }
    
    /* Alert Boxes */
    .alert-box {
      border-radius: 12px;
      padding: 20px;
      margin: 15px 0;
      display: flex;
      align-items: center;
      gap: 12px;
    }
    .alert-success {
      background: rgba(34,197,94,0.15);
      border-right: 4px solid #22c55e;
      color: #166534;
    }
    .alert-info {
      background: rgba(59,130,246,0.15);
      border-right: 4px solid #3b82f6;
      color: #1e3a8a;
    }
    .alert-warning {
      background: rgba(245,158,11,0.15);
      border-right: 4px solid #f59e0b;
      color: #b45309;
    }
    .alert-error {
      background: rgba(239,68,68,0.15);
      border-right: 4px solid #ef4444;
      color: #b91c1c;
    }
    body[dir="ltr"] .alert-box {
      border-right: none;
      border-left: 4px solid;
    }

    /* ==================== FOOTER ==================== */
    .footer-info {
      background: rgba(255,255,255,0.15);
      border: 1px solid rgba(255,255,255,0.3);
      border-radius: 16px;
      padding: 20px 24px;
      margin-top: 40px;
      text-align: center;
      backdrop-filter: blur(15px);
      box-shadow: 0 8px 20px rgba(0,0,0,0.08);
    }
    .footer-brand {
      font-size: 0.95rem;
      color: var(--color-primary-dark);
      font-weight: 600;
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }
    .footer-brand svg { width: 20px; height: 20px; }
    .footer-divider {
      width: 60px;
      height: 2px;
      background: linear-gradient(90deg, transparent, var(--color-primary), transparent);
      margin: 12px auto;
    }
    .footer-disclaimer {
      font-size: 0.85rem;
      color: #64748b;
      line-height: 1.6;
      margin-top: 8px;
    }
    
    /* ==================== UTILITY CLASSES ==================== */
    .hidden { display: none !important; }
    .text-center { text-align: center; }
    .mt-1 { margin-top: 0.5rem; }
    .mt-2 { margin-top: 1rem; }
    .mt-3 { margin-top: 1.5rem; }
    .mb-1 { margin-bottom: 0.5rem; }
    .mb-2 { margin-bottom: 1rem; }
    .mb-3 { margin-bottom: 1.5rem; }
    .p-1 { padding: 0.5rem; }
    .p-2 { padding: 1rem; }
    .p-3 { padding: 1.5rem; }

    /* ==================== VIDEO PLAYER STYLES (iOS 26) ==================== */
    .video-section {
      margin: clamp(30px, 6vw, 50px) 0;
    }
    
    .video-card-player {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(20px);
      border-radius: 24px;
      padding: clamp(15px, 3vw, 30px);
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .video-info {
      color: #fff;
      margin-bottom: 20px;
      text-align: center;
    }

    .video-info h2 {
      font-size: clamp(1.4rem, 4vw, 2rem);
      margin-bottom: 10px;
      color: #14532d;
      border-bottom: none;
    }

    .video-info p {
      opacity: 0.8;
      line-height: 1.6;
      font-size: clamp(0.85rem, 2.5vw, 1rem);
      color: #475569;
    }

    .video-player-wrapper {
      position: relative;
      border-radius: 16px;
      overflow: hidden;
      background: #000;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
    }

    .video-player {
      position: relative;
      width: 100%;
      aspect-ratio: 16/9;
      background: #000;
      user-select: none;
    }

    .video-player.fullscreen-mode {
      position: fixed;
      inset: 0;
      z-index: 9999;
      aspect-ratio: auto;
      height: 100vh;
      border-radius: 0;
    }

    video {
      width: 100%;
      height: 100%;
      object-fit: contain;
      background: #000;
    }

    .video-bars {
      position: absolute;
      inset: 0;
      pointer-events: none;
      z-index: 5;
      transition: opacity 0.8s ease;
      display: none;
    }

    .video-player.fullscreen-mode .video-bars {
      display: block;
    }

    .video-bars.hidden {
      opacity: 0;
    }

    .top-bar-bg {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 120px;
      background: linear-gradient(to bottom, rgba(0,0,0,0.8) 0%, transparent 100%);
    }

    .bottom-bar-bg {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      height: 150px;
      background: linear-gradient(to top, rgba(0,0,0,0.9) 0%, transparent 100%);
    }

    .glass-bubble {
      border-radius: 50%;
      border: 1.5px solid rgba(255, 255, 255, 0.3);
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.15) 0%, rgba(255, 255, 255, 0.05) 50%, rgba(255, 255, 255, 0.1) 100%);
      backdrop-filter: blur(12px) brightness(115%);
      -webkit-backdrop-filter: blur(12px) brightness(115%);
      box-shadow: inset -3px -3px 8px rgba(255, 255, 255, 0.3), inset 3px 3px 8px rgba(0, 0, 0, 0.15), 0 8px 32px rgba(0, 0, 0, 0.3);
      transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
    }

    .glass-bubble:hover {
      transform: scale(1.08);
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.2) 0%, rgba(255, 255, 255, 0.08) 50%, rgba(255, 255, 255, 0.15) 100%);
    }

    .glass-bubble:active {
      transform: scale(0.92);
    }

    .simple-controls {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      background: linear-gradient(to top, rgba(0,0,0,0.8) 0%, transparent 100%);
      padding: clamp(10px, 3vw, 20px);
      opacity: 0;
      transition: opacity 0.3s ease;
      z-index: 10;
    }

    .video-player:not(.fullscreen-mode):hover .simple-controls,
    .video-player:not(.fullscreen-mode).paused .simple-controls {
      opacity: 1;
    }

    .video-player.fullscreen-mode .simple-controls {
      display: none;
    }

    .simple-progress {
      height: 5px;
      background: rgba(255, 255, 255, 0.3);
      border-radius: 10px;
      margin-bottom: 12px;
      cursor: pointer;
      direction: ltr;
      position: relative;
    }

    .simple-progress-filled {
      height: 100%;
      background: #fff;
      border-radius: 10px;
      width: 0%;
    }

    .simple-controls-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      color: #fff;
    }

    .simple-btn {
      background: none;
      border: none;
      color: #fff;
      font-size: clamp(1.2rem, 4vw, 1.5rem);
      cursor: pointer;
      padding: 8px 12px;
      transition: transform 0.2s ease;
      min-width: 44px;
      min-height: 44px;
    }

    .simple-btn:active {
      transform: scale(0.9);
    }

    .simple-time {
      font-size: clamp(0.75rem, 2.5vw, 0.9rem);
    }

    .ios-controls {
      position: absolute;
      inset: 0;
      opacity: 0;
      transition: opacity 0.3s ease;
      pointer-events: none;
      z-index: 10;
      display: none;
    }

    .video-player.fullscreen-mode .ios-controls {
      display: block;
    }

    .video-player.fullscreen-mode.show-controls .ios-controls {
      opacity: 1;
      pointer-events: auto;
    }

    .top-controls {
      position: absolute;
      top: env(safe-area-inset-top, 15px);
      left: 15px;
      right: 15px;
      padding-top: 5px;
      display: flex;
      justify-content: space-between;
      z-index: 11;
    }

    .top-left-group {
      display: flex;
      gap: 12px;
    }

    .control-bubble {
      width: clamp(40px, 10vw, 48px);
      height: clamp(40px, 10vw, 48px);
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      border: none;
      color: #fff;
      font-size: clamp(16px, 4vw, 19px);
    }

    .volume-control {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .volume-slider-container {
      opacity: 0;
      transform: translateX(10px);
      pointer-events: none;
      transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
      display: flex;
      align-items: center;
      padding: 6px 12px;
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.12) 0%, rgba(255, 255, 255, 0.06) 100%);
      backdrop-filter: blur(20px) brightness(110%);
      border-radius: 50px;
      border: 1.5px solid rgba(255, 255, 255, 0.25);
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
    }

    .volume-control:hover .volume-slider-container,
    .volume-control:active .volume-slider-container {
      opacity: 1;
      transform: translateX(0);
      pointer-events: auto;
    }

    .volume-slider {
      -webkit-appearance: none;
      width: clamp(60px, 15vw, 90px);
      height: 5px;
      background: linear-gradient(to right, #fff 50%, rgba(255, 255, 255, 0.3) 50%);
      border-radius: 50px;
      outline: none;
      cursor: pointer;
      direction: ltr !important;
      box-shadow: inset 0 2px 6px rgba(0, 0, 0, 0.2);
    }

    .volume-slider::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 0;
      height: 0;
    }

    .volume-slider::-moz-range-thumb {
      width: 0;
      height: 0;
      border: none;
      background: transparent;
    }

    .center-play-controls {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      display: flex;
      align-items: center;
      gap: clamp(30px, 8vw, 55px);
      z-index: 11;
    }

    .skip-bubble {
      width: clamp(56px, 15vw, 72px);
      height: clamp(56px, 15vw, 72px);
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      border: none;
      color: #fff;
      font-size: clamp(20px, 5vw, 24px);
      position: relative;
    }

    .skip-number {
      position: absolute;
      font-size: clamp(8px, 2.2vw, 10px);
      font-weight: 900;
      letter-spacing: 0.3px;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -48%);
      color: #fff;
      text-shadow: 0 2px 6px rgba(0, 0, 0, 0.9);
      pointer-events: none;
      font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Text', sans-serif;
    }

    .play-bubble {
      width: clamp(70px, 18vw, 94px);
      height: clamp(70px, 18vw, 94px);
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      border: none;
      color: #fff;
      font-size: clamp(28px, 7vw, 34px);
    }

    .play-bubble i {
      margin-left: 3px;
    }

    .bottom-timeline {
      position: absolute;
      bottom: env(safe-area-inset-bottom, 15px);
      left: 15px;
      right: 15px;
      padding-bottom: 5px;
      z-index: 11;
    }

    .progress-wrapper {
      width: 100%;
      height: 40px;
      display: flex;
      align-items: center;
      margin-bottom: 8px;
      cursor: pointer;
      touch-action: none;
    }

    .progress-track {
      position: relative;
      width: 100%;
      height: 5px;
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.2) 0%, rgba(255, 255, 255, 0.3) 100%);
      border-radius: 50px;
      direction: ltr !important;
      transition: height 0.2s ease;
      box-shadow: inset 0 2px 6px rgba(0, 0, 0, 0.2);
    }

    .progress-wrapper:hover .progress-track,
    .progress-wrapper:active .progress-track {
      height: 7px;
    }

    .video-player.dragging .progress-track {
      height: 9px;
    }

    .progress-buffered {
      position: absolute;
      height: 100%;
      background: rgba(255, 255, 255, 0.45);
      border-radius: 50px;
      width: 0%;
    }

    .progress-filled {
      position: absolute;
      height: 100%;
      background: linear-gradient(90deg, #fff, #f0f0f0);
      border-radius: 50px;
      width: 0%;
      box-shadow: 0 0 15px rgba(255, 255, 255, 0.5);
    }

    .time-row {
      display: flex;
      justify-content: space-between;
      color: #fff;
    }

    .time-text {
      font-size: clamp(11px, 3vw, 13px);
      font-weight: 600;
      font-variant-numeric: tabular-nums;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
    }

    .loading-spinner {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: clamp(40px, 10vw, 52px);
      height: clamp(40px, 10vw, 52px);
      border: 3px solid rgba(255, 255, 255, 0.15);
      border-top-color: #fff;
      border-radius: 50%;
      animation: spin 0.75s linear infinite;
      display: none;
      z-index: 20;
    }

    .loading-spinner.active {
      display: block;
    }

    .tap-indicator {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      color: #fff;
      font-size: clamp(40px, 10vw, 52px);
      opacity: 0;
      pointer-events: none;
      z-index: 15;
      filter: drop-shadow(0 4px 20px rgba(0, 0, 0, 0.7));
    }

    .tap-indicator.left { left: 15%; }
    .tap-indicator.right { right: 15%; }

    .tap-indicator.active {
      animation: tapFeedback 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
    }

    /* ==================== RESPONSIVE ==================== */
    @media (max-width: 768px) {
      .stats-grid {
        grid-template-columns: 1fr;
      }
      .main-content {
        margin-top: 70px;
      }
      .video-card-player { 
        border-radius: 16px; 
      }
    }
    /* ==================== CONTENT LANGUAGE TOGGLE ==================== */
    .ar-content, .en-content {
      transition: opacity 0.3s ease;
    }
    
    .en-content {
      display: none; /* مخفي في البداية */
    }

  </style>
</head>
<body>
  <!-- Background -->
  <div class="background-waves">
    <div class="wave-layer"></div>
    <div class="wave-layer"></div>
    <div class="wave-layer"></div>
  </div>

  <!-- Translation Button -->
  <button class="translation-button" id="translationButton" aria-label="تبديل اللغة">
    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M2.25 12C2.25 17.3848 6.61522 21.75 12 21.75C17.3848 21.75 21.75 17.3848 21.75 12C21.75 6.61522 17.3848 2.25 12 2.25C9.36657 2.25 6.94277 3.22321 5.16629 4.83371M12.75 2.25V7.5M12.75 7.5H18M12.75 7.5L5.16629 4.83371M11.25 21.75V16.5M11.25 16.5H6M11.25 16.5L18.8337 19.1663M5.16629 4.83371C3.22321 6.94277 2.25 9.36657 2.25 12M2.25 12C2.25 14.6334 3.22321 17.0572 4.83371 18.8337M18.8337 19.1663C20.7768 17.0572 21.75 14.6334 21.75 12M18.8337 4.83371C17.0572 3.22321 14.6334 2.25 12 2.25" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>
    <span class="translation-text">English</span>
  </button>

  <!-- AI FAB Button -->
  <button class="ai-fab-button" id="aiChatButton" aria-label="مساعد أثر الذكي">
    <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color: #f59e0b;">
      <path d="M12 8V4H8"></path>
      <rect x="4" y="12" width="16" height="8" rx="2"></rect>
      <path d="M2 14h2"></path>
      <path d="M20 14h2"></path>
      <path d="M15 13v-2a3 3 0 0 0-3-3H6a3 3 0 0 0-3 3v2"></path>
    </svg>
    <span class="ai-fab-text" id="aiFabText">أثر AI</span>
  </button>

  <!-- AI Chat Modal -->
  <div class="ai-chat-modal" id="aiChatModal">
    <div class="ai-chat-container">
      <div class="ai-chat-header">
        <h3 id="ai-chat-title">اسأل أثر AI</h3>
        <button class="ai-chat-close-btn" id="aiChatCloseBtn" aria-label="إغلاق">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
      </div>
      <div class="ai-chat-messages" id="aiChatMessages"></div>
      <div class="ai-chat-input-area">
        <input type="text" id="ai-chat-input" placeholder="اكتب سؤالك هنا...">
        <button id="ai-chat-send-btn">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="22" y1="2" x2="11" y2="13"></line>
            <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
          </svg>
        </button>
      </div>
    </div>
  </div>

  <!-- Main Content -->
  <main class="main-content">

    <!-- ==================== VIDEO PLAYER SECTION ==================== -->
   
  <!-- ==================== ARABIC CONTENT ==================== -->
  <!-- ==================== ARABIC CONTENT ==================== -->
<div class="ar-content">
  
  <!-- ==================== HEADER ==================== -->
  <div class="glassy-card" data-aos="fade-down">
    <h1>🎓 التمهيد الأسي وطرق التنبؤ</h1>
    <p style="text-align: center; font-size: 1.1rem; color: #475569; margin-top: 15px;">
      رحلة تعليمية تفاعلية لفهم <mark class="highlight-green">التمهيد الأسي</mark> و<mark class="highlight-blue">طرق التنبؤ</mark> في الأعمال والإدارة
    </p>
    
    <div class="stats-grid" style="margin-top: 30px;">
      <div class="stat-card" data-aos="zoom-in" data-aos-delay="100">
        <div class="stat-value" style="color: var(--color-primary);">19</div>
        <div class="stat-label">مثال عملي</div>
      </div>
      <div class="stat-card" data-aos="zoom-in" data-aos-delay="200">
        <div class="stat-value" style="color: var(--color-business);">15+</div>
        <div class="stat-label">معادلة رياضية</div>
      </div>
      <div class="stat-card" data-aos="zoom-in" data-aos-delay="300">
        <div class="stat-value" style="color: var(--color-finance);">8</div>
        <div class="stat-label">أسئلة تفاعلية</div>
      </div>
      <div class="stat-card" data-aos="zoom-in" data-aos-delay="400">
        <div class="stat-value" style="color: var(--color-economics);">3</div>
        <div class="stat-label">رسوم بيانية</div>
      </div>
    </div>
  </div>

  <!-- ==================== INTRODUCTION ==================== -->
  <div class="glassy-card" data-aos="fade-up">
    <h2>📖 ما هو التمهيد الأسي؟</h2>
    <p>
      بعد ما اتكلمنا عن <mark class="highlight-blue">المتوسط المتحرك</mark> و<mark class="highlight-blue">المتوسط المتحرك المرجح</mark>، 
      دلوقتي جه الوقت نتعرف على تقنية أكثر <strong>مرونة واستجابة</strong> اسمها <mark class="highlight-green">التمهيد الأسي</mark>. 
      التقنية دي بتعتمد على فكرة إننا نضيف نسبة من <mark class="highlight-orange">خطأ التنبؤ السابق</mark> للتنبؤ اللي فات، 
      وبكده بنقدر نحسّن التوقعات المستقبلية بشكل مستمر.
    </p>
    
    <div class="alert-box alert-info" data-aos="fade-right">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="12" cy="12" r="10"></circle>
        <line x1="12" y1="16" x2="12" y2="12"></line>
        <line x1="12" y1="8" x2="12.01" y2="8"></line>
      </svg>
      <div>
        <strong>Official Definition:</strong> An averaging technique that is developed by adding a percentage of the forecast error to the previous period forecast.<br>
        <strong>بالعربي:</strong> تقنية متوسط يتم تطويرها بإضافة نسبة من خطأ التنبؤ إلى التنبؤ الخاص بالفترة السابقة.
      </div>
    </div>

    <h3>المعادلة الأساسية</h3>
    <div class="formula-box" data-aos="zoom-in">
      <p style="text-align: center; font-size: 1.3rem; margin: 0;">
        $$F_t = F_{t-1} + \alpha [(A_{t-1}) - (F_{t-1})]$$
      </p>
    </div>

    <h4>شرح المتغيرات (Variables):</h4>
    <ul>
      <li><strong>\(F_t\)</strong>: Current Period Forecast (التنبؤ للفترة الحالية)</li>
      <li><strong>\(F_{t-1}\)</strong>: Previous Period Forecast (التنبؤ للفترة السابقة)</li>
      <li><strong>\(\alpha\)</strong>: Smoothing Constant (ثابت التمهيد)</li>
      <li><strong>\(\alpha [(A_{t-1}) - (F_{t-1})]\)</strong>: Percentage of Forecast Error (نسبة خطأ التنبؤ)</li>
      <li><strong>\(A_{t-1}\)</strong>: Previous Actual Value (القيمة الفعلية للفترة السابقة)</li>
    </ul>
  </div>

  <!-- ==================== ALPHA CONSTANT ==================== -->
  <div class="glassy-card" data-aos="fade-up">
    <h2>🎚️ فهم ثابت التمهيد α (Alpha)</h2>
    <p>
      القيمة دي هي اللي بتتحكم في مدى <mark class="highlight-orange">استجابة النموذج لخطأ التنبؤ</mark>، وليها دور <strong>حاسم</strong> في جودة التوقعات.
    </p>

    <div class="alert-box alert-warning" data-aos="fade-left">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path>
        <line x1="12" y1="9" x2="12" y2="13"></line>
        <line x1="12" y1="17" x2="12.01" y2="17"></line>
      </svg>
      <div>
        <strong>خصائص α:</strong> قيمة α تتراوح بين صفر وواحد<br>
        <strong>Alpha characteristics:</strong> α has a value between zero and one<br>
        $$0 \leq \alpha \leq 1$$
      </div>
    </div>

    <h3>تأثير قيمة α (Impact of Alpha Value)</h3>
    <div class="table-container" data-aos="fade-up">
      <table class="concepts-table">
        <thead>
          <tr>
            <th>قيمة α<br>Alpha Value</th>
            <th>الاستجابة لخطأ التنبؤ<br>Error Response</th>
            <th>درجة التمهيد<br>Smoothing Level</th>
            <th>متى نستخدمها<br>When to Use</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><strong>قريبة من 0</strong><br>Close to 0<br>(e.g., 0.1, 0.2)</td>
            <td><span class="percentage">منخفضة</span><br>Low</td>
            <td><mark class="highlight-green">عالية</mark><br>High</td>
            <td>بيانات مستقرة<br>Stable data</td>
          </tr>
          <tr>
            <td><strong>قريبة من 1</strong><br>Close to 1<br>(e.g., 0.8, 0.9)</td>
            <td><span class="percentage">عالية</span><br>High</td>
            <td><mark class="highlight-orange">منخفضة</mark><br>Low</td>
            <td>بيانات متقلبة<br>Volatile data</td>
          </tr>
          <tr>
            <td><strong>متوسطة</strong><br>Medium<br>(e.g., 0.4, 0.5)</td>
            <td><span class="percentage">متوازنة</span><br>Balanced</td>
            <td><mark class="highlight-blue">متوازنة</mark><br>Balanced</td>
            <td>توازن عام<br>General balance</td>
          </tr>
        </tbody>
      </table>
    </div>

    <h3>القواعد الأساسية (Basic Rules):</h3>
    <div class="formula-box" data-aos="fade-right">
      <p style="text-align: center; font-size: 1.1rem; line-height: 2;">
        $$\text{Lower } \alpha \rightarrow \text{Lower Response + Higher Smoothing}$$
      </p>
      <p style="text-align: center; color: #64748b; margin: 10px 0;">
        α منخفضة ← استجابة منخفضة + تمهيد عالي
      </p>
    </div>

    <div class="formula-box" data-aos="fade-left">
      <p style="text-align: center; font-size: 1.1rem; line-height: 2;">
        $$\text{Higher } \alpha \rightarrow \text{Higher Response + Lower Smoothing}$$
      </p>
      <p style="text-align: center; color: #64748b; margin: 10px 0;">
        α عالية ← استجابة عالية + تمهيد منخفض
      </p>
    </div>

    <div class="alert-box alert-success" data-aos="fade-right" style="margin-top: 20px;">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
        <polyline points="22 4 12 14.01 9 11.01"></polyline>
      </svg>
      <div>
        <strong>تشبيه عملي (Practical Analogy):</strong><br>
        لو أنت بتسوق عربية:<br>
        • <mark class="highlight-green">α قليلة</mark> = فرامل ناعمة (smooth braking)<br>
        • <mark class="highlight-orange">α كبيرة</mark> = فرامل قوية (strong braking)
      </div>
    </div>
  </div>
  <!-- ==================== EXAMPLE 7 ==================== -->
  <div class="glassy-card" data-aos="fade-up">
    <h2>📊 التطبيق العملي: مثال 7 (Example 7)</h2>
    <p>
      خلينا نشوف إزاي نطبق المعادلة دي على أرض الواقع. لو عندنا منتج معين، التنبؤ بالطلب في الفترة السابقة كان <span class="currency">65 وحدة</span>، 
      لكن الطلب الفعلي طلع <span class="currency">76 وحدة</span>. عايزين نتنبأ بالطلب للفترة الجاية باستخدام <mark class="highlight-blue">α = 0.4</mark> و<mark class="highlight-orange">α = 0.6</mark>.
    </p>

    <h3>المعطيات (Given Data)</h3>
    <div class="alert-box alert-info">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M9 11l3 3L22 4"></path>
        <path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"></path>
      </svg>
      <div>
        <strong>\(F_{t-1}\)</strong> = 65 units (التنبؤ السابق)<br>
        <strong>\(A_{t-1}\)</strong> = 76 units (الطلب الفعلي)
      </div>
    </div>

    <h3>الحل (Solution)</h3>
    <h4>When α = 0.4:</h4>
    <div class="formula-box" data-aos="fade-right">
      <p>$$F_t = F_{t-1} + \alpha [(A_{t-1}) - (F_{t-1})]$$</p>
      <p>$$F_t = 65 + 0.4 (76 - 65)$$</p>
      <p>$$F_t = 65 + 0.4 (11)$$</p>
      <p>$$F_t = 65 + 4.4$$</p>
      <p style="font-size: 1.4rem; color: var(--color-primary);"><strong>$$F_t = 69 \text{ units}$$</strong></p>
    </div>
    <p style="text-align: center; color: #64748b; margin: 10px 0;">
      <strong>النتيجة:</strong> التنبؤ الجديد = 69 وحدة
    </p>

    <h4>When α = 0.6:</h4>
    <div class="formula-box" data-aos="fade-left">
      <p>$$F_t = 65 + 0.6 (76 - 65)$$</p>
      <p>$$F_t = 65 + 0.6 (11)$$</p>
      <p>$$F_t = 65 + 6.6$$</p>
      <p style="font-size: 1.4rem; color: var(--color-finance);"><strong>$$F_t = 72 \text{ units}$$</strong></p>
    </div>
    <p style="text-align: center; color: #64748b; margin: 10px 0;">
      <strong>النتيجة:</strong> التنبؤ الجديد = 72 وحدة
    </p>

    <div class="alert-box alert-success" style="margin-top: 20px;">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M12 2L2 7l10 5 10-5-10-5z"></path>
        <polyline points="2 17 12 22 22 17"></polyline>
        <polyline points="2 12 12 17 22 12"></polyline>
      </svg>
      <div>
        <strong>Observation (لاحظ هنا):</strong> لما زودنا α من 0.4 لـ 0.6، التنبؤ الجديد زاد من <mark class="highlight-green">69 وحدة</mark> لـ <mark class="highlight-orange">72 وحدة</mark>، 
        يعني النموذج استجاب بشكل أكبر للفرق بين الطلب الفعلي والتنبؤ السابق (Higher response to forecast error).
      </div>
    </div>

    <!-- Chart for Example 7 -->
    <div class="chart-container" data-aos="zoom-in" style="margin-top: 30px;">
      <canvas id="example7Chart"></canvas>
    </div>
  </div>

  <!-- ==================== INTERACTIVE CALCULATOR ==================== -->
  <div class="glassy-card" data-aos="fade-up">
    <h2>🧮 حاسبة التمهيد الأسي التفاعلية</h2>
    <p>جرب بنفسك! أدخل القيم وشوف التنبؤ الجديد (Try it yourself!)</p>

    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin: 25px 0;">
      <div>
        <label style="display: block; font-weight: 600; margin-bottom: 8px; color: var(--color-primary);">
          Previous Forecast (\(F_{t-1}\)):
        </label>
        <input type="number" id="prevForecast" value="65" 
               style="width: 100%; padding: 12px; border: 2px solid var(--glass-border); border-radius: 12px; 
                      font-size: 1rem; background: rgba(255,255,255,0.5);">
      </div>

      <div>
        <label style="display: block; font-weight: 600; margin-bottom: 8px; color: var(--color-finance);">
          Actual Demand (\(A_{t-1}\)):
        </label>
        <input type="number" id="actualDemand" value="76" 
               style="width: 100%; padding: 12px; border: 2px solid var(--glass-border); border-radius: 12px; 
                      font-size: 1rem; background: rgba(255,255,255,0.5);">
      </div>

      <div>
        <label style="display: block; font-weight: 600; margin-bottom: 8px; color: var(--color-business);">
          Smoothing Constant (α):
        </label>
        <input type="number" id="alphaValue" value="0.4" step="0.1" min="0" max="1" 
               style="width: 100%; padding: 12px; border: 2px solid var(--glass-border); border-radius: 12px; 
                      font-size: 1rem; background: rgba(255,255,255,0.5);">
      </div>
    </div>

    <button onclick="calculateExponentialSmoothing()" 
            style="background: linear-gradient(135deg, var(--color-primary), var(--color-primary-medium)); 
                   color: white; border: none; padding: 15px 40px; border-radius: 50px; 
                   font-size: 1.1rem; font-weight: 700; cursor: pointer; 
                   box-shadow: 0 8px 20px rgba(22,163,74,0.3); transition: all 0.3s ease;
                   width: 100%; max-width: 300px; display: block; margin: 0 auto;">
      <i class="fas fa-calculator"></i> احسب التنبؤ (Calculate)
    </button>

    <div id="calculatorResult" style="display: none; margin-top: 30px; animation: slideUp 0.5s ease;" data-aos="fade-up">
      <div class="alert-box alert-success">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polyline points="20 6 9 17 4 12"></polyline>
        </svg>
        <div>
          <h3 style="margin: 0 0 10px 0; color: var(--color-primary);">النتيجة (Result)</h3>
          <p style="font-size: 1.3rem; font-weight: 700; margin: 10px 0;">
            New Forecast = <span id="resultValue" style="color: var(--color-finance);">--</span>
          </p>
          <div id="resultSteps" style="line-height: 2; margin-top: 15px; padding: 15px; 
                                      background: rgba(255,255,255,0.3); border-radius: 12px;"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- ==================== MCQ QUESTION 1 ==================== -->
  <div class="question-container" onclick="toggleQuestion(this)" data-aos="fade-up">
    <div class="question-header">
      <svg class="question-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="12" cy="12" r="10"></circle>
        <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
        <line x1="12" y1="17" x2="12.01" y2="17"></line>
      </svg>
      سؤال امتحاني (Exam Question): اختر الإجابة الصحيحة
      <svg class="arrow-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <polyline points="6 9 12 15 18 9"></polyline>
      </svg>
    </div>
    
    <div class="question-content">
      <p style="font-weight: 600; font-size: 1.05rem; margin-bottom: 15px;">
        If previous forecast = <strong>50 units</strong>, actual demand = <strong>70 units</strong>, and <strong>α = 0.5</strong>, 
        then the new forecast is:<br>
        <span style="color: #64748b;">(إذا كان التنبؤ السابق 50 وحدة والطلب الفعلي 70 وحدة وα = 0.5، فإن التنبؤ الجديد هو:)</span>
      </p>
      
      <ul class="mcq-options">
        <li class="mcq-option" data-answer="wrong">أ) 55 units</li>
        <li class="mcq-option" data-answer="correct">ب) 60 units ✓</li>
        <li class="mcq-option" data-answer="wrong">ج) 65 units</li>
        <li class="mcq-option" data-answer="wrong">د) 70 units</li>
      </ul>

      <div class="solution-content" style="display: none; margin-top: 20px;">
        <h4 style="color: var(--color-primary);">💡 الحل التفصيلي (Detailed Solution):</h4>
        <div class="formula-box">
          <p>$$F_t = F_{t-1} + \alpha [(A_{t-1}) - (F_{t-1})]$$</p>
          <p>$$F_t = 50 + 0.5(70 - 50)$$</p>
          <p>$$F_t = 50 + 0.5(20)$$</p>
          <p>$$F_t = 50 + 10$$</p>
          <p style="font-size: 1.3rem; color: var(--color-finance);"><strong>$$F_t = 60 \text{ units}$$</strong></p>
        </div>
      </div>
    </div>
  </div>

  <!-- ==================== EXAMPLE 8 ==================== -->
  <div class="glassy-card" data-aos="fade-up">
    <h2>🏭 مثال 8: معدل استخدام المعدات (Example 8: Equipment Utilization)</h2>
    <p>
      مصنع بيستخدم التمهيد الأسي للتنبؤ بمعدل استخدام معداته الرئيسية في شهر <mark class="highlight-blue">مارس</mark>. 
      لو التنبؤ لشهر فبراير كان <strong>68%</strong> من الطاقة، لكن الاستخدام الفعلي كان <strong>89%</strong> من الطاقة، 
      وثابت التمهيد <mark class="highlight-green">α = 0.1</mark>.
    </p>

    <h3>المعطيات والحل (Given & Solution)</h3>
    <div class="table-container">
      <table class="concepts-table">
        <thead>
          <tr>
            <th>المتغير<br>Variable</th>
            <th>القيمة<br>Value</th>
            <th>الوصف<br>Description</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>\(F_{t-1}\)</td>
            <td><strong>68%</strong></td>
            <td>Previous forecast (February)</td>
          </tr>
          <tr>
            <td>\(A_{t-1}\)</td>
            <td><strong>89%</strong></td>
            <td>Actual usage (February)</td>
          </tr>
          <tr>
            <td>\(\alpha\)</td>
            <td><strong>0.1</strong></td>
            <td>Smoothing constant</td>
          </tr>
        </tbody>
      </table>
    </div>

    <h3>Application (التطبيق):</h3>
    <div class="formula-box" data-aos="zoom-in">
      <p>$$F_t = 68\% + 0.1 (89\% - 68\%)$$</p>
      <p>$$F_t = 68\% + 0.1 (21\%)$$</p>
      <p>$$F_t = 68\% + 2.1\%$$</p>
      <p style="font-size: 1.4rem; color: var(--color-primary);"><strong>$$F_t = 70\%$$</strong></p>
    </div>

    <div class="alert-box alert-warning" style="margin-top: 20px;">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="12" cy="12" r="10"></circle>
        <line x1="12" y1="8" x2="12" y2="12"></line>
        <line x1="12" y1="16" x2="12.01" y2="16"></line>
      </svg>
      <div>
        <strong>Observation (لاحظ):</strong> رغم إن الفرق الفعلي كان <span class="percentage">21%</span>، النموذج بس ضاف <span class="percentage">2.1%</span> 
        (يعني 10% من الفرق) لأن <mark class="highlight-green">α صغيرة</mark>، وده معناه إن المصنع عايز <strong>stability (استقرار)</strong> في التنبؤات 
        ومش عايز يتأثر بشكل كبير بالتقلبات المفاجئة (sudden fluctuations).
      </div>
    </div>
  </div>

  <!-- ==================== EXAMPLE 9 ==================== -->
  <div class="glassy-card" data-aos="fade-up">
    <h2>🔍 مثال 9: إيجاد الطلب الفعلي السابق (Finding Previous Actual Demand)</h2>
    <p>
      لو قالك السؤال إن التنبؤ للفترة القادمة <span class="currency">97 وحدة</span>، والتنبؤ السابق كان <span class="currency">80 وحدة</span>، 
      و<mark class="highlight-orange">α = 0.7</mark>، عايزين نعرف <strong>الطلب الفعلي للفترة السابقة</strong>.
    </p>

    <h3>Given Data (المعطيات):</h3>
    <ul>
      <li><strong>\(F_t\)</strong> = 97 units (التنبؤ الحالي)</li>
      <li><strong>\(F_{t-1}\)</strong> = 80 units (التنبؤ السابق)</li>
      <li><strong>\(\alpha\)</strong> = 0.7 (ثابت التمهيد)</li>
      <li><strong>\(A_{t-1}\)</strong> = ? (المطلوب - Required)</li>
    </ul>

    <h3>Solution (الحل):</h3>
    <p>نعوض في المعادلة ونحل لـ \(A_{t-1}\):</p>
    <div class="formula-box" data-aos="fade-right">
      <p>$$F_t = F_{t-1} + \alpha (A_{t-1} - F_{t-1})$$</p>
      <p>$$97 = 80 + 0.7 (A_{t-1} - 80)$$</p>
      <p>$$97 - 80 = 0.7 A_{t-1} - 56$$</p>
      <p>$$17 = 0.7 A_{t-1} - 56$$</p>
      <p>$$17 + 56 = 0.7 A_{t-1}$$</p>
      <p>$$73 = 0.7 A_{t-1}$$</p>
      <p>$$A_{t-1} = \frac{73}{0.7}$$</p>
      <p style="font-size: 1.4rem; color: var(--color-finance);"><strong>$$A_{t-1} = 104 \text{ units}$$</strong></p>
    </div>

    <div class="alert-box alert-success">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
        <polyline points="22 4 12 14.01 9 11.01"></polyline>
      </svg>
      <div>
        <strong>Result (النتيجة):</strong> الطلب الفعلي للفترة السابقة كان <mark class="highlight-finance">104 وحدة</mark>.
      </div>
    </div>
  </div>

  <!-- ==================== MCQ QUESTION 2 ==================== -->
  <div class="question-container" onclick="toggleQuestion(this)" data-aos="fade-up">
    <div class="question-header">
      <svg class="question-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="12" cy="12" r="10"></circle>
        <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
        <line x1="12" y1="17" x2="12.01" y2="17"></line>
      </svg>
      سؤال امتحاني: إيجاد الطلب الفعلي
      <svg class="arrow-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <polyline points="6 9 12 15 18 9"></polyline>
      </svg>
    </div>
    
    <div class="question-content">
      <p style="font-weight: 600; font-size: 1.05rem; margin-bottom: 15px;">
        If \(F_t = 120\), \(F_{t-1} = 100\), and \(\alpha = 0.5\), then \(A_{t-1}\) equals:<br>
        <span style="color: #64748b;">(إذا كان \(F_t = 120\)، \(F_{t-1} = 100\)، و\(\alpha = 0.5\)، فإن \(A_{t-1}\) يساوي:)</span>
      </p>
      
      <ul class="mcq-options">
        <li class="mcq-option" data-answer="wrong">أ) 110</li>
        <li class="mcq-option" data-answer="wrong">ب) 130</li>
        <li class="mcq-option" data-answer="correct">ج) 140 ✓</li>
        <li class="mcq-option" data-answer="wrong">د) 150</li>
      </ul>

      <div class="solution-content" style="display: none; margin-top: 20px;">
        <h4 style="color: var(--color-primary);">💡 Detailed Solution (الحل التفصيلي):</h4>
        <div class="formula-box">
          <p>$$120 = 100 + 0.5(A_{t-1} - 100)$$</p>
          <p>$$20 = 0.5 A_{t-1} - 50$$</p>
          <p>$$70 = 0.5 A_{t-1}$$</p>
          <p style="font-size: 1.3rem; color: var(--color-finance);"><strong>$$A_{t-1} = 140 \text{ units}$$</strong></p>
        </div>
      </div>
    </div>
  </div>

  <!-- ==================== EXAMPLE 10 ==================== -->
  <div class="glassy-card" data-aos="fade-up">
    <h2>🎯 مثال 10: إيجاد قيمة α (Finding Alpha Value)</h2>
    <p>
      لو التنبؤ الحالي <span class="currency">100 وحدة</span>، والتنبؤ السابق <span class="currency">95 وحدة</span>، 
      والطلب الفعلي السابق <span class="currency">115 وحدة</span>، عايزين نحسب قيمة <strong>α</strong>.
    </p>

    <h3>Given Data (المعطيات):</h3>
    <div class="table-container">
      <table class="concepts-table">
        <thead>
          <tr>
            <th>Variable</th>
            <th>Value</th>
          </tr>
        </thead>
        <tbody>
          <tr><td>\(F_t\)</td><td><strong>100 units</strong></td></tr>
          <tr><td>\(F_{t-1}\)</td><td><strong>95 units</strong></td></tr>
          <tr><td>\(A_{t-1}\)</td><td><strong>115 units</strong></td></tr>
          <tr><td>\(\alpha\)</td><td><strong>?</strong> (Required)</td></tr>
        </tbody>
      </table>
    </div>

    <h3>Solution (الحل):</h3>
    <p>نعوض في المعادلة ونحل لـ α:</p>
    <div class="formula-box" data-aos="zoom-in">
      <p>$$F_t = F_{t-1} + \alpha (A_{t-1} - F_{t-1})$$</p>
      <p>$$100 = 95 + \alpha (115 - 95)$$</p>
      <p>$$100 - 95 = 20\alpha$$</p>
      <p>$$5 = 20\alpha$$</p>
      <p>$$\alpha = \frac{5}{20}$$</p>
      <p style="font-size: 1.4rem; color: var(--color-business);"><strong>$$\alpha = 0.25$$</strong></p>
    </div>

    <div class="alert-box alert-info">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M12 2L2 7l10 5 10-5-10-5z"></path>
        <polyline points="2 17 12 22 22 17"></polyline>
        <polyline points="2 12 12 17 22 12"></polyline>
      </svg>
      <div>
        <strong>Result:</strong> ثابت التمهيد المستخدم كان <mark class="highlight-business">α = 0.25</mark>، 
        وهي قيمة منخفضة نسبياً تعني أن النموذج يميل للاستقرار (stability) والتمهيد العالي (high smoothing).
      </div>
    </div>
  </div>
  <!-- ==================== EXAMPLE 11 ==================== -->
  <div class="glassy-card" data-aos="fade-up">
    <h2>📈 مثال 11: مقارنة شاملة بين التقنيات (Comprehensive Methods Comparison)</h2>
    <p>
      دلوقتي خلينا نشوف مثال متكامل بيقارن بين <strong>كل تقنيات التنبؤ</strong> اللي اتعلمناها. 
      مركز خدمة عملاء <mark class="highlight-business">ماكدونالدز في مصر</mark> عنده بيانات عن عدد الشكاوى خلال آخر 5 سنين:
    </p>

    <div class="table-container" data-aos="fade-right">
      <table class="concepts-table">
        <thead>
          <tr>
            <th>الفترة<br>Period</th>
            <th>عدد الشكاوى الفعلي<br>Actual Complaints</th>
          </tr>
        </thead>
        <tbody>
          <tr><td>T-5</td><td><strong>120</strong></td></tr>
          <tr><td>T-4</td><td><strong>130</strong></td></tr>
          <tr><td>T-3</td><td><strong>110</strong></td></tr>
          <tr><td>T-2</td><td><strong>116</strong></td></tr>
          <tr><td>T-1</td><td><strong>128</strong></td></tr>
        </tbody>
      </table>
    </div>

    <h3>Required: Forecast for period T using (المطلوب: التنبؤ للفترة T باستخدام):</h3>

    <h4>أ) Naïve Approach (الطريقة الساذجة):</h4>
    <div class="formula-box" data-aos="fade-left">
      <p>$$\text{Forecast}_T = \text{Actual}_{T-1}$$</p>
      <p style="font-size: 1.3rem; color: var(--color-primary);"><strong>$$F_T = 128 \text{ complaints}$$</strong></p>
    </div>
    <p style="text-align: center; color: #64748b;">التنبؤ = آخر قيمة فعلية</p>

    <h4>ب) Moving Average - 3 Periods (المتوسط المتحرك لـ 3 فترات):</h4>
    <div class="formula-box" data-aos="fade-right">
      <p>$$MA = \frac{X_{T-3} + X_{T-2} + X_{T-1}}{3}$$</p>
      <p>$$MA = \frac{110 + 116 + 128}{3} = \frac{354}{3}$$</p>
      <p style="font-size: 1.3rem; color: var(--color-business);"><strong>$$MA = 118 \text{ complaints}$$</strong></p>
    </div>

    <h4>ج) Weighted Moving Average (المتوسط المتحرك المرجح):</h4>
    <p>Weights: 50% (most recent), 30% (middle), 20% (oldest)<br>
       <span style="color: #64748b;">الأوزان: 50% للأحدث، 30% للوسط، 20% للأقدم</span></p>
    <div class="formula-box" data-aos="fade-left">
      <p>$$WMA = (X_{T-1} \times 0.5) + (X_{T-2} \times 0.3) + (X_{T-3} \times 0.2)$$</p>
      <p>$$WMA = (128 \times 0.5) + (116 \times 0.3) + (110 \times 0.2)$$</p>
      <p>$$WMA = 64 + 34.8 + 22$$</p>
      <p style="font-size: 1.3rem; color: var(--color-finance);"><strong>$$WMA = 121 \text{ complaints}$$</strong></p>
    </div>

    <h4>د) Exponential Smoothing - α = 0.4 (التمهيد الأسي):</h4>
    <p>هنا لازم نبني جدول متتالي لأن كل تنبؤ بيعتمد على اللي قبله (Sequential calculations needed):</p>
    <div class="table-container" data-aos="zoom-in">
      <table class="concepts-table">
        <thead>
          <tr>
            <th>Period</th>
            <th>Actual</th>
            <th>Forecast</th>
            <th>Calculation</th>
          </tr>
        </thead>
        <tbody>
          <tr><td>T-5</td><td>120</td><td>-</td><td>No previous forecast</td></tr>
          <tr><td>T-4</td><td>130</td><td>120</td><td>Initial value</td></tr>
          <tr><td>T-3</td><td>110</td><td>124</td><td>\(120 + 0.4(130-120) = 124\)</td></tr>
          <tr><td>T-2</td><td>116</td><td>118</td><td>\(124 + 0.4(110-124) = 118\)</td></tr>
          <tr><td>T-1</td><td>128</td><td>117</td><td>\(118 + 0.4(116-118) = 117\)</td></tr>
          <tr style="background: rgba(22,163,74,0.15);">
            <td><strong>T</strong></td><td><strong>-</strong></td><td><strong>121</strong></td>
            <td><strong>\(117 + 0.4(128-117) = 121\)</strong></td>
          </tr>
        </tbody>
      </table>
    </div>

    <h3>Results Comparison (مقارنة النتائج):</h3>
    <div class="table-container" data-aos="fade-up">
      <table class="concepts-table financial-table">
        <thead>
          <tr>
            <th>Method</th>
            <th>Forecast</th>
            <th>Notes</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Naïve</td>
            <td><strong>128</strong></td>
            <td>Highest - most recent value only</td>
          </tr>
          <tr>
            <td>Moving Average (3)</td>
            <td><strong>118</strong></td>
            <td>Lowest - equal weights</td>
          </tr>
          <tr>
            <td>Weighted MA</td>
            <td><strong>121</strong></td>
            <td>Medium - custom weights</td>
          </tr>
          <tr>
            <td>Exp. Smoothing (α=0.4)</td>
            <td><strong>121</strong></td>
            <td>Medium - adaptive</td>
          </tr>
        </tbody>
      </table>
    </div>

    <div class="alert-box alert-success">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M12 2L2 7l10 5 10-5-10-5z"></path>
        <polyline points="2 17 12 22 22 17"></polyline>
        <polyline points="2 12 12 17 22 12"></polyline>
      </svg>
      <div>
        <strong>Observation:</strong> المتوسط المتحرك المرجح والتمهيد الأسي أعطوا نفس النتيجة (121)، 
        لكن <mark class="highlight-green">التمهيد الأسي أكثر مرونة</mark> لأنه بيتكيف باستمرار مع الأخطاء (continuously adapts to errors).
      </div>
    </div>
  </div>

  <!-- ==================== EXAMPLE 12 ==================== -->
  <div class="glassy-card" data-aos="fade-up">
    <h2>🍚 مثال 12: تطبيق شامل على مبيعات أرز أصالة (Asala Rice Sales)</h2>
    <p>
      عندنا بيانات مبيعات <mark class="highlight-business">أرز أصالة</mark> لآخر 5 سنين، 
      وعايزين نتنبأ بمبيعات <strong>2021</strong> بكل الطرق:
    </p>

    <div class="table-container" data-aos="fade-right">
      <table class="concepts-table">
        <thead>
          <tr>
            <th>Year</th>
            <th>Sales (units)</th>
          </tr>
        </thead>
        <tbody>
          <tr><td>2016</td><td><strong>950</strong></td></tr>
          <tr><td>2017</td><td><strong>1100</strong></td></tr>
          <tr><td>2018</td><td><strong>1270</strong></td></tr>
          <tr><td>2019</td><td><strong>1300</strong></td></tr>
          <tr><td>2020</td><td><strong>1325</strong></td></tr>
        </tbody>
      </table>
    </div>

    <h3>Solutions (الحلول):</h3>

    <h4>أ) Naïve Forecast:</h4>
    <div class="formula-box">
      <p>$$F_{2021} = \text{Sales}_{2020} = 1325 \text{ units}$$</p>
    </div>

    <h4>ب) Moving Average (4 periods):</h4>
    <div class="formula-box">
      <p>$$MA = \frac{1100 + 1270 + 1300 + 1325}{4} = \frac{4995}{4}$$</p>
      <p style="font-size: 1.4rem; color: var(--color-business);"><strong>$$MA = 1249 \text{ units}$$</strong></p>
    </div>

    <h4>ج) Weighted Moving Average (4 periods):</h4>
    <p>Weights: 10%, 20%, 30%, 40% (from oldest to most recent)<br>
       <span style="color: #64748b;">الأوزان: 10%، 20%، 30%، 40% من الأقدم للأحدث</span></p>
    <div class="formula-box">
      <p>$$WMA = (1100 \times 0.1) + (1270 \times 0.2) + (1300 \times 0.3) + (1325 \times 0.4)$$</p>
      <p>$$WMA = 110 + 254 + 390 + 530$$</p>
      <p style="font-size: 1.4rem; color: var(--color-finance);"><strong>$$WMA = 1284 \text{ units}$$</strong></p>
    </div>

    <h4>د) Exponential Smoothing (α = 0.65):</h4>
    <div class="table-container" data-aos="zoom-in">
      <table class="concepts-table">
        <thead>
          <tr>
            <th>Year</th>
            <th>Actual Sales</th>
            <th>Forecast</th>
            <th>Calculation</th>
          </tr>
        </thead>
        <tbody>
          <tr><td>2016</td><td>950</td><td>-</td><td>Initial</td></tr>
          <tr><td>2017</td><td>1100</td><td>950</td><td>Initial value</td></tr>
          <tr><td>2018</td><td>1270</td><td>1048</td><td>\(950 + 0.65(1100-950) = 1048\)</td></tr>
          <tr><td>2019</td><td>1300</td><td>1192</td><td>\(1048 + 0.65(1270-1048) = 1192\)</td></tr>
          <tr><td>2020</td><td>1325</td><td>1262</td><td>\(1192 + 0.65(1300-1192) = 1262\)</td></tr>
          <tr style="background: rgba(22,163,74,0.15);">
            <td><strong>2021</strong></td><td><strong>-</strong></td><td><strong>1303</strong></td>
            <td><strong>\(1262 + 0.65(1325-1262) = 1303\)</strong></td>
          </tr>
        </tbody>
      </table>
    </div>

    <div class="alert-box alert-warning">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path>
        <line x1="12" y1="9" x2="12" y2="13"></line>
        <line x1="12" y1="17" x2="12.01" y2="17"></line>
      </svg>
      <div>
        <strong>Note:</strong> α = 0.65 كبيرة نسبياً (relatively high)، وده خلى النموذج يستجيب بقوة للزيادات المستمرة في المبيعات، 
        وده ظهر في إن التنبؤ النهائي <mark class="highlight-finance">(1303)</mark> كان أعلى من باقي الطرق (highest among all methods).
      </div>
    </div>
  </div>

  <!-- ==================== TRENDS SECTION ==================== -->
  <div class="glassy-card" data-aos="fade-up">
    <h2>📊 التعامل مع الاتجاهات (Dealing with Trends)</h2>
    <p>
      بعد ما فهمنا تقنيات التمهيد الأساسية، دلوقتي خلينا نتعامل مع <mark class="highlight-blue">الاتجاهات طويلة الأجل</mark> (Long-term Trends). 
    </p>

    <div class="alert-box alert-info" data-aos="fade-right">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="12" cy="12" r="10"></circle>
        <line x1="12" y1="16" x2="12" y2="12"></line>
        <line x1="12" y1="8" x2="12.01" y2="8"></line>
      </svg>
      <div>
        <strong>Definition:</strong> A long term upward or downward movement in the data.<br>
        <strong>التعريف:</strong> حركة تصاعدية أو تنازلية طويلة المدى في البيانات.
      </div>
    </div>

    <h3>Linear Trend Equation (معادلة الاتجاه الخطي):</h3>
    <p>لما يكون عندنا اتجاه واضح في البيانات، بنستخدم:</p>
    <div class="formula-box" data-aos="zoom-in">
      <p style="font-size: 1.4rem;">$$F_t = a + bt$$</p>
    </div>

    <h4>Variables (شرح المتغيرات):</h4>
    <ul>
      <li><strong>\(F_t\)</strong>: Forecast for period t (التنبؤ للفترة t)</li>
      <li><strong>\(a\)</strong>: Intercept - forecast value when t = 0 (نقطة التقاطع - قيمة السنة الأساس)</li>
      <li><strong>\(b\)</strong>: Slope - change per period (الميل - التغير لكل فترة زمنية)</li>
      <li><strong>\(t\)</strong>: Time period number (رقم الفترة الزمنية)</li>
    </ul>
  </div>

  <!-- ==================== EXAMPLE 13 ==================== -->
  <div class="glassy-card" data-aos="fade-up">
    <h2>💄 مثال 13: التنبؤ بمبيعات كريم EVA (EVA Cream Forecast)</h2>
    <p>
      شركة مستحضرات تجميل مصرية كبيرة طورت المعادلة التالية للتنبؤ بالطلب على <mark class="highlight-pink">كريم EVA</mark> 
      (Base year: 1990):
    </p>

    <div class="formula-box" data-aos="fade-right">
      <p style="font-size: 1.3rem;">$$F_t = 80 + 20t$$</p>
    </div>

    <h3>أ) Explain the Equation (شرح المعادلة):</h3>
    <ul>
      <li><strong>80</strong>: Demand in base year 1990 (الطلب في سنة 1990)</li>
      <li><strong>20</strong>: Annual increase (الزيادة السنوية)</li>
      <li><strong>t</strong>: Number of years from 1990 (عدد السنوات من 1990)</li>
    </ul>

    <h3>ب) Are sales increasing or decreasing? (هل المبيعات تزيد أم تنقص؟)</h3>
    <div class="alert-box alert-success">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <polyline points="23 6 13.5 15.5 8.5 10.5 1 18"></polyline>
        <polyline points="17 6 23 6 23 12"></polyline>
      </svg>
      <div>
        <strong>Sales are INCREASING</strong> (المبيعات تزيد)<br>
        Because the slope is positive: \(b = +20 > 0\)
      </div>
    </div>

    <h3>ج) Forecast for year 2020:</h3>
    <p>Calculate t for 2020 (حساب قيمة t للعام 2020):</p>
    <div class="formula-box" data-aos="fade-left">
      <p>$$t = 2020 - 1990 = 30 \text{ years}$$</p>
      <p>$$F_{2020} = 80 + 20(30) = 80 + 600$$</p>
      <p style="font-size: 1.4rem; color: var(--color-finance);"><strong>$$F_{2020} = 680 \text{ units}$$</strong></p>
    </div>
  </div>

  <!-- ==================== MCQ QUESTION 3 ==================== -->
  <div class="question-container" onclick="toggleQuestion(this)" data-aos="fade-up">
    <div class="question-header">
      <svg class="question-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="12" cy="12" r="10"></circle>
        <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
        <line x1="12" y1="17" x2="12.01" y2="17"></line>
      </svg>
      سؤال امتحاني: Trend Equation
      <svg class="arrow-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <polyline points="6 9 12 15 18 9"></polyline>
      </svg>
    </div>
    
    <div class="question-content">
      <p style="font-weight: 600; font-size: 1.05rem; margin-bottom: 15px;">
        If the trend equation is \(F_t = 150 - 5t\) (base year 2000), then the forecast for year 2010 is:<br>
        <span style="color: #64748b;">(إذا كانت معادلة الاتجاه \(F_t = 150 - 5t\) والسنة الأساس 2000، فإن التنبؤ لعام 2010 هو:)</span>
      </p>
      
      <ul class="mcq-options">
        <li class="mcq-option" data-answer="correct">أ) 100 ✓</li>
        <li class="mcq-option" data-answer="wrong">ب) 150</li>
        <li class="mcq-option" data-answer="wrong">ج) 200</li>
        <li class="mcq-option" data-answer="wrong">د) 250</li>
      </ul>

      <div class="solution-content" style="display: none; margin-top: 20px;">
        <h4 style="color: var(--color-primary);">💡 Detailed Solution:</h4>
        <div class="formula-box">
          <p>$$t = 2010 - 2000 = 10 \text{ years}$$</p>
          <p>$$F_{2010} = 150 - 5(10) = 150 - 50$$</p>
          <p style="font-size: 1.3rem; color: var(--color-finance);"><strong>$$F_{2010} = 100 \text{ units}$$</strong></p>
        </div>
        <div class="alert-box alert-info" style="margin-top: 15px;">
          <div>
            <strong>Note:</strong> الميل سالب (\(b = -5\)) يعني المبيعات بتنقص كل سنة (Sales are decreasing annually).
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- ==================== SEASONALITY SECTION ==================== -->
  <div class="glassy-card" data-aos="fade-up">
    <h2>🗓️ التعامل مع الموسمية (Dealing with Seasonality)</h2>
    
    <div class="alert-box alert-info" data-aos="fade-right">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="12" cy="12" r="10"></circle>
        <line x1="12" y1="16" x2="12" y2="12"></line>
        <line x1="12" y1="8" x2="12.01" y2="8"></line>
      </svg>
      <div>
        <strong>Definition:</strong> Short term regular variations related to calendar or time of day.<br>
        <strong>التعريف:</strong> تغيرات منتظمة قصيرة الأجل مرتبطة بالتقويم أو وقت اليوم.
      </div>
    </div>

    <h3>Seasonal Relatives (النسب الموسمية):</h3>
    <p>Shows the percentage of sales during the season above or under the average<br>
       <span style="color: #64748b;">(توضح نسبة المبيعات خلال الموسم فوق أو تحت المتوسط)</span></p>

    <h4>Examples (أمثلة توضيحية):</h4>
    <ul>
      <li><strong>SR = 1.20</strong> → Sales are 20% above average (المبيعات أعلى بنسبة 20% من المتوسط)</li>
      <li><strong>SR = 0.40</strong> → Sales are 40% of average only (المبيعات 40% فقط من المتوسط)</li>
      <li><strong>SR = 1.00</strong> → Sales equal to average (المبيعات مساوية للمتوسط)</li>
    </ul>

    <h3>Uses (استخدامات النسب الموسمية):</h3>
    
    <h4>1. Deseasonalization (إزالة الموسمية):</h4>
    <p>To remove seasonality and detect trends clearly<br>
       <span style="color: #64748b;">(لإزالة تأثير الموسمية وإظهار الاتجاه بوضوح)</span></p>
    <div class="formula-box" data-aos="fade-left">
      <p>$$\text{Deseasonalized Sales} = \frac{\text{Period Sales}}{\text{Seasonal Relative}}$$</p>
    </div>

    <h4>2. Forecasting with Trend + Seasonality (التنبؤ بالاتجاه والموسمية معاً):</h4>
    <div class="formula-box" data-aos="fade-right">
      <p>$$\text{Final Forecast} = \text{Trend Forecast} \times \text{Seasonal Relative}$$</p>
    </div>
    <p style="text-align: center; color: #64748b;">
      التنبؤ النهائي = التنبؤ بالاتجاه × النسبة الموسمية
    </p>
  </div>

  <!-- ==================== EXAMPLE 14 ==================== -->
  <div class="glassy-card" data-aos="fade-up">
    <h2>📊 مثال 14: إزالة الموسمية والتنبؤ (Deseasonalization & Forecasting)</h2>
    <p>
      شركة مصرية كبيرة لتصنيع الكتان عندها بيانات مبيعات تحتوي على اتجاه وموسمية. معادلة الاتجاه:
    </p>

    <div class="formula-box" data-aos="fade-right">
      <p style="font-size: 1.3rem;">$$F_t = 124 + 7.5t$$</p>
    </div>

    <div class="table-container" data-aos="fade-left">
      <table class="concepts-table">
        <thead>
          <tr>
            <th>Period</th>
            <th>Quarter</th>
            <th>Sales</th>
            <th>Seasonal Relative</th>
          </tr>
        </thead>
        <tbody>
          <tr><td>1</td><td>Q1</td><td>132</td><td>1.20</td></tr>
          <tr><td>2</td><td>Q2</td><td>140</td><td>1.10</td></tr>
          <tr><td>3</td><td>Q3</td><td>146</td><td>0.75</td></tr>
          <tr><td>4</td><td>Q4</td><td>153</td><td>0.95</td></tr>
        </tbody>
      </table>
    </div>

    <h3>أ) Deseasonalization (إزالة الموسمية):</h3>
    <div class="formula-box">
      <p>$$\text{Deseasonalized} = \frac{\text{Actual Sales}}{\text{Seasonal Relative}}$$</p>
    </div>

    <div class="table-container" data-aos="zoom-in">
      <table class="concepts-table">
        <thead>
          <tr>
            <th>Quarter</th>
            <th>Sales</th>
            <th>SR</th>
            <th>Deseasonalized</th>
          </tr>
        </thead>
        <tbody>
          <tr><td>Q1</td><td>132</td><td>1.20</td><td>\(132 \div 1.20 = 110\)</td></tr>
          <tr><td>Q2</td><td>140</td><td>1.10</td><td>\(140 \div 1.10 = 127\)</td></tr>
          <tr><td>Q3</td><td>146</td><td>0.75</td><td>\(146 \div 0.75 = 195\)</td></tr>
          <tr><td>Q4</td><td>153</td><td>0.95</td><td>\(153 \div 0.95 = 161\)</td></tr>
        </tbody>
      </table>
    </div>

    <h3>ب) Forecast for Periods 7 & 8 (Trend Only):</h3>
    <div class="formula-box" data-aos="fade-right">
      <p>$$F_7 = 124 + 7.5(7) = 124 + 52.5 = 177 \text{ units}$$</p>
      <p>$$F_8 = 124 + 7.5(8) = 124 + 60 = 184 \text{ units}$$</p>
    </div>

    <h3>ج) Forecast with Trend + Seasonality:</h3>
    <p>Period 7 = Q3 (SR = 0.75), Period 8 = Q4 (SR = 0.95)</p>
    <div class="formula-box" data-aos="fade-left">
      <p>$$F_7 = 177 \times 0.75 = 133 \text{ units}$$</p>
      <p>$$F_8 = 184 \times 0.95 = 175 \text{ units}$$</p>
    </div>

    <div class="alert-box alert-info">
      <div>
        <strong>Note:</strong> لاحظ إن الفترة 7 (Q3) المبيعات فيها أقل من الاتجاه العام بسبب النسبة الموسمية المنخفضة (0.75)، 
        بينما الفترة 8 قريبة من الاتجاه لأن نسبتها (0.95) قريبة من الواحد.
      </div>
    </div>
  </div>
  <!-- ==================== EXAMPLE 15 ==================== -->
  <div class="glassy-card" data-aos="fade-up">
    <h2>🛁 مثال 15: أحواض الاستحمام (Bathtubs Forecast)</h2>
    <p>
      مدير متجر عايز يتنبأ بمبيعات يناير وفبراير ومارس من السنة الجاية. المبيعات خاضعة للاتجاه والموسمية. 
      معادلة الاتجاه (t = 0 for last June):
    </p>

    <div class="formula-box" data-aos="fade-right">
      <p style="font-size: 1.3rem;">$$F_t = 70 + 5t$$</p>
    </div>

    <div class="table-container">
      <table class="concepts-table">
        <thead>
          <tr>
            <th>Month<br>الشهر</th>
            <th>Seasonal Relative<br>النسبة الموسمية</th>
          </tr>
        </thead>
        <tbody>
          <tr><td>January<br>يناير</td><td>1.10</td></tr>
          <tr><td>February<br>فبراير</td><td>1.02</td></tr>
          <tr><td>March<br>مارس</td><td>0.95</td></tr>
        </tbody>
      </table>
    </div>

    <h3>أ) Trend Forecast Only:</h3>
    <p>January = 7 months, February = 8 months, March = 9 months from last June<br>
       <span style="color: #64748b;">(يناير = 7 أشهر، فبراير = 8 أشهر، مارس = 9 أشهر من يونيو الماضي)</span></p>
    <div class="formula-box" data-aos="fade-left">
      <p>$$F_{\text{Jan}} = 70 + 5(7) = 105 \text{ units}$$</p>
      <p>$$F_{\text{Feb}} = 70 + 5(8) = 110 \text{ units}$$</p>
      <p>$$F_{\text{Mar}} = 70 + 5(9) = 115 \text{ units}$$</p>
    </div>

    <h3>ب) Forecast with Trend + Seasonality:</h3>
    <div class="formula-box" data-aos="fade-right">
      <p>$$F_{\text{Jan}} = 105 \times 1.10 = 116 \text{ units}$$</p>
      <p>$$F_{\text{Feb}} = 110 \times 1.02 = 112 \text{ units}$$</p>
      <p>$$F_{\text{Mar}} = 115 \times 0.95 = 109 \text{ units}$$</p>
    </div>

    <div class="alert-box alert-success">
      <div>
        <strong>Observation:</strong> لاحظ إن يناير المبيعات فيه أعلى من الاتجاه العام بسبب الموسمية العالية (1.10)، 
        بينما مارس المبيعات أقل لأن موسمه ضعيف (0.95).
      </div>
    </div>
  </div>

  <!-- ==================== CALCULATING SEASONAL RELATIVES ==================== -->
  <div class="glassy-card" data-aos="fade-up">
    <h2>🧮 حساب النسب الموسمية (Calculating Seasonal Relatives)</h2>
    
    <h3>Formula (المعادلة):</h3>
    <div class="formula-box" data-aos="zoom-in">
      <p>$$\text{Seasonal Relative} = \frac{\text{Total Time Series for Period}}{\text{Average of All Periods}}$$</p>
    </div>
    <p style="text-align: center; color: #64748b; margin-top: 10px;">
      النسبة الموسمية = إجمالي السلسلة الزمنية للفترة ÷ متوسط جميع الفترات
    </p>
  </div>

  <!-- ==================== EXAMPLE 16 ==================== -->
  <div class="glassy-card" data-aos="fade-up">
    <h2>🏖️ مثال 16: وكالة سياحية تعمل في عطلات نهاية الأسبوع</h2>
    <p>
      وكالة سياحية مصرية كبيرة بتفتح في عطلة نهاية الأسبوع (الجمعة والسبت والأحد). المدير عايز يجدول الموظفين للعمل. 
      بيانات عدد الزوار خلال آخر 6 أسابيع:
    </p>

    <div class="table-container" data-aos="fade-right">
      <table class="concepts-table">
        <thead>
          <tr>
            <th>Day<br>اليوم</th>
            <th>Week 1</th>
            <th>Week 2</th>
            <th>Week 3</th>
            <th>Week 4</th>
            <th>Week 5</th>
            <th>Week 6</th>
          </tr>
        </thead>
        <tbody>
          <tr><td>الجمعة<br>Friday</td><td>149</td><td>154</td><td>152</td><td>150</td><td>159</td><td>163</td></tr>
          <tr><td>السبت<br>Saturday</td><td>250</td><td>255</td><td>260</td><td>268</td><td>273</td><td>276</td></tr>
          <tr><td>الأحد<br>Sunday</td><td>166</td><td>162</td><td>171</td><td>173</td><td>176</td><td>183</td></tr>
        </tbody>
      </table>
    </div>

    <h3>Solution (الحل):</h3>
    <h4>Step 1: Calculate total for each day (حساب الإجمالي لكل يوم):</h4>
    <ul>
      <li>Friday: $$149 + 154 + 152 + 150 + 159 + 163 = 927$$</li>
      <li>Saturday: $$250 + 255 + 260 + 268 + 273 + 276 = 1582$$</li>
      <li>Sunday: $$166 + 162 + 171 + 173 + 176 + 183 = 1031$$</li>
    </ul>

    <h4>Step 2: Calculate average (حساب المتوسط):</h4>
    <div class="formula-box">
      <p>$$\text{Average} = \frac{927 + 1582 + 1031}{3} = \frac{3540}{3} = 1180$$</p>
    </div>

    <h4>Step 3: Calculate seasonal relatives (حساب النسب الموسمية):</h4>
    <div class="formula-box" data-aos="fade-left">
      <p>Friday: $$SR = \frac{927}{1180} = 0.79$$</p>
      <p>Saturday: $$SR = \frac{1582}{1180} = 1.34$$</p>
      <p>Sunday: $$SR = \frac{1031}{1180} = 0.87$$</p>
    </div>

    <h3>Interpretation (التفسير):</h3>
    <ul>
      <li><strong>Friday (0.79)</strong>: الزوار أقل بنسبة 21% من المتوسط اليومي</li>
      <li><strong>Saturday (1.34)</strong>: الزوار أعلى بنسبة 34% من المتوسط اليومي (أكثر يوم ازدحاماً!)</li>
      <li><strong>Sunday (0.87)</strong>: الزوار أقل بنسبة 13% من المتوسط اليومي</li>
    </ul>

    <div class="alert-box alert-info">
      <div>
        <strong>Insight:</strong> يجب على المدير جدولة موظفين أكثر يوم السبت وأقل يوم الجمعة.
      </div>
    </div>
  </div>

  <!-- ==================== EXAMPLE 17 ==================== -->
  <div class="glassy-card" data-aos="fade-up">
    <h2>🍵 مثال 17: مبيعات شاي ليبتون الفصلية (Lipton Tea Quarterly Sales)</h2>
    <p>
      شاي ليبتون سجل المبيعات السنوية/الفصلية خلال آخر 4 سنوات. احسب النسب الموسمية:
    </p>

    <div class="table-container" data-aos="fade-right">
      <table class="concepts-table">
        <thead>
          <tr>
            <th>Quarter</th>
            <th>2018</th>
            <th>2019</th>
            <th>2020</th>
            <th>2021</th>
          </tr>
        </thead>
        <tbody>
          <tr><td>Q1</td><td>136</td><td>145</td><td>153</td><td>156</td></tr>
          <tr><td>Q2</td><td>140</td><td>175</td><td>177</td><td>188</td></tr>
          <tr><td>Q3</td><td>155</td><td>187</td><td>197</td><td>201</td></tr>
          <tr><td>Q4</td><td>167</td><td>210</td><td>250</td><td>273</td></tr>
        </tbody>
      </table>
    </div>

    <h3>Solution (الحل):</h3>
    <h4>Step 1: Total for each quarter:</h4>
    <ul>
      <li>Q1: $$136 + 145 + 153 + 156 = 590$$</li>
      <li>Q2: $$140 + 175 + 177 + 188 = 680$$</li>
      <li>Q3: $$155 + 187 + 197 + 201 = 740$$</li>
      <li>Q4: $$167 + 210 + 250 + 273 = 900$$</li>
    </ul>

    <h4>Step 2: Average:</h4>
    <div class="formula-box">
      <p>$$\text{Average} = \frac{590 + 680 + 740 + 900}{4} = \frac{2910}{4} = 727.5$$</p>
    </div>

    <h4>Step 3: Seasonal relatives:</h4>
    <div class="formula-box" data-aos="fade-left">
      <p>Q1: $$SR = \frac{590}{2910} = 0.20$$</p>
      <p>Q2: $$SR = \frac{680}{2910} = 0.23$$</p>
      <p>Q3: $$SR = \frac{740}{2910} = 0.25$$</p>
      <p>Q4: $$SR = \frac{900}{2910} = 0.31$$</p>
    </div>

    <h3>Interpretation:</h3>
    <ul>
      <li><strong>Q1 (0.20)</strong>: المبيعات 20% من متوسط الربع السنوي (أضعف فصل)</li>
      <li><strong>Q4 (0.31)</strong>: المبيعات 31% من متوسط الربع السنوي (أقوى فصل)</li>
    </ul>

    <div class="alert-box alert-success">
      <div>
        <strong>Note:</strong> Q4 دائماً الأقوى (موسم الشتاء مع ارتفاع استهلاك الشاي)، بينما Q1 الأضعف.
      </div>
    </div>
  </div>

  <!-- ==================== EXAMPLE 18 ==================== -->
  <div class="glassy-card" data-aos="fade-up">
    <h2>📦 مثال 18: تطبيق شامل على الاتجاه والموسمية</h2>
    <p>
      مبيعات منتج معين خاضعة للاتجاه والموسمية. معادلة الاتجاه (t = 0 for last January):
    </p>

    <div class="formula-box" data-aos="fade-right">
      <p style="font-size: 1.3rem;">$$F_t = 80 + 4t$$</p>
    </div>

    <div class="table-container">
      <table class="concepts-table">
        <thead>
          <tr>
            <th>Month</th>
            <th>Seasonal Relative</th>
          </tr>
        </thead>
        <tbody>
          <tr><td>October<br>أكتوبر</td><td>1.20</td></tr>
          <tr><td>November<br>نوفمبر</td><td>1.12</td></tr>
          <tr><td>December<br>ديسمبر</td><td>0.85</td></tr>
        </tbody>
      </table>
    </div>

    <h3>Required (المطلوب):</h3>
    <p>1. Forecast using trend only<br>
       2. Forecast using trend + seasonality</p>

    <h3>Solution:</h3>
    <h4>1. Trend Forecast Only:</h4>
    <p>October = 9, November = 10, December = 11</p>
    <div class="formula-box" data-aos="fade-left">
      <p>$$F_{\text{Oct}} = 80 + 4(9) = 116 \text{ units}$$</p>
      <p>$$F_{\text{Nov}} = 80 + 4(10) = 120 \text{ units}$$</p>
      <p>$$F_{\text{Dec}} = 80 + 4(11) = 124 \text{ units}$$</p>
    </div>

    <h4>2. Trend + Seasonality:</h4>
    <div class="formula-box" data-aos="fade-right">
      <p>$$F_{\text{Oct}} = 116 \times 1.20 = 139 \text{ units}$$</p>
      <p>$$F_{\text{Nov}} = 120 \times 1.12 = 134 \text{ units}$$</p>
      <p>$$F_{\text{Dec}} = 124 \times 0.85 = 105 \text{ units}$$</p>
    </div>

    <div class="alert-box alert-warning">
      <div>
        <strong>Note:</strong> رغم إن ديسمبر عنده أعلى اتجاه (124)، بسبب الموسمية المنخفضة (0.85)، 
        التنبؤ النهائي (105) أقل من أكتوبر ونوفمبر.
      </div>
    </div>
  </div>

  <!-- ==================== EXAMPLE 19 ==================== -->
  <div class="glassy-card" data-aos="fade-up">
    <h2>🌽 مثال 19: متقدم - شيتوس (Cheetos Advanced)</h2>
    <p>
      بيانات مبيعات شيتوس تحتوي على اتجاه وموسمية. معادلة الاتجاه:
    </p>

    <div class="formula-box" data-aos="fade-right">
      <p style="font-size: 1.3rem;">$$F_t = 1250 + 5t$$</p>
    </div>

    <div class="table-container" data-aos="fade-left">
      <table class="concepts-table">
        <thead>
          <tr>
            <th>Quarter</th>
            <th>Sales</th>
            <th>Seasonal Relative</th>
          </tr>
        </thead>
        <tbody>
          <tr><td>Q1</td><td>1000</td><td>0.75</td></tr>
          <tr><td>Q2</td><td>1500</td><td>0.85</td></tr>
          <tr><td>Q3</td><td>1400</td><td>1.70</td></tr>
          <tr><td>Q4</td><td>1700</td><td>1.90</td></tr>
        </tbody>
      </table>
    </div>

    <h3>Required:</h3>
    <p>1. Deseasonalize all quarters<br>
       2. Forecast periods 5 & 6 (trend only)<br>
       3. Forecast periods 5 & 6 (trend + seasonality)</p>

    <h3>Solution:</h3>
    <h4>1. Deseasonalization:</h4>
    <div class="table-container" data-aos="zoom-in">
      <table class="concepts-table">
        <thead>
          <tr>
            <th>Quarter</th>
            <th>Sales</th>
            <th>SR</th>
            <th>Deseasonalized</th>
          </tr>
        </thead>
        <tbody>
          <tr><td>Q1</td><td>1000</td><td>0.75</td><td>1333</td></tr>
          <tr><td>Q2</td><td>1500</td><td>0.85</td><td>1765</td></tr>
          <tr><td>Q3</td><td>1400</td><td>1.70</td><td>824</td></tr>
          <tr><td>Q4</td><td>1700</td><td>1.90</td><td>895</td></tr>
        </tbody>
      </table>
    </div>

    <h4>2. Trend Forecast Only:</h4>
    <div class="formula-box" data-aos="fade-right">
      <p>$$F_5 = 1250 + 5(5) = 1275 \text{ units}$$</p>
      <p>$$F_6 = 1250 + 5(6) = 1280 \text{ units}$$</p>
    </div>

    <h4>3. Trend + Seasonality:</h4>
    <p>Period 5 = Q1 (SR = 0.75), Period 6 = Q2 (SR = 0.85)</p>
    <div class="formula-box" data-aos="fade-left">
      <p>$$F_5 = 1275 \times 0.75 = 956 \text{ units}$$</p>
      <p>$$F_6 = 1280 \times 0.85 = 1088 \text{ units}$$</p>
    </div>

    <div class="alert-box alert-info">
      <div>
        <strong>Observation:</strong> المبيعات المحايدة موسمياً في Q3 & Q4 (824 & 895) أقل بكثير من المبيعات الفعلية 
        لأن الموسمية في هذه الفصول عالية جداً (1.70 & 1.90).
      </div>
    </div>
  </div>

  <!-- ==================== CONCEPTS TABLE ==================== -->
  <div class="glassy-card" data-aos="fade-up">
    <h2>📚 جدول المفاهيم الأساسية (Key Concepts Table)</h2>
    
    <div class="table-container" data-aos="fade-up">
      <table class="concepts-table">
        <thead>
          <tr>
            <th>المفهوم<br>Concept</th>
            <th>التعريف<br>Definition</th>
            <th>الخلاصة<br>Summary</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><strong>Forecasting<br>التنبؤ</strong></td>
            <td>Estimating future demand<br>تقدير الطلب المستقبلي</td>
            <td>Predicting future<br>تقدير المستقبل</td>
          </tr>
          <tr>
            <td><strong>Naïve Method<br>الطريقة الساذجة</strong></td>
            <td>Next = Previous<br>التالي = السابق</td>
            <td>Copy past<br>نسخ الماضي</td>
          </tr>
          <tr>
            <td><strong>Moving Average<br>المتوسط المتحرك</strong></td>
            <td>Average of recent values<br>متوسط القيم الأحدث</td>
            <td>Recent average<br>متوسط الأحدث</td>
          </tr>
          <tr>
            <td><strong>Weighted MA<br>المتوسط المرجح</strong></td>
            <td>Custom weights to values<br>أوزان مخصصة للقيم</td>
            <td>Custom weights<br>أوزان مخصصة</td>
          </tr>
          <tr>
            <td><strong>Exponential Smoothing<br>التمهيد الأسي</strong></td>
            <td>Add % of forecast error<br>إضافة نسبة من الخطأ</td>
            <td>Error correction<br>تصحيح الخطأ</td>
          </tr>
          <tr>
            <td><strong>Alpha (α)<br>ثابت التمهيد</strong></td>
            <td>Controls error response<br>يتحكم في استجابة الخطأ</td>
            <td>Response level<br>درجة الاستجابة</td>
          </tr>
          <tr>
            <td><strong>Trend<br>الاتجاه</strong></td>
            <td>Long term movement<br>حركة طويلة المدى</td>
            <td>Long direction<br>اتجاه طويل</td>
          </tr>
          <tr>
            <td><strong>Seasonality<br>الموسمية</strong></td>
            <td>Regular variations<br>تغيرات منتظمة</td>
            <td>Repeated pattern<br>نمط متكرر</td>
          </tr>
          <tr>
            <td><strong>Seasonal Relative<br>النسبة الموسمية</strong></td>
            <td>% above/under average<br>نسبة فوق/تحت المتوسط</td>
            <td>Season ratio<br>نسبة الموسم</td>
          </tr>
          <tr>
            <td><strong>Deseasonalization<br>إزالة الموسمية</strong></td>
            <td>Remove season effect<br>إزالة تأثير الموسم</td>
            <td>Neutralize season<br>تحييد الموسم</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- ==================== FORMULAS SUMMARY ==================== -->
  <div class="glassy-card" data-aos="fade-up">
    <h2>📐 ملخص المعادلات الأساسية (Key Formulas Summary)</h2>
    
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
      
      <div class="formula-box" data-aos="zoom-in" data-aos-delay="100">
        <h4 style="color: var(--color-primary); text-align: center;">Exponential Smoothing</h4>
        <p>$$F_t = F_{t-1} + \alpha [(A_{t-1}) - (F_{t-1})]$$</p>
      </div>

      <div class="formula-box" data-aos="zoom-in" data-aos-delay="200">
        <h4 style="color: var(--color-business); text-align: center;">Trend Equation</h4>
        <p>$$F_t = a + bt$$</p>
      </div>

      <div class="formula-box" data-aos="zoom-in" data-aos-delay="300">
        <h4 style="color: var(--color-finance); text-align: center;">Deseasonalization</h4>
        <p>$$DS = \frac{\text{Sales}}{SR}$$</p>
      </div>

      <div class="formula-box" data-aos="zoom-in" data-aos-delay="400">
        <h4 style="color: var(--color-economics); text-align: center;">Trend + Seasonality</h4>
        <p>$$F_{\text{final}} = F_{\text{trend}} \times SR$$</p>
      </div>

      <div class="formula-box" data-aos="zoom-in" data-aos-delay="500">
        <h4 style="color: var(--color-primary); text-align: center;">Moving Average</h4>
        <p>$$MA = \frac{\sum X_i}{n}$$</p>
      </div>

      <div class="formula-box" data-aos="zoom-in" data-aos-delay="600">
        <h4 style="color: var(--color-business); text-align: center;">Seasonal Relative</h4>
        <p>$$SR = \frac{\text{Period Total}}{\text{Average}}$$</p>
      </div>

    </div>
  </div>

  <!-- ==================== PRACTICE EXERCISE ==================== -->
  <div class="glassy-card" data-aos="fade-up">
    <h2>💪 تمرين شامل للمراجعة (Comprehensive Practice)</h2>
    <p>
      شركة مصرية لتصنيع العصائر عندها بيانات المبيعات الفصلية التالية لآخر سنتين:
    </p>

    <div class="table-container">
      <table class="concepts-table">
        <thead>
          <tr>
            <th>Quarter</th>
            <th>Year 1</th>
            <th>Year 2</th>
          </tr>
        </thead>
        <tbody>
          <tr><td>Q1</td><td>800</td><td>900</td></tr>
          <tr><td>Q2</td><td>1200</td><td>1300</td></tr>
          <tr><td>Q3</td><td>1500</td><td>1600</td></tr>
          <tr><td>Q4</td><td>1000</td><td>1100</td></tr>
        </tbody>
      </table>
    </div>

    <p>معادلة الاتجاه المقترحة: $$F_t = 1000 + 50t$$ (حيث t = 0 for Q1 of Year 1)</p>

    <h3>Required (المطلوب):</h3>
    <ol>
      <li>احسب النسب الموسمية للفصول الأربعة</li>
      <li>أوجد المبيعات المحايدة موسمياً</li>
      <li>تنبأ بـ Q1 & Q2 من Year 3 (periods 9 & 10) باستخدام الاتجاه فقط</li>
      <li>تنبأ بـ Q1 & Q2 من Year 3 مع الموسمية</li>
    </ol>

    <div class="alert-box alert-success" style="margin-top: 20px;">
      <div>
        <strong>Hint:</strong> اتبع نفس الخطوات في الأمثلة 16-19. حاول حله بنفسك أولاً، ثم تحقق من إجاباتك باستخدام المعادلات!
      </div>
    </div>
  </div>

  <!-- ==================== FOOTER ==================== -->
  <div class="footer-info" data-aos="fade-up">
    <div class="footer-brand">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M12 2L2 7l10 5 10-5-10-5z"></path>
        <polyline points="2 17 12 22 22 17"></polyline>
        <polyline points="2 12 12 17 22 12"></polyline>
      </svg>
      منصة أثر التعليمية | Athr Educational Platform
    </div>
    <div class="footer-divider"></div>
    <div class="footer-disclaimer">
      هذا المحتوى التعليمي مُصمم لمساعدة الطلاب في فهم مفاهيم التنبؤ والتمهيد الأسي بطريقة تفاعلية.<br>
      This educational content is designed to help students understand forecasting and exponential smoothing concepts interactively.<br>
      <strong style="color: var(--color-primary);">© 2025 Athr Platform - All Rights Reserved</strong>
    </div>
  </div>

</div>
<!-- ==================== END ARABIC CONTENT ==================== -->

 
  <!-- ==================== ENGLISH CONTENT (هنا هنحط الإنجليزي بعدين) ==================== -->
  <!-- ==================== ENGLISH CONTENT ==================== -->
<div class="en-content" style="display: none;">
  
  <!-- ==================== HEADER ==================== -->
  <div class="glassy-card" data-aos="fade-down">
    <h1>🎓 Exponential Smoothing & Forecasting Methods</h1>
    <p style="text-align: center; font-size: 1.1rem; color: #475569; margin-top: 15px;">
      An interactive educational journey to understand <mark class="highlight-green">Exponential Smoothing</mark> and <mark class="highlight-blue">Forecasting Methods</mark> in Business & Management
    </p>
    
    <div class="stats-grid" style="margin-top: 30px;">
      <div class="stat-card" data-aos="zoom-in" data-aos-delay="100">
        <div class="stat-value" style="color: var(--color-primary);">19</div>
        <div class="stat-label">Practical Examples</div>
      </div>
      <div class="stat-card" data-aos="zoom-in" data-aos-delay="200">
        <div class="stat-value" style="color: var(--color-business);">15+</div>
        <div class="stat-label">Mathematical Equations</div>
      </div>
      <div class="stat-card" data-aos="zoom-in" data-aos-delay="300">
        <div class="stat-value" style="color: var(--color-finance);">8</div>
        <div class="stat-label">Interactive Questions</div>
      </div>
      <div class="stat-card" data-aos="zoom-in" data-aos-delay="400">
        <div class="stat-value" style="color: var(--color-economics);">3</div>
        <div class="stat-label">Charts & Graphs</div>
      </div>
    </div>
  </div>

  <!-- ==================== INTRODUCTION ==================== -->
  <div class="glassy-card" data-aos="fade-up">
    <h2>📖 What is Exponential Smoothing?</h2>
    <p>
      After discussing <mark class="highlight-blue">Moving Average</mark> and <mark class="highlight-blue">Weighted Moving Average</mark>, 
      it's time to explore a more <strong>flexible and responsive</strong> technique called <mark class="highlight-green">Exponential Smoothing</mark>. 
      This technique is based on the idea of adding a percentage of the <mark class="highlight-orange">previous forecast error</mark> to the last forecast, 
      thereby continuously improving future predictions.
    </p>
    
    <div class="alert-box alert-info" data-aos="fade-right">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="12" cy="12" r="10"></circle>
        <line x1="12" y1="16" x2="12" y2="12"></line>
        <line x1="12" y1="8" x2="12.01" y2="8"></line>
      </svg>
      <div>
        <strong>Official Definition:</strong> An averaging technique that is developed by adding a percentage of the forecast error to the previous period forecast.
      </div>
    </div>

    <h3>The Basic Equation</h3>
    <div class="formula-box" data-aos="zoom-in">
      <p style="text-align: center; font-size: 1.3rem; margin: 0;">
        $$F_t = F_{t-1} + \alpha [(A_{t-1}) - (F_{t-1})]$$
      </p>
    </div>

    <h4>Variables Explanation:</h4>
    <ul>
      <li><strong>\(F_t\)</strong>: Current Period Forecast</li>
      <li><strong>\(F_{t-1}\)</strong>: Previous Period Forecast</li>
      <li><strong>\(\alpha [(A_{t-1}) - (F_{t-1})]\)</strong>: Percentage of Forecast Error</li>
      <li><strong>\(\alpha\)</strong>: Smoothing Constant</li>
      <li><strong>\(A_{t-1}\)</strong>: Previous Actual Value</li>
    </ul>
  </div>

  <!-- ==================== ALPHA CONSTANT ==================== -->
  <div class="glassy-card" data-aos="fade-up">
    <h2>🎚️ Understanding the Smoothing Constant (α)</h2>
    <p>
      This value controls the <mark class="highlight-orange">degree of model responsiveness to forecast error</mark>, and it plays a <strong>critical role</strong> in forecast quality.
    </p>

    <div class="alert-box alert-warning" data-aos="fade-left">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path>
        <line x1="12" y1="9" x2="12" y2="13"></line>
        <line x1="12" y1="17" x2="12.01" y2="17"></line>
      </svg>
      <div>
        <strong>Alpha Characteristics:</strong> α has a value between zero and one<br>
        $$0 \leq \alpha \leq 1$$
      </div>
    </div>

    <h3>Impact of Alpha Value</h3>
    <div class="table-container" data-aos="fade-up">
      <table class="concepts-table">
        <thead>
          <tr>
            <th>Alpha Value</th>
            <th>Error Response</th>
            <th>Smoothing Level</th>
            <th>When to Use</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><strong>Close to 0</strong><br>(e.g., 0.1, 0.2)</td>
            <td><span class="percentage">Low</span></td>
            <td><mark class="highlight-green">High</mark></td>
            <td>When data is stable</td>
          </tr>
          <tr>
            <td><strong>Close to 1</strong><br>(e.g., 0.8, 0.9)</td>
            <td><span class="percentage">High</span></td>
            <td><mark class="highlight-orange">Low</mark></td>
            <td>When data is volatile</td>
          </tr>
          <tr>
            <td><strong>Medium</strong><br>(e.g., 0.4, 0.5)</td>
            <td><span class="percentage">Balanced</span></td>
            <td><mark class="highlight-blue">Balanced</mark></td>
            <td>General balance</td>
          </tr>
        </tbody>
      </table>
    </div>

    <h3>Basic Rules:</h3>
    <div class="formula-box" data-aos="fade-right">
      <p style="text-align: center; font-size: 1.1rem; line-height: 2;">
        $$\text{Lower } \alpha \rightarrow \text{Lower Response + Higher Smoothing}$$
      </p>
    </div>

    <div class="formula-box" data-aos="fade-left">
      <p style="text-align: center; font-size: 1.1rem; line-height: 2;">
        $$\text{Higher } \alpha \rightarrow \text{Higher Response + Lower Smoothing}$$
      </p>
    </div>

    <div class="alert-box alert-success" data-aos="fade-right" style="margin-top: 20px;">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
        <polyline points="22 4 12 14.01 9 11.01"></polyline>
      </svg>
      <div>
        <strong>Practical Analogy:</strong><br>
        Think of driving a car:<br>
        • <mark class="highlight-green">Low α</mark> = Smooth braking (gentle response)<br>
        • <mark class="highlight-orange">High α</mark> = Hard braking (strong response)
      </div>
    </div>
  </div>

  <!-- ==================== EXAMPLE 7 ==================== -->
  <div class="glassy-card" data-aos="fade-up">
    <h2>📊 Practical Application: Example 7</h2>
    <p>
      Let's see how to apply this equation in practice. If we have a certain product, the demand forecast for the previous period was <span class="currency">65 units</span>, 
      but the actual demand turned out to be <span class="currency">76 units</span>. We want to forecast the demand for the next period using <mark class="highlight-blue">α = 0.4</mark> and <mark class="highlight-orange">α = 0.6</mark>.
    </p>

    <h3>Given Data</h3>
    <div class="alert-box alert-info">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M9 11l3 3L22 4"></path>
        <path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"></path>
      </svg>
      <div>
        <strong>\(F_{t-1}\)</strong> = 65 units<br>
        <strong>\(A_{t-1}\)</strong> = 76 units
      </div>
    </div>

    <h3>Solution</h3>
    <h4>When α = 0.4:</h4>
    <div class="formula-box" data-aos="fade-right">
      <p>$$F_t = F_{t-1} + \alpha [(A_{t-1}) - (F_{t-1})]$$</p>
      <p>$$F_t = 65 + 0.4 (76 - 65)$$</p>
      <p>$$F_t = 65 + 0.4 (11)$$</p>
      <p>$$F_t = 65 + 4.4$$</p>
      <p style="font-size: 1.4rem; color: var(--color-primary);"><strong>$$F_t = 69 \text{ units}$$</strong></p>
    </div>

    <h4>When α = 0.6:</h4>
    <div class="formula-box" data-aos="fade-left">
      <p>$$F_t = 65 + 0.6 (76 - 65)$$</p>
      <p>$$F_t = 65 + 0.6 (11)$$</p>
      <p>$$F_t = 65 + 6.6$$</p>
      <p style="font-size: 1.4rem; color: var(--color-finance);"><strong>$$F_t = 72 \text{ units}$$</strong></p>
    </div>

    <div class="alert-box alert-success" style="margin-top: 20px;">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M12 2L2 7l10 5 10-5-10-5z"></path>
        <polyline points="2 17 12 22 22 17"></polyline>
        <polyline points="2 12 12 17 22 12"></polyline>
      </svg>
      <div>
        <strong>Observation:</strong> When we increased α from 0.4 to 0.6, the new forecast increased from <mark class="highlight-green">69 units</mark> to <mark class="highlight-orange">72 units</mark>, 
        meaning the model responded more strongly to the difference between actual demand and previous forecast.
      </div>
    </div>

    <div class="chart-container" data-aos="zoom-in" style="margin-top: 30px;">
      <canvas id="example7ChartEn"></canvas>
    </div>
  </div>

  <!-- ==================== INTERACTIVE CALCULATOR ==================== -->
  <div class="glassy-card" data-aos="fade-up">
    <h2>🧮 Interactive Exponential Smoothing Calculator</h2>
    <p>Try it yourself! Enter the values and see the new forecast</p>

    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin: 25px 0;">
      <div>
        <label style="display: block; font-weight: 600; margin-bottom: 8px; color: var(--color-primary);">
          Previous Forecast (\(F_{t-1}\)):
        </label>
        <input type="number" id="prevForecastEn" value="65" 
               style="width: 100%; padding: 12px; border: 2px solid var(--glass-border); border-radius: 12px; 
                      font-size: 1rem; background: rgba(255,255,255,0.5);">
      </div>

      <div>
        <label style="display: block; font-weight: 600; margin-bottom: 8px; color: var(--color-finance);">
          Actual Demand (\(A_{t-1}\)):
        </label>
        <input type="number" id="actualDemandEn" value="76" 
               style="width: 100%; padding: 12px; border: 2px solid var(--glass-border); border-radius: 12px; 
                      font-size: 1rem; background: rgba(255,255,255,0.5);">
      </div>

      <div>
        <label style="display: block; font-weight: 600; margin-bottom: 8px; color: var(--color-business);">
          Smoothing Constant (α):
        </label>
        <input type="number" id="alphaValueEn" value="0.4" step="0.1" min="0" max="1" 
               style="width: 100%; padding: 12px; border: 2px solid var(--glass-border); border-radius: 12px; 
                      font-size: 1rem; background: rgba(255,255,255,0.5);">
      </div>
    </div>

    <button onclick="calculateExponentialSmoothing()" 
            style="background: linear-gradient(135deg, var(--color-primary), var(--color-primary-medium)); 
                   color: white; border: none; padding: 15px 40px; border-radius: 50px; 
                   font-size: 1.1rem; font-weight: 700; cursor: pointer; 
                   box-shadow: 0 8px 20px rgba(22,163,74,0.3); transition: all 0.3s ease;
                   width: 100%; max-width: 300px; display: block; margin: 0 auto;">
      <i class="fas fa-calculator"></i> Calculate Forecast
    </button>

    <div id="calculatorResultEn" style="display: none; margin-top: 30px;" data-aos="fade-up">
      <div class="alert-box alert-success">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polyline points="20 6 9 17 4 12"></polyline>
        </svg>
        <div>
          <h3 style="margin: 0 0 10px 0; color: var(--color-primary);">Result</h3>
          <p style="font-size: 1.3rem; font-weight: 700; margin: 10px 0;">
            New Forecast = <span id="resultValueEn" style="color: var(--color-finance);">--</span>
          </p>
          <div id="resultStepsEn" style="line-height: 2; margin-top: 15px; padding: 15px; 
                                      background: rgba(255,255,255,0.3); border-radius: 12px;"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- ==================== MCQ QUESTION 1 ==================== -->
  <div class="question-container" onclick="toggleQuestion(this)" data-aos="fade-up">
    <div class="question-header">
      <svg class="question-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="12" cy="12" r="10"></circle>
        <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
        <line x1="12" y1="17" x2="12.01" y2="17"></line>
      </svg>
      Exam Question: Choose the Correct Answer
      <svg class="arrow-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <polyline points="6 9 12 15 18 9"></polyline>
      </svg>
    </div>
    
    <div class="question-content">
      <p style="font-weight: 600; font-size: 1.05rem; margin-bottom: 15px;">
        If previous forecast = <strong>50 units</strong>, actual demand = <strong>70 units</strong>, and <strong>α = 0.5</strong>, 
        then the new forecast is:
      </p>
      
      <ul class="mcq-options">
        <li class="mcq-option" data-answer="wrong">A) 55 units</li>
        <li class="mcq-option" data-answer="correct">B) 60 units ✓</li>
        <li class="mcq-option" data-answer="wrong">C) 65 units</li>
        <li class="mcq-option" data-answer="wrong">D) 70 units</li>
      </ul>

      <div class="solution-content" style="display: none; margin-top: 20px;">
        <h4 style="color: var(--color-primary);">💡 Detailed Solution:</h4>
        <div class="formula-box">
          <p>$$F_t = F_{t-1} + \alpha [(A_{t-1}) - (F_{t-1})]$$</p>
          <p>$$F_t = 50 + 0.5(70 - 50)$$</p>
          <p>$$F_t = 50 + 0.5(20)$$</p>
          <p>$$F_t = 50 + 10$$</p>
          <p style="font-size: 1.3rem; color: var(--color-finance);"><strong>$$F_t = 60 \text{ units}$$</strong></p>
        </div>
      </div>
    </div>
  </div>
  <!-- ==================== EXAMPLE 8 ==================== -->
  <div class="glassy-card" data-aos="fade-up">
    <h2>🏭 Example 8: Equipment Utilization Rate</h2>
    <p>
      A factory uses exponential smoothing to forecast its main equipment utilization rate for <mark class="highlight-blue">March</mark>. 
      If the forecast for February was <strong>68%</strong> capacity, but actual usage was <strong>89%</strong> capacity, 
      and the smoothing constant is <mark class="highlight-green">α = 0.1</mark>.
    </p>

    <h3>Given Data & Solution</h3>
    <div class="table-container">
      <table class="concepts-table">
        <thead>
          <tr>
            <th>Variable</th>
            <th>Value</th>
            <th>Description</th>
          </tr>
        </thead>
        <tbody>
          <tr><td>\(F_{t-1}\)</td><td><strong>68%</strong></td><td>Previous forecast (February)</td></tr>
          <tr><td>\(A_{t-1}\)</td><td><strong>89%</strong></td><td>Actual usage (February)</td></tr>
          <tr><td>\(\alpha\)</td><td><strong>0.1</strong></td><td>Smoothing constant</td></tr>
        </tbody>
      </table>
    </div>

    <h3>Application:</h3>
    <div class="formula-box" data-aos="zoom-in">
      <p>$$F_t = 68\% + 0.1 (89\% - 68\%)$$</p>
      <p>$$F_t = 68\% + 0.1 (21\%)$$</p>
      <p>$$F_t = 68\% + 2.1\%$$</p>
      <p style="font-size: 1.4rem; color: var(--color-primary);"><strong>$$F_t = 70\%$$</strong></p>
    </div>

    <div class="alert-box alert-warning" style="margin-top: 20px;">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="12" cy="12" r="10"></circle>
        <line x1="12" y1="8" x2="12" y2="12"></line>
        <line x1="12" y1="16" x2="12.01" y2="16"></line>
      </svg>
      <div>
        <strong>Note:</strong> Although the actual difference was <span class="percentage">21%</span>, the model only added <span class="percentage">2.1%</span> 
        (i.e., 10% of the difference) because <mark class="highlight-green">α is small</mark>, meaning the factory wants <strong>stability</strong> in forecasts 
        and doesn't want to be significantly affected by sudden fluctuations.
      </div>
    </div>
  </div>

  <!-- ==================== EXAMPLE 9 ==================== -->
  <div class="glassy-card" data-aos="fade-up">
    <h2>🔍 Example 9: Finding Previous Actual Demand</h2>
    <p>
      If the question states that the forecast for the next period is <span class="currency">97 units</span>, the previous forecast was <span class="currency">80 units</span>, 
      and <mark class="highlight-orange">α = 0.7</mark>, we want to find the <strong>previous actual demand</strong>.
    </p>

    <h3>Given Data:</h3>
    <ul>
      <li><strong>\(F_t\)</strong> = 97 units</li>
      <li><strong>\(F_{t-1}\)</strong> = 80 units</li>
      <li><strong>\(\alpha\)</strong> = 0.7</li>
      <li><strong>\(A_{t-1}\)</strong> = ? (Required)</li>
    </ul>

    <h3>Solution:</h3>
    <p>Substitute into the equation and solve for \(A_{t-1}\):</p>
    <div class="formula-box" data-aos="fade-right">
      <p>$$F_t = F_{t-1} + \alpha (A_{t-1} - F_{t-1})$$</p>
      <p>$$97 = 80 + 0.7 (A_{t-1} - 80)$$</p>
      <p>$$97 - 80 = 0.7 A_{t-1} - 56$$</p>
      <p>$$17 = 0.7 A_{t-1} - 56$$</p>
      <p>$$17 + 56 = 0.7 A_{t-1}$$</p>
      <p>$$73 = 0.7 A_{t-1}$$</p>
      <p>$$A_{t-1} = \frac{73}{0.7}$$</p>
      <p style="font-size: 1.4rem; color: var(--color-finance);"><strong>$$A_{t-1} = 104 \text{ units}$$</strong></p>
    </div>

    <div class="alert-box alert-success">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
        <polyline points="22 4 12 14.01 9 11.01"></polyline>
      </svg>
      <div>
        <strong>Result:</strong> The previous actual demand was <mark class="highlight-finance">104 units</mark>.
      </div>
    </div>
  </div>

  <!-- ==================== MCQ QUESTION 2 ==================== -->
  <div class="question-container" onclick="toggleQuestion(this)" data-aos="fade-up">
    <div class="question-header">
      <svg class="question-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="12" cy="12" r="10"></circle>
        <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
        <line x1="12" y1="17" x2="12.01" y2="17"></line>
      </svg>
      Exam Question: Finding Actual Demand
      <svg class="arrow-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <polyline points="6 9 12 15 18 9"></polyline>
      </svg>
    </div>
    
    <div class="question-content">
      <p style="font-weight: 600; font-size: 1.05rem; margin-bottom: 15px;">
        If \(F_t = 120\), \(F_{t-1} = 100\), and \(\alpha = 0.5\), then \(A_{t-1}\) equals:
      </p>
      
      <ul class="mcq-options">
        <li class="mcq-option" data-answer="wrong">A) 110</li>
        <li class="mcq-option" data-answer="wrong">B) 130</li>
        <li class="mcq-option" data-answer="correct">C) 140 ✓</li>
        <li class="mcq-option" data-answer="wrong">D) 150</li>
      </ul>

      <div class="solution-content" style="display: none; margin-top: 20px;">
        <h4 style="color: var(--color-primary);">💡 Detailed Solution:</h4>
        <div class="formula-box">
          <p>$$120 = 100 + 0.5(A_{t-1} - 100)$$</p>
          <p>$$20 = 0.5 A_{t-1} - 50$$</p>
          <p>$$70 = 0.5 A_{t-1}$$</p>
          <p style="font-size: 1.3rem; color: var(--color-finance);"><strong>$$A_{t-1} = 140 \text{ units}$$</strong></p>
        </div>
      </div>
    </div>
  </div>

  <!-- ==================== EXAMPLE 10 ==================== -->
  <div class="glassy-card" data-aos="fade-up">
    <h2>🎯 Example 10: Finding Alpha Value</h2>
    <p>
      If the current forecast is <span class="currency">100 units</span>, the previous forecast was <span class="currency">95 units</span>, 
      and the previous actual demand was <span class="currency">115 units</span>, we want to calculate the value of <strong>α</strong>.
    </p>

    <h3>Given Data:</h3>
    <div class="table-container">
      <table class="concepts-table">
        <thead>
          <tr><th>Variable</th><th>Value</th></tr>
        </thead>
        <tbody>
          <tr><td>\(F_t\)</td><td><strong>100 units</strong></td></tr>
          <tr><td>\(F_{t-1}\)</td><td><strong>95 units</strong></td></tr>
          <tr><td>\(A_{t-1}\)</td><td><strong>115 units</strong></td></tr>
          <tr><td>\(\alpha\)</td><td><strong>?</strong> (Required)</td></tr>
        </tbody>
      </table>
    </div>

    <h3>Solution:</h3>
    <p>Substitute into the equation and solve for α:</p>
    <div class="formula-box" data-aos="zoom-in">
      <p>$$F_t = F_{t-1} + \alpha (A_{t-1} - F_{t-1})$$</p>
      <p>$$100 = 95 + \alpha (115 - 95)$$</p>
      <p>$$100 - 95 = 20\alpha$$</p>
      <p>$$5 = 20\alpha$$</p>
      <p>$$\alpha = \frac{5}{20}$$</p>
      <p style="font-size: 1.4rem; color: var(--color-business);"><strong>$$\alpha = 0.25$$</strong></p>
    </div>

    <div class="alert-box alert-info">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M12 2L2 7l10 5 10-5-10-5z"></path>
        <polyline points="2 17 12 22 22 17"></polyline>
        <polyline points="2 12 12 17 22 12"></polyline>
      </svg>
      <div>
        <strong>Result:</strong> The smoothing constant used was <mark class="highlight-business">α = 0.25</mark>, 
        which is a relatively low value indicating the model tends toward stability and high smoothing.
      </div>
    </div>
  </div>

  <!-- ==================== EXAMPLE 11 ==================== -->
  <div class="glassy-card" data-aos="fade-up">
    <h2>📈 Example 11: Comprehensive Methods Comparison</h2>
    <p>
      Now let's see a comprehensive example comparing <strong>all forecasting techniques</strong> we've learned. 
      A McDonald's customer service center in Egypt has data on complaints over the last 5 years:
    </p>

    <div class="table-container" data-aos="fade-right">
      <table class="concepts-table">
        <thead>
          <tr><th>Period</th><th>Actual Complaints</th></tr>
        </thead>
        <tbody>
          <tr><td>T-5</td><td><strong>120</strong></td></tr>
          <tr><td>T-4</td><td><strong>130</strong></td></tr>
          <tr><td>T-3</td><td><strong>110</strong></td></tr>
          <tr><td>T-2</td><td><strong>116</strong></td></tr>
          <tr><td>T-1</td><td><strong>128</strong></td></tr>
        </tbody>
      </table>
    </div>

    <h3>Required: Forecast for period T using:</h3>

    <h4>A) Naïve Approach:</h4>
    <div class="formula-box" data-aos="fade-left">
      <p>$$\text{Forecast}_T = \text{Actual}_{T-1} = 128 \text{ complaints}$$</p>
    </div>

    <h4>B) Moving Average (3 periods):</h4>
    <div class="formula-box" data-aos="fade-right">
      <p>$$MA = \frac{110 + 116 + 128}{3} = \frac{354}{3}$$</p>
      <p style="font-size: 1.3rem; color: var(--color-business);"><strong>$$MA = 118 \text{ complaints}$$</strong></p>
    </div>

    <h4>C) Weighted Moving Average:</h4>
    <p>Weights: 50% (most recent), 30% (middle), 20% (oldest)</p>
    <div class="formula-box" data-aos="fade-left">
      <p>$$WMA = (128 \times 0.5) + (116 \times 0.3) + (110 \times 0.2)$$</p>
      <p>$$WMA = 64 + 34.8 + 22$$</p>
      <p style="font-size: 1.3rem; color: var(--color-finance);"><strong>$$WMA = 121 \text{ complaints}$$</strong></p>
    </div>

    <h4>D) Exponential Smoothing (α = 0.4):</h4>
    <p>Sequential calculations needed:</p>
    <div class="table-container" data-aos="zoom-in">
      <table class="concepts-table">
        <thead>
          <tr><th>Period</th><th>Actual</th><th>Forecast</th><th>Calculation</th></tr>
        </thead>
        <tbody>
          <tr><td>T-5</td><td>120</td><td>-</td><td>No previous forecast</td></tr>
          <tr><td>T-4</td><td>130</td><td>120</td><td>Initial value</td></tr>
          <tr><td>T-3</td><td>110</td><td>124</td><td>\(120 + 0.4(130-120) = 124\)</td></tr>
          <tr><td>T-2</td><td>116</td><td>118</td><td>\(124 + 0.4(110-124) = 118\)</td></tr>
          <tr><td>T-1</td><td>128</td><td>117</td><td>\(118 + 0.4(116-118) = 117\)</td></tr>
          <tr style="background: rgba(22,163,74,0.15);">
            <td><strong>T</strong></td><td><strong>-</strong></td><td><strong>121</strong></td>
            <td><strong>\(117 + 0.4(128-117) = 121\)</strong></td>
          </tr>
        </tbody>
      </table>
    </div>

    <h3>Results Comparison:</h3>
    <div class="table-container" data-aos="fade-up">
      <table class="concepts-table financial-table">
        <thead>
          <tr><th>Method</th><th>Forecast</th><th>Notes</th></tr>
        </thead>
        <tbody>
          <tr><td>Naïve</td><td><strong>128</strong></td><td>Highest - most recent value only</td></tr>
          <tr><td>Moving Average (3)</td><td><strong>118</strong></td><td>Lowest - equal weights</td></tr>
          <tr><td>Weighted MA</td><td><strong>121</strong></td><td>Medium - custom weights</td></tr>
          <tr><td>Exp. Smoothing (α=0.4)</td><td><strong>121</strong></td><td>Medium - adaptive</td></tr>
        </tbody>
      </table>
    </div>

    <div class="alert-box alert-success">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M12 2L2 7l10 5 10-5-10-5z"></path>
        <polyline points="2 17 12 22 22 17"></polyline>
        <polyline points="2 12 12 17 22 12"></polyline>
      </svg>
      <div>
        <strong>Observation:</strong> Weighted MA and Exponential Smoothing gave the same result (121), 
        but <mark class="highlight-green">Exponential Smoothing is more flexible</mark> as it continuously adapts to errors.
      </div>
    </div>
  </div>

  <!-- ==================== EXAMPLE 12 ==================== -->
  <div class="glassy-card" data-aos="fade-up">
    <h2>🍚 Example 12: Comprehensive Application on Asala Rice Sales</h2>
    <p>
      We have sales data for <mark class="highlight-business">Asala Rice</mark> for the last 5 years, 
      and we want to forecast sales for <strong>2021</strong> using all methods:
    </p>

    <div class="table-container" data-aos="fade-right">
      <table class="concepts-table">
        <thead>
          <tr><th>Year</th><th>Sales (units)</th></tr>
        </thead>
        <tbody>
          <tr><td>2016</td><td><strong>950</strong></td></tr>
          <tr><td>2017</td><td><strong>1100</strong></td></tr>
          <tr><td>2018</td><td><strong>1270</strong></td></tr>
          <tr><td>2019</td><td><strong>1300</strong></td></tr>
          <tr><td>2020</td><td><strong>1325</strong></td></tr>
        </tbody>
      </table>
    </div>

    <h3>Solutions:</h3>

    <h4>A) Naïve Forecast:</h4>
    <div class="formula-box">
      <p>$$F_{2021} = \text{Sales}_{2020} = 1325 \text{ units}$$</p>
    </div>

    <h4>B) Moving Average (4 periods):</h4>
    <div class="formula-box">
      <p>$$MA = \frac{1100 + 1270 + 1300 + 1325}{4} = \frac{4995}{4}$$</p>
      <p style="font-size: 1.4rem; color: var(--color-business);"><strong>$$MA = 1249 \text{ units}$$</strong></p>
    </div>

    <h4>C) Weighted Moving Average (4 periods):</h4>
    <p>Weights: 10%, 20%, 30%, 40% (oldest to most recent)</p>
    <div class="formula-box">
      <p>$$WMA = (1100 \times 0.1) + (1270 \times 0.2) + (1300 \times 0.3) + (1325 \times 0.4)$$</p>
      <p>$$WMA = 110 + 254 + 390 + 530$$</p>
      <p style="font-size: 1.4rem; color: var(--color-finance);"><strong>$$WMA = 1284 \text{ units}$$</strong></p>
    </div>

    <h4>D) Exponential Smoothing (α = 0.65):</h4>
    <div class="table-container" data-aos="zoom-in">
      <table class="concepts-table">
        <thead>
          <tr><th>Year</th><th>Actual Sales</th><th>Forecast</th><th>Calculation</th></tr>
        </thead>
        <tbody>
          <tr><td>2016</td><td>950</td><td>-</td><td>Initial</td></tr>
          <tr><td>2017</td><td>1100</td><td>950</td><td>Initial value</td></tr>
          <tr><td>2018</td><td>1270</td><td>1048</td><td>\(950 + 0.65(1100-950) = 1048\)</td></tr>
          <tr><td>2019</td><td>1300</td><td>1192</td><td>\(1048 + 0.65(1270-1048) = 1192\)</td></tr>
          <tr><td>2020</td><td>1325</td><td>1262</td><td>\(1192 + 0.65(1300-1192) = 1262\)</td></tr>
          <tr style="background: rgba(22,163,74,0.15);">
            <td><strong>2021</strong></td><td><strong>-</strong></td><td><strong>1303</strong></td>
            <td><strong>\(1262 + 0.65(1325-1262) = 1303\)</strong></td>
          </tr>
        </tbody>
      </table>
    </div>

    <div class="alert-box alert-warning">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path>
        <line x1="12" y1="9" x2="12" y2="13"></line>
        <line x1="12" y1="17" x2="12.01" y2="17"></line>
      </svg>
      <div>
        <strong>Note:</strong> α = 0.65 is relatively high, which made the model respond strongly to continuous increases in sales, 
        reflected in the final forecast <mark class="highlight-finance">(1303)</mark> being higher than other methods.
      </div>
    </div>
  </div>

  <!-- ==================== TRENDS SECTION ==================== -->
  <div class="glassy-card" data-aos="fade-up">
    <h2>📊 Dealing with Trends</h2>
    <p>
      After understanding basic smoothing techniques, let's now deal with <mark class="highlight-blue">long-term trends</mark>.
    </p>

    <div class="alert-box alert-info" data-aos="fade-right">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="12" cy="12" r="10"></circle>
        <line x1="12" y1="16" x2="12" y2="12"></line>
        <line x1="12" y1="8" x2="12.01" y2="8"></line>
      </svg>
      <div>
        <strong>Definition:</strong> A long term upward or downward movement in the data.
      </div>
    </div>

    <h3>Linear Trend Equation:</h3>
    <p>When there is a clear trend in the data, we use:</p>
    <div class="formula-box" data-aos="zoom-in">
      <p style="font-size: 1.4rem;">$$F_t = a + bt$$</p>
    </div>

    <h4>Variables:</h4>
    <ul>
      <li><strong>\(F_t\)</strong>: Forecast for period t</li>
      <li><strong>\(a\)</strong>: Intercept - forecast value when t = 0 (base year)</li>
      <li><strong>\(b\)</strong>: Slope - change per time period</li>
      <li><strong>\(t\)</strong>: Time period number</li>
    </ul>
  </div>
  <!-- ==================== EXAMPLE 13 ==================== -->
  <div class="glassy-card" data-aos="fade-up">
    <h2>💄 Example 13: EVA Cream Sales Forecast</h2>
    <p>
      A major Egyptian cosmetics company developed the following equation to forecast demand for <mark class="highlight-pink">EVA Cream</mark> 
      (Base year: 1990):
    </p>

    <div class="formula-box" data-aos="fade-right">
      <p style="font-size: 1.3rem;">$$F_t = 80 + 20t$$</p>
    </div>

    <h3>A) Explain the Equation:</h3>
    <ul>
      <li><strong>80</strong>: Expected demand in base year 1990</li>
      <li><strong>20</strong>: Annual increase</li>
      <li><strong>t</strong>: Number of years from 1990</li>
    </ul>

    <h3>B) Are annual sales increasing or decreasing?</h3>
    <div class="alert-box alert-success">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <polyline points="23 6 13.5 15.5 8.5 10.5 1 18"></polyline>
        <polyline points="17 6 23 6 23 12"></polyline>
      </svg>
      <div>
        <strong>Sales are INCREASING</strong><br>
        Because the slope is positive: \(b = +20 > 0\)
      </div>
    </div>

    <h3>C) Forecast for year 2020:</h3>
    <p>Calculate t for 2020:</p>
    <div class="formula-box" data-aos="fade-left">
      <p>$$t = 2020 - 1990 = 30 \text{ years}$$</p>
      <p>$$F_{2020} = 80 + 20(30) = 80 + 600$$</p>
      <p style="font-size: 1.4rem; color: var(--color-finance);"><strong>$$F_{2020} = 680 \text{ units}$$</strong></p>
    </div>
  </div>

  <!-- ==================== MCQ QUESTION 3 ==================== -->
  <div class="question-container" onclick="toggleQuestion(this)" data-aos="fade-up">
    <div class="question-header">
      <svg class="question-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="12" cy="12" r="10"></circle>
        <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
        <line x1="12" y1="17" x2="12.01" y2="17"></line>
      </svg>
      Exam Question: Trend Equation
      <svg class="arrow-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <polyline points="6 9 12 15 18 9"></polyline>
      </svg>
    </div>
    
    <div class="question-content">
      <p style="font-weight: 600; font-size: 1.05rem; margin-bottom: 15px;">
        If the trend equation is \(F_t = 150 - 5t\) (base year 2000), then the forecast for year 2010 is:
      </p>
      
      <ul class="mcq-options">
        <li class="mcq-option" data-answer="correct">A) 100 ✓</li>
        <li class="mcq-option" data-answer="wrong">B) 150</li>
        <li class="mcq-option" data-answer="wrong">C) 200</li>
        <li class="mcq-option" data-answer="wrong">D) 250</li>
      </ul>

      <div class="solution-content" style="display: none; margin-top: 20px;">
        <h4 style="color: var(--color-primary);">💡 Detailed Solution:</h4>
        <div class="formula-box">
          <p>$$t = 2010 - 2000 = 10 \text{ years}$$</p>
          <p>$$F_{2010} = 150 - 5(10) = 150 - 50$$</p>
          <p style="font-size: 1.3rem; color: var(--color-finance);"><strong>$$F_{2010} = 100 \text{ units}$$</strong></p>
        </div>
        <div class="alert-box alert-info" style="margin-top: 15px;">
          <div>
            <strong>Note:</strong> The negative slope (\(b = -5\)) means sales are decreasing annually.
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- ==================== SEASONALITY SECTION ==================== -->
  <div class="glassy-card" data-aos="fade-up">
    <h2>🗓️ Dealing with Seasonality</h2>
    
    <div class="alert-box alert-info" data-aos="fade-right">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="12" cy="12" r="10"></circle>
        <line x1="12" y1="16" x2="12" y2="12"></line>
        <line x1="12" y1="8" x2="12.01" y2="8"></line>
      </svg>
      <div>
        <strong>Definition:</strong> Short term regular variations related to calendar or time of day.
      </div>
    </div>

    <h3>Seasonal Relatives:</h3>
    <p>Shows the percentage of sales during the season above or under the average.</p>

    <h4>Examples:</h4>
    <ul>
      <li><strong>SR = 1.20</strong> → Sales are 20% above average</li>
      <li><strong>SR = 0.40</strong> → Sales are 40% of average only</li>
      <li><strong>SR = 1.00</strong> → Sales equal to average</li>
    </ul>

    <h3>Uses of Seasonal Relatives:</h3>
    
    <h4>1. Deseasonalization:</h4>
    <p>To remove seasonality and detect trends clearly</p>
    <div class="formula-box" data-aos="fade-left">
      <p>$$\text{Deseasonalized Sales} = \frac{\text{Period Sales}}{\text{Seasonal Relative}}$$</p>
    </div>

    <h4>2. Forecasting with Trend + Seasonality:</h4>
    <div class="formula-box" data-aos="fade-right">
      <p>$$\text{Final Forecast} = \text{Trend Forecast} \times \text{Seasonal Relative}$$</p>
    </div>
  </div>

  <!-- ==================== EXAMPLE 14 ==================== -->
  <div class="glassy-card" data-aos="fade-up">
    <h2>📊 Example 14: Deseasonalization & Forecasting</h2>
    <p>
      A major Egyptian linen company has sales data containing trend and seasonality. Trend equation:
    </p>

    <div class="formula-box" data-aos="fade-right">
      <p style="font-size: 1.3rem;">$$F_t = 124 + 7.5t$$</p>
    </div>

    <div class="table-container" data-aos="fade-left">
      <table class="concepts-table">
        <thead>
          <tr><th>Period</th><th>Quarter</th><th>Sales</th><th>Seasonal Relative</th></tr>
        </thead>
        <tbody>
          <tr><td>1</td><td>Q1</td><td>132</td><td>1.20</td></tr>
          <tr><td>2</td><td>Q2</td><td>140</td><td>1.10</td></tr>
          <tr><td>3</td><td>Q3</td><td>146</td><td>0.75</td></tr>
          <tr><td>4</td><td>Q4</td><td>153</td><td>0.95</td></tr>
        </tbody>
      </table>
    </div>

    <h3>A) Deseasonalization:</h3>
    <div class="table-container" data-aos="zoom-in">
      <table class="concepts-table">
        <thead>
          <tr><th>Quarter</th><th>Sales</th><th>SR</th><th>Deseasonalized</th></tr>
        </thead>
        <tbody>
          <tr><td>Q1</td><td>132</td><td>1.20</td><td>110</td></tr>
          <tr><td>Q2</td><td>140</td><td>1.10</td><td>127</td></tr>
          <tr><td>Q3</td><td>146</td><td>0.75</td><td>195</td></tr>
          <tr><td>Q4</td><td>153</td><td>0.95</td><td>161</td></tr>
        </tbody>
      </table>
    </div>

    <h3>B) Forecast for Periods 7 & 8 (Trend + Seasonality):</h3>
    <div class="formula-box">
      <p>Period 7 = Q3 (SR = 0.75): $$F_7 = (124 + 7.5 \times 7) \times 0.75 = 177 \times 0.75 = 133$$</p>
      <p>Period 8 = Q4 (SR = 0.95): $$F_8 = (124 + 7.5 \times 8) \times 0.95 = 184 \times 0.95 = 175$$</p>
    </div>
  </div>

  <!-- ==================== EXAMPLE 15 ==================== -->
  <div class="glassy-card" data-aos="fade-up">
    <h2>🛁 Example 15: Bathtubs Forecast</h2>
    <p>
      A store manager wants to forecast sales for January, February, and March of next year. Sales are subject to trend and seasonality. 
      Trend equation (t = 0 for last June):
    </p>

    <div class="formula-box" data-aos="fade-right">
      <p style="font-size: 1.3rem;">$$F_t = 70 + 5t$$</p>
    </div>

    <div class="table-container">
      <table class="concepts-table">
        <thead>
          <tr><th>Month</th><th>Seasonal Relative</th></tr>
        </thead>
        <tbody>
          <tr><td>January</td><td>1.10</td></tr>
          <tr><td>February</td><td>1.02</td></tr>
          <tr><td>March</td><td>0.95</td></tr>
        </tbody>
      </table>
    </div>

    <h3>A) Trend Forecast Only:</h3>
    <p>January = 7 months, February = 8 months, March = 9 months from last June</p>
    <div class="formula-box" data-aos="fade-left">
      <p>$$F_{\text{Jan}} = 70 + 5(7) = 105 \text{ units}$$</p>
      <p>$$F_{\text{Feb}} = 70 + 5(8) = 110 \text{ units}$$</p>
      <p>$$F_{\text{Mar}} = 70 + 5(9) = 115 \text{ units}$$</p>
    </div>

    <h3>B) Forecast with Trend + Seasonality:</h3>
    <div class="formula-box" data-aos="fade-right">
      <p>$$F_{\text{Jan}} = 105 \times 1.10 = 116 \text{ units}$$</p>
      <p>$$F_{\text{Feb}} = 110 \times 1.02 = 112 \text{ units}$$</p>
      <p>$$F_{\text{Mar}} = 115 \times 0.95 = 109 \text{ units}$$</p>
    </div>

    <div class="alert-box alert-success">
      <div>
        <strong>Observation:</strong> January sales are higher than the overall trend due to high seasonality (1.10), 
        while March sales are lower because its season is weak (0.95).
      </div>
    </div>
  </div>

  <!-- ==================== CALCULATING SEASONAL RELATIVES ==================== -->
  <div class="glassy-card" data-aos="fade-up">
    <h2>🧮 Calculating Seasonal Relatives</h2>
    
    <h3>Formula:</h3>
    <div class="formula-box" data-aos="zoom-in">
      <p>$$\text{Seasonal Relative} = \frac{\text{Total Time Series for Period}}{\text{Average of All Periods}}$$</p>
    </div>
  </div>
  <!-- ==================== EXAMPLE 16 ==================== -->
  <div class="glassy-card" data-aos="fade-up">
    <h2>🏖️ Example 16: Weekend Travel Agency</h2>
    <p>
      A major Egyptian travel agency operates on weekends (Friday, Saturday, Sunday). The manager wants to schedule employees. 
      Visitor data for the last 6 weeks:
    </p>

    <div class="table-container" data-aos="fade-right">
      <table class="concepts-table">
        <thead>
          <tr><th>Day</th><th>Week 1</th><th>Week 2</th><th>Week 3</th><th>Week 4</th><th>Week 5</th><th>Week 6</th></tr>
        </thead>
        <tbody>
          <tr><td>Friday</td><td>149</td><td>154</td><td>152</td><td>150</td><td>159</td><td>163</td></tr>
          <tr><td>Saturday</td><td>250</td><td>255</td><td>260</td><td>268</td><td>273</td><td>276</td></tr>
          <tr><td>Sunday</td><td>166</td><td>162</td><td>171</td><td>173</td><td>176</td><td>183</td></tr>
        </tbody>
      </table>
    </div>

    <h3>Solution:</h3>
    <h4>Step 1: Calculate total for each day:</h4>
    <ul>
      <li>Friday: $$149 + 154 + 152 + 150 + 159 + 163 = 927$$</li>
      <li>Saturday: $$250 + 255 + 260 + 268 + 273 + 276 = 1582$$</li>
      <li>Sunday: $$166 + 162 + 171 + 173 + 176 + 183 = 1031$$</li>
    </ul>

    <h4>Step 2: Calculate average:</h4>
    <div class="formula-box">
      <p>$$\text{Average} = \frac{927 + 1582 + 1031}{3} = \frac{3540}{3} = 1180$$</p>
    </div>

    <h4>Step 3: Calculate seasonal relatives:</h4>
    <div class="formula-box" data-aos="fade-left">
      <p>Friday: $$SR = \frac{927}{1180} = 0.79$$</p>
      <p>Saturday: $$SR = \frac{1582}{1180} = 1.34$$</p>
      <p>Sunday: $$SR = \frac{1031}{1180} = 0.87$$</p>
    </div>

    <h3>Interpretation:</h3>
    <ul>
      <li><strong>Friday (0.79)</strong>: Visitors are 21% below daily average</li>
      <li><strong>Saturday (1.34)</strong>: Visitors are 34% above daily average (busiest day!)</li>
      <li><strong>Sunday (0.87)</strong>: Visitors are 13% below daily average</li>
    </ul>

    <div class="alert-box alert-info">
      <div>
        <strong>Insight:</strong> The manager should schedule more employees on Saturday and fewer on Friday.
      </div>
    </div>
  </div>

  <!-- ==================== EXAMPLE 17 ==================== -->
  <div class="glassy-card" data-aos="fade-up">
    <h2>🍵 Example 17: Lipton Tea Quarterly Sales</h2>
    <p>
      Lipton Tea recorded annual/quarterly sales over the last 4 years. Calculate seasonal relatives:
    </p>

    <div class="table-container" data-aos="fade-right">
      <table class="concepts-table">
        <thead>
          <tr><th>Quarter</th><th>2018</th><th>2019</th><th>2020</th><th>2021</th></tr>
        </thead>
        <tbody>
          <tr><td>Q1</td><td>136</td><td>145</td><td>153</td><td>156</td></tr>
          <tr><td>Q2</td><td>140</td><td>175</td><td>177</td><td>188</td></tr>
          <tr><td>Q3</td><td>155</td><td>187</td><td>197</td><td>201</td></tr>
          <tr><td>Q4</td><td>167</td><td>210</td><td>250</td><td>273</td></tr>
        </tbody>
      </table>
    </div>

    <h3>Solution:</h3>
    <h4>Step 1: Total for each quarter:</h4>
    <ul>
      <li>Q1: $$136 + 145 + 153 + 156 = 590$$</li>
      <li>Q2: $$140 + 175 + 177 + 188 = 680$$</li>
      <li>Q3: $$155 + 187 + 197 + 201 = 740$$</li>
      <li>Q4: $$167 + 210 + 250 + 273 = 900$$</li>
    </ul>

    <h4>Step 2: Average:</h4>
    <div class="formula-box">
      <p>$$\text{Average} = \frac{590 + 680 + 740 + 900}{4} = \frac{2910}{4} = 727.5$$</p>
    </div>

    <h4>Step 3: Seasonal relatives:</h4>
    <div class="formula-box" data-aos="fade-left">
      <p>Q1: $$SR = \frac{590}{2910} = 0.20$$</p>
      <p>Q2: $$SR = \frac{680}{2910} = 0.23$$</p>
      <p>Q3: $$SR = \frac{740}{2910} = 0.25$$</p>
      <p>Q4: $$SR = \frac{900}{2910} = 0.31$$</p>
    </div>

    <h3>Interpretation:</h3>
    <ul>
      <li><strong>Q1 (0.20)</strong>: Sales are 20% of quarterly average (weakest quarter)</li>
      <li><strong>Q4 (0.31)</strong>: Sales are 31% of quarterly average (strongest quarter)</li>
    </ul>

    <div class="alert-box alert-success">
      <div>
        <strong>Note:</strong> Q4 is always strongest (winter season with high tea consumption), while Q1 is weakest.
      </div>
    </div>
  </div>

  <!-- ==================== EXAMPLE 18 ==================== -->
  <div class="glassy-card" data-aos="fade-up">
    <h2>📦 Example 18: Comprehensive Trend & Seasonality Application</h2>
    <p>
      A certain product's sales are subject to trend and seasonality. Trend equation (t = 0 for last January):
    </p>

    <div class="formula-box" data-aos="fade-right">
      <p style="font-size: 1.3rem;">$$F_t = 80 + 4t$$</p>
    </div>

    <div class="table-container">
      <table class="concepts-table">
        <thead>
          <tr><th>Month</th><th>Seasonal Relative</th></tr>
        </thead>
        <tbody>
          <tr><td>October</td><td>1.20</td></tr>
          <tr><td>November</td><td>1.12</td></tr>
          <tr><td>December</td><td>0.85</td></tr>
        </tbody>
      </table>
    </div>

    <h3>Required:</h3>
    <p>1. Forecast using trend only<br>2. Forecast using trend + seasonality</p>

    <h3>Solution:</h3>
    <h4>1. Trend Forecast Only:</h4>
    <p>October = 9, November = 10, December = 11</p>
    <div class="formula-box" data-aos="fade-left">
      <p>$$F_{\text{Oct}} = 80 + 4(9) = 116 \text{ units}$$</p>
      <p>$$F_{\text{Nov}} = 80 + 4(10) = 120 \text{ units}$$</p>
      <p>$$F_{\text{Dec}} = 80 + 4(11) = 124 \text{ units}$$</p>
    </div>

    <h4>2. Trend + Seasonality:</h4>
    <div class="formula-box" data-aos="fade-right">
      <p>$$F_{\text{Oct}} = 116 \times 1.20 = 139 \text{ units}$$</p>
      <p>$$F_{\text{Nov}} = 120 \times 1.12 = 134 \text{ units}$$</p>
      <p>$$F_{\text{Dec}} = 124 \times 0.85 = 105 \text{ units}$$</p>
    </div>

    <div class="alert-box alert-warning">
      <div>
        <strong>Note:</strong> Although December has the highest trend (124), due to low seasonality (0.85), 
        the final forecast (105) is lower than October and November.
      </div>
    </div>
  </div>

  <!-- ==================== EXAMPLE 19 ==================== -->
  <div class="glassy-card" data-aos="fade-up">
    <h2>🌽 Example 19: Advanced Deseasonalization & Forecasting - Cheetos</h2>
    <p>
      Cheetos sales data contains trend and seasonality. Trend equation:
    </p>

    <div class="formula-box" data-aos="fade-right">
      <p style="font-size: 1.3rem;">$$F_t = 1250 + 5t$$</p>
    </div>

    <div class="table-container" data-aos="fade-left">
      <table class="concepts-table">
        <thead>
          <tr><th>Quarter</th><th>Sales</th><th>Seasonal Relative</th></tr>
        </thead>
        <tbody>
          <tr><td>Q1</td><td>1000</td><td>0.75</td></tr>
          <tr><td>Q2</td><td>1500</td><td>0.85</td></tr>
          <tr><td>Q3</td><td>1400</td><td>1.70</td></tr>
          <tr><td>Q4</td><td>1700</td><td>1.90</td></tr>
        </tbody>
      </table>
    </div>

    <h3>Required:</h3>
    <p>1. Deseasonalize all quarters<br>2. Forecast for periods 5 & 6 (trend only)<br>3. Forecast for periods 5 & 6 (trend + seasonality)</p>

    <h3>Solution:</h3>
    <h4>1. Deseasonalization:</h4>
    <div class="table-container" data-aos="zoom-in">
      <table class="concepts-table">
        <thead>
          <tr><th>Quarter</th><th>Sales</th><th>SR</th><th>Deseasonalized</th></tr>
        </thead>
        <tbody>
          <tr><td>Q1</td><td>1000</td><td>0.75</td><td>1333</td></tr>
          <tr><td>Q2</td><td>1500</td><td>0.85</td><td>1765</td></tr>
          <tr><td>Q3</td><td>1400</td><td>1.70</td><td>824</td></tr>
          <tr><td>Q4</td><td>1700</td><td>1.90</td><td>895</td></tr>
        </tbody>
      </table>
    </div>

    <h4>2. Trend Forecast Only:</h4>
    <div class="formula-box" data-aos="fade-right">
      <p>$$F_5 = 1250 + 5(5) = 1275 \text{ units}$$</p>
      <p>$$F_6 = 1250 + 5(6) = 1280 \text{ units}$$</p>
    </div>

    <h4>3. Trend + Seasonality:</h4>
    <p>Period 5 = Q1 (SR = 0.75), Period 6 = Q2 (SR = 0.85)</p>
    <div class="formula-box" data-aos="fade-left">
      <p>$$F_5 = 1275 \times 0.75 = 956 \text{ units}$$</p>
      <p>$$F_6 = 1280 \times 0.85 = 1088 \text{ units}$$</p>
    </div>

    <div class="alert-box alert-info">
      <div>
        <strong>Observation:</strong> Deseasonalized sales in Q3 & Q4 (824 & 895) are much lower than actual sales 
        because seasonality in these quarters is very high (1.70 & 1.90).
      </div>
    </div>
  </div>

  <!-- ==================== CONCEPTS TABLE ==================== -->
  <div class="glassy-card" data-aos="fade-up">
    <h2>📚 Key Concepts Summary Table</h2>
    
    <div class="table-container" data-aos="fade-up">
      <table class="concepts-table">
        <thead>
          <tr><th>Concept</th><th>Definition</th><th>Summary</th></tr>
        </thead>
        <tbody>
          <tr><td><strong>Forecasting</strong></td><td>Estimating future demand</td><td>Predicting future</td></tr>
          <tr><td><strong>Naïve Method</strong></td><td>Next = Previous</td><td>Copy past</td></tr>
          <tr><td><strong>Moving Average</strong></td><td>Average of recent values</td><td>Recent average</td></tr>
          <tr><td><strong>Weighted MA</strong></td><td>Custom weights to values</td><td>Custom weights</td></tr>
          <tr><td><strong>Exponential Smoothing</strong></td><td>Add % of forecast error</td><td>Error correction</td></tr>
          <tr><td><strong>Alpha (α)</strong></td><td>Controls error response</td><td>Response level</td></tr>
          <tr><td><strong>Trend</strong></td><td>Long term movement</td><td>Long direction</td></tr>
          <tr><td><strong>Seasonality</strong></td><td>Regular variations</td><td>Repeated pattern</td></tr>
          <tr><td><strong>Seasonal Relative</strong></td><td>% above/under average</td><td>Season ratio</td></tr>
          <tr><td><strong>Deseasonalization</strong></td><td>Remove season effect</td><td>Neutralize season</td></tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- ==================== FORMULAS SUMMARY ==================== -->
  <div class="glassy-card" data-aos="fade-up">
    <h2>📐 Key Formulas Summary</h2>
    
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
      
      <div class="formula-box" data-aos="zoom-in" data-aos-delay="100">
        <h4 style="color: var(--color-primary); text-align: center;">Exponential Smoothing</h4>
        <p>$$F_t = F_{t-1} + \alpha [(A_{t-1}) - (F_{t-1})]$$</p>
      </div>

      <div class="formula-box" data-aos="zoom-in" data-aos-delay="200">
        <h4 style="color: var(--color-business); text-align: center;">Trend Equation</h4>
        <p>$$F_t = a + bt$$</p>
      </div>

      <div class="formula-box" data-aos="zoom-in" data-aos-delay="300">
        <h4 style="color: var(--color-finance); text-align: center;">Deseasonalization</h4>
        <p>$$DS = \frac{\text{Sales}}{SR}$$</p>
      </div>

      <div class="formula-box" data-aos="zoom-in" data-aos-delay="400">
        <h4 style="color: var(--color-economics); text-align: center;">Trend + Seasonality</h4>
        <p>$$F_{\text{final}} = F_{\text{trend}} \times SR$$</p>
      </div>

      <div class="formula-box" data-aos="zoom-in" data-aos-delay="500">
        <h4 style="color: var(--color-primary); text-align: center;">Moving Average</h4>
        <p>$$MA = \frac{\sum X_i}{n}$$</p>
      </div>

      <div class="formula-box" data-aos="zoom-in" data-aos-delay="600">
        <h4 style="color: var(--color-business); text-align: center;">Seasonal Relative</h4>
        <p>$$SR = \frac{\text{Period Total}}{\text{Average}}$$</p>
      </div>

    </div>
  </div>

  <!-- ==================== PRACTICE EXERCISE ==================== -->
  <div class="glassy-card" data-aos="fade-up">
    <h2>💪 Comprehensive Practice Exercise</h2>
    <p>
      An Egyptian juice manufacturing company has the following quarterly sales data for the last two years:
    </p>

    <div class="table-container">
      <table class="concepts-table">
        <thead>
          <tr><th>Quarter</th><th>Year 1</th><th>Year 2</th></tr>
        </thead>
        <tbody>
          <tr><td>Q1</td><td>800</td><td>900</td></tr>
          <tr><td>Q2</td><td>1200</td><td>1300</td></tr>
          <tr><td>Q3</td><td>1500</td><td>1600</td></tr>
          <tr><td>Q4</td><td>1000</td><td>1100</td></tr>
        </tbody>
      </table>
    </div>

    <p>Suggested trend equation: $$F_t = 1000 + 50t$$ (where t = 0 for Q1 of Year 1)</p>

    <h3>Required:</h3>
    <ol>
      <li>Calculate seasonal relatives for all four quarters</li>
      <li>Find deseasonalized sales</li>
      <li>Forecast for Q1 & Q2 of Year 3 (periods 9 & 10) using trend only</li>
      <li>Forecast for Q1 & Q2 of Year 3 considering both trend and seasonality</li>
    </ol>

    <div class="alert-box alert-success" style="margin-top: 20px;">
      <div>
        <strong>Hint:</strong> Follow the same steps as in Examples 16-19. Try solving it yourself first, then check your answers using the formulas we've learned!
      </div>
    </div>
  </div>

  <!-- ==================== FOOTER ==================== -->
  <div class="footer-info" data-aos="fade-up">
    <div class="footer-brand">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M12 2L2 7l10 5 10-5-10-5z"></path>
        <polyline points="2 17 12 22 22 17"></polyline>
        <polyline points="2 12 12 17 22 12"></polyline>
      </svg>
      Athr Educational Platform | منصة أثر التعليمية
    </div>
    <div class="footer-divider"></div>
    <div class="footer-disclaimer">
      This educational content is designed to help students understand forecasting and exponential smoothing concepts interactively.<br>
      <strong style="color: var(--color-primary);">© 2025 Athr Platform - All Rights Reserved</strong>
    </div>
  </div>

</div>
<!-- ==================== END ENGLISH CONTENT ==================== -->

      
  </main>
  <!-- Initialize Libraries -->
  <script>
    // ==================== LIBRARIES INITIALIZATION ====================
    document.addEventListener('DOMContentLoaded', function() {
      
      // Initialize AOS
      if (typeof AOS !== 'undefined') {
        AOS.init({
          duration: 800,
          easing: 'ease-in-out',
          once: true,
          offset: 50
        });
        console.log('✅ AOS initialized');
      }
      
      // Initialize Mermaid
      if (typeof mermaid !== 'undefined') {
        mermaid.initialize({
          startOnLoad: true,
          theme: 'default',
          flowchart: {
            useMaxWidth: true,
            htmlLabels: true
          }
        });
        console.log('✅ Mermaid initialized');
      }
      
      // Configure Marked.js
      if (typeof marked !== 'undefined') {
        marked.setOptions({
          breaks: true,
          gfm: true,
          sanitize: false
        });
        console.log('✅ Marked.js configured');
      }
      
      // Configure Moment.js for Arabic
      if (typeof moment !== 'undefined') {
        moment.locale('ar');
        console.log('✅ Moment.js configured');
      }
      
      // Configure Chart.js defaults for mobile
      if (typeof Chart !== 'undefined') {
        Chart.defaults.responsive = true;
        Chart.defaults.maintainAspectRatio = false;
        Chart.defaults.devicePixelRatio = window.devicePixelRatio || 2;
        console.log('✅ Chart.js configured for mobile');
      }
      
      // Force MathJax to render
      function waitForMathJax() {
        if (typeof MathJax !== 'undefined' && MathJax.typesetPromise) {
          console.log('🎯 Rendering math expressions...');
          MathJax.typesetPromise().then(() => {
            console.log('✅ All math rendered successfully!');
          }).catch((err) => {
            console.error('❌ MathJax rendering error:', err);
          });
        } else {
          setTimeout(waitForMathJax, 100);
        }
      }
      
      setTimeout(waitForMathJax, 500);
      
      // Re-render math when language changes
      const translationButton = document.getElementById('translationButton');
      if (translationButton) {
        translationButton.addEventListener('click', function() {
          setTimeout(function() {
            if (typeof MathJax !== 'undefined' && MathJax.typesetPromise) {
              MathJax.typesetPromise();
            }
          }, 300);
        });
      }

      // Initialize Hammer.js for gestures
      if (typeof Hammer !== 'undefined') {
        const mainContent = document.querySelector('.main-content');
        if (mainContent) {
          const hammer = new Hammer(mainContent);
          hammer.on('swipeleft swiperight', function(ev) {
            console.log('Gesture detected:', ev.type);
          });
          console.log('✅ Hammer.js gestures enabled');
        }
      }
    });
  </script>

  <script>
    // ==================== MAIN APPLICATION SCRIPT ====================
    document.addEventListener('DOMContentLoaded', function() {
      const translationButton = document.getElementById('translationButton');
      const translationText = document.querySelector('.translation-text');
      const html = document.documentElement;
      const body = document.body;
      
      const aiChatButton = document.getElementById('aiChatButton');
      const aiChatModal = document.getElementById('aiChatModal');
      const aiChatCloseBtn = document.getElementById('aiChatCloseBtn');
      const aiChatMessages = document.getElementById('aiChatMessages');
      const aiChatInput = document.getElementById('ai-chat-input');
      const aiChatSendBtn = document.getElementById('ai-chat-send-btn');
      const aiChatTitle = document.getElementById('ai-chat-title');
      const aiChatButtonText = document.getElementById('aiFabText');
      
      let isArabic = true;
      let isFirstMessage = true;
      let conversationHistory = [];

      // ==================== TYPING INDICATOR ====================
      function showTypingIndicator(show) {
        const existingIndicator = aiChatMessages.querySelector('.typing-indicator');
        if (existingIndicator) existingIndicator.remove();
        
        if (show) {
          const indicatorElement = document.createElement('div');
          indicatorElement.classList.add('chat-message', 'ai-message', 'typing-indicator');
          indicatorElement.innerHTML = '<span>أثر AI يكتب الآن</span><span class="dot">.</span><span class="dot">.</span><span class="dot">.</span>';
          aiChatMessages.appendChild(indicatorElement);
          aiChatMessages.scrollTop = aiChatMessages.scrollHeight;
        }
      }

      // ==================== ADD MESSAGE ====================
      function addMessage(text, sender) {
        const messageElement = document.createElement('div');
        messageElement.classList.add('chat-message', `${sender}-message`);
        messageElement.innerHTML = marked.parse(text);
        aiChatMessages.appendChild(messageElement);
        aiChatMessages.scrollTop = aiChatMessages.scrollHeight;
      }
      
      // ==================== APPLY LANGUAGE ====================
     // ==================== APPLY LANGUAGE ====================
function applyLanguage(arabic) {
  isArabic = arabic;
  const lang = isArabic ? 'ar' : 'en';
  const dir = isArabic ? 'rtl' : 'ltr';
  
  html.setAttribute('lang', lang);
  html.setAttribute('dir', dir);
  body.setAttribute('dir', dir);
  
  // إخفاء/إظهار المحتوى حسب اللغة
  document.querySelectorAll('.ar-content').forEach(el => {
    el.style.display = arabic ? 'block' : 'none';
  });
  document.querySelectorAll('.en-content').forEach(el => {
    el.style.display = arabic ? 'none' : 'block';
  });
  
  translationText.textContent = isArabic ? 'English' : 'العربية';
  document.title = isArabic ? 'منصة أثر - التمهيد الأسي وطرق التنبؤ' : 'Athr Platform - Exponential Smoothing & Forecasting';
  
  aiChatTitle.textContent = isArabic ? 'اسأل أثر AI' : 'Ask Athr AI';
  aiChatInput.placeholder = isArabic ? 'اكتب سؤالك هنا...' : 'Type your question here...';
  aiChatButtonText.textContent = isArabic ? 'أثر AI' : 'Athr AI';
  
  // Update moment.js locale
  if (typeof moment !== 'undefined') {
    moment.locale(isArabic ? 'ar' : 'en');
  }
  
  // Re-render MathJax after language switch
  setTimeout(function() {
    if (typeof MathJax !== 'undefined' && MathJax.typesetPromise) {
      MathJax.typesetPromise().catch((err) => console.error('MathJax error:', err));
    }
  }, 300);
}

      // ==================== TRANSLATION BUTTON ====================
      translationButton.addEventListener('click', function() {
        applyLanguage(!isArabic);
        
        // Re-render MathJax after language switch
        setTimeout(function() {
          if (typeof MathJax !== 'undefined' && MathJax.typesetPromise) {
            MathJax.typesetPromise().catch((err) => console.error('MathJax error:', err));
          }
        }, 300);
      });

      // ==================== AI CHAT BUTTON ====================
      aiChatButton.addEventListener('click', function() {
        aiChatModal.classList.add('visible');
        
        if (isFirstMessage) {
          const welcomeMsg = isArabic 
            ? "مرحباً! أنا **أثر AI**، مساعدك الأكاديمي المتخصص في **التنبؤ والتمهيد الأسي**. يمكنني مساعدتك في:\n\n- **شرح المعادلات والمفاهيم**\n- **حل المسائل خطوة بخطوة**\n- **توضيح الفرق بين الطرق المختلفة**\n- **الإجابة على أي سؤال عن المحتوى**\n\nاسألني أي شيء!"
            : "Hello! I'm **Athr AI**, your academic assistant specialized in **Forecasting & Exponential Smoothing**. I can help you with:\n\n- **Explaining equations and concepts**\n- **Solving problems step-by-step**\n- **Clarifying differences between methods**\n- **Answering any content questions**\n\nAsk me anything!";
          addMessage(welcomeMsg, 'ai');
          isFirstMessage = false;
        }
        
        aiChatInput.focus();
      });

      aiChatCloseBtn.addEventListener('click', function() {
        aiChatModal.classList.remove('visible');
      });

      aiChatModal.addEventListener('click', function(e) {
        if (e.target === aiChatModal) {
          aiChatModal.classList.remove('visible');
        }
      });

      // ==================== SEND MESSAGE ====================
      async function sendMessage() {
        const userMessage = aiChatInput.value.trim();
        if (!userMessage) return;

        addMessage(userMessage, 'user');
        conversationHistory.push({ role: 'user', content: userMessage });
        
        aiChatInput.value = '';
        aiChatInput.disabled = true;
        aiChatSendBtn.disabled = true;
        
        showTypingIndicator(true);

        try {
          const lectureContext = document.querySelector('.main-content').innerText || '';
          
          // Simulate AI response (replace with actual API call)
          await new Promise(resolve => setTimeout(resolve, 1500));
          
          showTypingIndicator(false);
          
          const aiResponse = isArabic
            ? "شكراً لسؤالك! بناءً على المحتوى، **التمهيد الأسي** هو طريقة تنبؤ تستخدم معادلة: \\[ F_t = F_{t-1} + \\alpha [(A_{t-1}) - (F_{t-1})] \\]\n\nحيث α (ثابت التمهيد) يتحكم في **درجة الاستجابة** للأخطاء. هل تريد مثال عملي؟"
            : "Thanks for your question! Based on the content, **Exponential Smoothing** is a forecasting method using: \\[ F_t = F_{t-1} + \\alpha [(A_{t-1}) - (F_{t-1})] \\]\n\nWhere α (smoothing constant) controls the **response degree** to errors. Would you like a practical example?";
          
          addMessage(aiResponse, 'ai');
          conversationHistory.push({ role: 'assistant', content: aiResponse });
          
          // Re-render math in chat
          setTimeout(() => {
            if (typeof MathJax !== 'undefined' && MathJax.typesetPromise) {
              MathJax.typesetPromise();
            }
          }, 100);

        } catch (error) {
          console.error('Error:', error);
          showTypingIndicator(false);
          
          const errorMsg = isArabic
            ? "عذراً، حدث خطأ في الاتصال. يرجى المحاولة مرة أخرى."
            : "Sorry, a connection error occurred. Please try again.";
          addMessage(errorMsg, 'ai');
        } finally {
          aiChatInput.disabled = false;
          aiChatSendBtn.disabled = false;
          aiChatInput.focus();
        }
      }

      aiChatSendBtn.addEventListener('click', sendMessage);
      aiChatInput.addEventListener('keypress', function(e) {
        if (e.key === 'Enter' && !e.shiftKey) {
          e.preventDefault();
          sendMessage();
        }
      });

      // ==================== QUESTION TOGGLE ====================
      window.toggleQuestion = function(element) {
        const content = element.querySelector('.question-content');
        element.classList.toggle('open');
        content.classList.toggle('show');
        
        if (content.classList.contains('show')) {
          setTimeout(() => {
            content.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
          }, 300);
        }
      };

      // ==================== MCQ SELECTION WITH CONFETTI ====================
      const mcqOptions = document.querySelectorAll('.mcq-option');
      mcqOptions.forEach(option => {
        option.addEventListener('click', function() {
          const isCorrect = this.getAttribute('data-answer') === 'correct';
          const allOptions = this.parentNode.querySelectorAll('.mcq-option');
          
          // Disable all options
          allOptions.forEach(opt => {
            opt.style.pointerEvents = 'none';
          });
          
          this.classList.add('selected');
          
          setTimeout(() => {
            if (isCorrect) {
              this.classList.add('correct');
              this.innerHTML += ' ✓';
              
              // Trigger confetti celebration
              if (typeof confetti !== 'undefined') {
                confetti({
                  particleCount: 100,
                  spread: 70,
                  origin: { y: 0.6 }
                });
              }
              
              // Show solution
              const solutionContent = this.closest('.question-content').querySelector('.solution-content');
              if (solutionContent) {
                setTimeout(() => {
                  solutionContent.style.display = 'block';
                  if (typeof MathJax !== 'undefined' && MathJax.typesetPromise) {
                    MathJax.typesetPromise();
                  }
                }, 1000);
              }
            } else {
              this.classList.add('incorrect');
              this.innerHTML += ' ✗';
              
              // Show correct answer
              allOptions.forEach(opt => {
                if (opt.getAttribute('data-answer') === 'correct') {
                  opt.classList.add('correct');
                  opt.innerHTML += ' ✓ (الإجابة الصحيحة)';
                }
              });
              
              // Show solution after incorrect answer
              const solutionContent = this.closest('.question-content').querySelector('.solution-content');
              if (solutionContent) {
                setTimeout(() => {
                  solutionContent.style.display = 'block';
                  if (typeof MathJax !== 'undefined' && MathJax.typesetPromise) {
                    MathJax.typesetPromise();
                  }
                }, 1500);
              }
            }
          }, 500);
        });
      });
      
      // ==================== EXPONENTIAL SMOOTHING CALCULATOR ====================
      window.calculateExponentialSmoothing = function() {
        const prevForecast = parseFloat(document.getElementById('prevForecast').value);
        const actualDemand = parseFloat(document.getElementById('actualDemand').value);
        const alpha = parseFloat(document.getElementById('alphaValue').value);
        
        if (isNaN(prevForecast) || isNaN(actualDemand) || isNaN(alpha)) {
          alert(isArabic ? 'الرجاء إدخال قيم صحيحة!' : 'Please enter valid values!');
          return;
        }
        
        if (alpha < 0 || alpha > 1) {
          alert(isArabic ? 'قيمة α يجب أن تكون بين 0 و 1!' : 'α value must be between 0 and 1!');
          return;
        }
        
        const error = actualDemand - prevForecast;
        const adjustment = alpha * error;
        const newForecast = prevForecast + adjustment;
        
        const resultDiv = document.getElementById('calculatorResult');
        const resultValue = document.getElementById('resultValue');
        const resultSteps = document.getElementById('resultSteps');
        
        resultValue.innerHTML = `${newForecast.toFixed(2)} وحدة`;
        
        resultSteps.innerHTML = `
          <strong>خطوات الحل:</strong><br>
          1️⃣ خطأ التنبؤ = ${actualDemand} - ${prevForecast} = <strong>${error.toFixed(2)}</strong><br>
          2️⃣ التعديل = ${alpha} × ${error.toFixed(2)} = <strong>${adjustment.toFixed(2)}</strong><br>
          3️⃣ التنبؤ الجديد = ${prevForecast} + ${adjustment.toFixed(2)} = <strong>${newForecast.toFixed(2)}</strong>
        `;
        
        resultDiv.style.display = 'block';
        resultDiv.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        
        // Trigger celebration for calculation
        if (typeof confetti !== 'undefined') {
          confetti({
            particleCount: 50,
            angle: 60,
            spread: 55,
            origin: { x: 0, y: 0.8 }
          });
          confetti({
            particleCount: 50,
            angle: 120,
            spread: 55,
            origin: { x: 1, y: 0.8 }
          });
        }
      };
      
      // ==================== UTILITY FUNCTIONS ====================
      
      // Format Currency
      window.formatCurrency = function(amount, currency = 'EGP') {
        return new Intl.NumberFormat(isArabic ? 'ar-EG' : 'en-US', {
          style: 'currency',
          currency: currency
        }).format(amount);
      };
      
      // Format Number
      window.formatNumber = function(number, decimals = 2) {
        return new Intl.NumberFormat(isArabic ? 'ar-EG' : 'en-US', {
          minimumFractionDigits: decimals,
          maximumFractionDigits: decimals
        }).format(number);
      };
      
      // Format Percentage
      window.formatPercentage = function(value) {
        return new Intl.NumberFormat(isArabic ? 'ar-EG' : 'en-US', {
          style: 'percent',
          minimumFractionDigits: 2
        }).format(value);
      };
      
      // ==================== CHARTS INITIALIZATION ====================
      
      // CHART: Example 7 Comparison
      setTimeout(function() {
        const example7Canvas = document.getElementById('example7Chart');
        if (example7Canvas && typeof Chart !== 'undefined') {
          new Chart(example7Canvas, {
            type: 'bar',
            data: {
              labels: ['α = 0.4', 'α = 0.6'],
              datasets: [
                {
                  label: 'التنبؤ السابق',
                  data: [65, 65],
                  backgroundColor: 'rgba(100, 116, 139, 0.7)',
                  borderColor: '#64748b',
                  borderWidth: 2
                },
                {
                  label: 'الطلب الفعلي',
                  data: [76, 76],
                  backgroundColor: 'rgba(34, 197, 94, 0.7)',
                  borderColor: '#22c55e',
                  borderWidth: 2
                },
                {
                  label: 'التنبؤ الجديد',
                  data: [69, 72],
                  backgroundColor: 'rgba(245, 158, 11, 0.7)',
                  borderColor: '#f59e0b',
                  borderWidth: 2
                }
              ]
            },
            options: {
              responsive: true,
              maintainAspectRatio: false,
              plugins: {
                title: {
                  display: true,
                  text: 'مقارنة التنبؤ بقيم α مختلفة',
                  font: { size: 16, weight: 'bold' }
                },
                legend: {
                  display: true,
                  position: 'top',
                  labels: {
                    font: { size: window.innerWidth <= 768 ? 10 : 12 },
                    padding: 10
                  }
                }
              },
              scales: {
                y: {
                  beginAtZero: true,
                  title: {
                    display: true,
                    text: 'القيمة (وحدة)',
                    font: { size: 13, weight: 'bold' }
                  },
                  ticks: {
                    font: { size: window.innerWidth <= 768 ? 9 : 11 }
                  }
                },
                x: {
                  ticks: {
                    font: { size: window.innerWidth <= 768 ? 9 : 11 }
                  }
                }
              }
            }
          });
          console.log('✅ Example 7 chart created');
        }
      }, 1500);

      // ==================== INTERACTIVE TABLE ENHANCEMENTS ====================
      
      // Add hover effects to tables
      const tables = document.querySelectorAll('.concepts-table');
      tables.forEach(table => {
        const rows = table.querySelectorAll('tbody tr');
        rows.forEach(row => {
          row.addEventListener('mouseenter', function() {
            this.style.transform = 'scale(1.02)';
            this.style.transition = 'all 0.3s ease';
          });
          row.addEventListener('mouseleave', function() {
            this.style.transform = 'scale(1)';
          });
        });
      });

      // ==================== SCROLL PROGRESS TRACKER ====================
      
      const createScrollProgress = () => {
        const progressBar = document.createElement('div');
        progressBar.style.cssText = `
          position: fixed;
          top: 0;
          left: 0;
          width: 0%;
          height: 4px;
          background: linear-gradient(90deg, var(--color-primary), var(--color-primary-medium));
          z-index: 10000;
          transition: width 0.1s ease;
        `;
        document.body.appendChild(progressBar);
        
        window.addEventListener('scroll', () => {
          const winScroll = document.body.scrollTop || document.documentElement.scrollTop;
          const height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
          const scrolled = (winScroll / height) * 100;
          progressBar.style.width = scrolled + '%';
        });
      };
      
      createScrollProgress();

      console.log('✅ منصة أثر - جاهزة بالكامل!');
      console.log('📚 جميع المكتبات محملة بنجاح');
      console.log('📱 تم تفعيل التحسينات للموبايل');
      console.log('🎬 الفيديو بلاير جاهز للاستخدام');
    });
  </script>

  <!-- ==================== VIDEO PLAYER SCRIPT ==================== -->
  <script>
    (function() {
      'use strict';

      // Multiple video sources as fallback
      const VIDEO_SOURCES = [
        'https://archive.org/download/20251005_20251005_1020/%D9%84%D8%BA%D8%A9_%D8%A7%D9%84%D8%A3%D8%B9%D9%85%D8%A7%D9%84__%D9%85%D9%82%D8%AF%D9%85%D8%A9_%D9%84%D9%84%D9%85%D8%AD%D8%A7%D8%B3%D8%A8%D8%A9.mp4',
        'https://archive.org/download/20251005_20251005_1020/%D9%84%D8%BA%D8%A9_%D8%A7%D9%84%D8%A3%D8%B9%D9%85%D8%A7%D9%84__%D9%85%D9%82%D8%AF%D9%85%D8%A9_%D9%84%D9%84%D9%85%D8%AD%D8%A7%D8%B3%D8%A8%D8%A9.mp4'
      ];

      const videoPlayer = document.getElementById('videoPlayer');
      const video = document.getElementById('video');
      const videoBars = document.getElementById('videoBars');
      
      const simplePlayBtn = document.getElementById('simplePlayBtn');
      const simpleFullscreenBtn = document.getElementById('simpleFullscreenBtn');
      const simpleProgress = document.getElementById('simpleProgress');
      const simpleProgressFilled = document.getElementById('simpleProgressFilled');
      const simpleCurrentTime = document.getElementById('simpleCurrentTime');
      const simpleDuration = document.getElementById('simpleDuration');
      
      const playBtn = document.getElementById('playBtn');
      const skipBack = document.getElementById('skipBack');
      const skipForward = document.getElementById('skipForward');
      const progressWrapper = document.getElementById('progressWrapper');
      const progressFilled = document.getElementById('progressFilled');
      const progressBuffered = document.getElementById('progressBuffered');
      const currentTimeEl = document.getElementById('currentTime');
      const remainingTimeEl = document.getElementById('remainingTime');
      const volumeBtn = document.getElementById('volumeBtn');
      const volumeSlider = document.getElementById('volumeSlider');
      const closeBtn = document.getElementById('closeBtn');
      const pipBtn = document.getElementById('pipBtn');
      const loadingSpinner = document.getElementById('loadingSpinner');
      const tapLeft = document.getElementById('tapLeft');
      const tapRight = document.getElementById('tapRight');

      let controlsTimeout;
      let isDragging = false;
      let tapTimeout, tapCount = 0, lastTapX = 0;
      let isFullscreen = false;
      let currentSourceIndex = 0;

      function init() {
        loadVideo();
        setupEventListeners();
        if (document.pictureInPictureEnabled) pipBtn.style.display = 'flex';
      }

      function loadVideo() {
        video.src = VIDEO_SOURCES[currentSourceIndex];
        video.load();
      }

      function updateVolumeSliderBg() {
        const percent = video.volume * 100;
        volumeSlider.style.background = `linear-gradient(to right, #fff ${percent}%, rgba(255, 255, 255, 0.3) ${percent}%)`;
      }

      function toggleFullscreen() {
        if (!isFullscreen) {
          videoPlayer.classList.add('fullscreen-mode');
          if (videoPlayer.requestFullscreen) {
            videoPlayer.requestFullscreen();
          } else if (videoPlayer.webkitRequestFullscreen) {
            videoPlayer.webkitRequestFullscreen();
          }
          isFullscreen = true;
          showControls();
          setTimeout(() => videoBars.classList.add('hidden'), 5000);
        } else {
          exitFullscreen();
        }
      }

      function exitFullscreen() {
        videoPlayer.classList.remove('fullscreen-mode');
        if (document.exitFullscreen) {
          document.exitFullscreen();
        } else if (document.webkitExitFullscreen) {
          document.webkitExitFullscreen();
        }
        isFullscreen = false;
        videoBars.classList.remove('hidden');
      }

      function showControls() {
        if (!isFullscreen) return;
        videoPlayer.classList.add('show-controls');
        clearTimeout(controlsTimeout);
        controlsTimeout = setTimeout(() => {
          if (!video.paused && !isDragging) videoPlayer.classList.remove('show-controls');
        }, 3000);
      }

      function togglePlay() {
        if (video.paused) {
          video.play().catch(err => {
            console.log('Play failed:', err);
            if (currentSourceIndex < VIDEO_SOURCES.length - 1) {
              currentSourceIndex++;
              loadVideo();
              video.play().catch(e => console.log('All sources failed'));
            }
          });
        } else {
          video.pause();
        }
      }

      function skipBackward() {
        video.currentTime = Math.max(0, video.currentTime - 10);
        showTapIndicator('left');
      }

      function skipForwardFunc() {
        video.currentTime = Math.min(video.duration, video.currentTime + 10);
        showTapIndicator('right');
      }

      function showTapIndicator(side) {
        const indicator = side === 'left' ? tapLeft : tapRight;
        indicator.classList.add('active');
        setTimeout(() => indicator.classList.remove('active'), 500);
      }

      function formatTime(seconds) {
        if (isNaN(seconds) || !isFinite(seconds)) return '0:00';
        const hrs = Math.floor(seconds / 3600);
        const mins = Math.floor((seconds % 3600) / 60);
        const secs = Math.floor(seconds % 60);
        return hrs > 0 ? `${hrs}:${mins.toString().padStart(2,'0')}:${secs.toString().padStart(2,'0')}` : `${mins}:${secs.toString().padStart(2,'0')}`;
      }

      function updateProgress() {
        if (!isDragging) {
          const progress = (video.currentTime / video.duration) * 100;
          simpleProgressFilled.style.width = `${progress}%`;
          progressFilled.style.width = `${progress}%`;
          const timeStr = formatTime(video.currentTime);
          simpleCurrentTime.textContent = timeStr;
          currentTimeEl.textContent = timeStr;
          remainingTimeEl.textContent = '-' + formatTime(video.duration - video.currentTime);
        }
      }

      function handleSeek(e, el) {
        const rect = el.getBoundingClientRect();
        const clientX = e.clientX || (e.touches && e.touches[0].clientX);
        const percent = Math.max(0, Math.min(1, (clientX - rect.left) / rect.width));
        const time = percent * video.duration;
        if (!isNaN(time)) {
          video.currentTime = time;
          const progress = percent * 100;
          simpleProgressFilled.style.width = `${progress}%`;
          progressFilled.style.width = `${progress}%`;
        }
      }

      function updateVolumeIcon() {
        const vol = video.volume;
        const icon = video.muted || vol === 0 ? 'fa-volume-xmark' : vol < 0.5 ? 'fa-volume-low' : 'fa-volume-up';
        volumeBtn.innerHTML = `<i class="fas ${icon}"></i>`;
      }

      function setupEventListeners() {
        video.addEventListener('loadstart', () => loadingSpinner.classList.add('active'));
        video.addEventListener('canplay', () => loadingSpinner.classList.remove('active'));
        
        video.addEventListener('error', (e) => {
          console.log('Video error:', e);
          loadingSpinner.classList.remove('active');
          if (currentSourceIndex < VIDEO_SOURCES.length - 1) {
            currentSourceIndex++;
            console.log('Trying next source:', VIDEO_SOURCES[currentSourceIndex]);
            loadVideo();
          }
        });

        video.addEventListener('loadedmetadata', () => {
          simpleDuration.textContent = formatTime(video.duration);
          remainingTimeEl.textContent = '-' + formatTime(video.duration);
          if (isFullscreen) showControls();
        });

        video.addEventListener('play', () => {
          videoPlayer.classList.remove('paused');
          simplePlayBtn.innerHTML = '<i class="fas fa-pause"></i>';
          playBtn.innerHTML = '<i class="fas fa-pause"></i>';
        });

        video.addEventListener('pause', () => {
          videoPlayer.classList.add('paused');
          simplePlayBtn.innerHTML = '<i class="fas fa-play"></i>';
          playBtn.innerHTML = '<i class="fas fa-play"></i>';
          showControls();
        });

        video.addEventListener('timeupdate', updateProgress);
        video.addEventListener('progress', () => {
          if (video.buffered.length > 0) {
            progressBuffered.style.width = `${(video.buffered.end(0) / video.duration) * 100}%`;
          }
        });

        simplePlayBtn.addEventListener('click', togglePlay);
        simpleFullscreenBtn.addEventListener('click', toggleFullscreen);
        simpleProgress.addEventListener('click', (e) => handleSeek(e, simpleProgress));

        playBtn.addEventListener('click', togglePlay);
        skipBack.addEventListener('click', skipBackward);
        skipForward.addEventListener('click', skipForwardFunc);
        closeBtn.addEventListener('click', exitFullscreen);
        
        volumeBtn.addEventListener('click', () => {
          video.muted = !video.muted;
          updateVolumeIcon();
        });

        volumeSlider.addEventListener('input', () => {
          video.volume = volumeSlider.value;
          video.muted = false;
          updateVolumeIcon();
          updateVolumeSliderBg();
        });

        progressWrapper.addEventListener('mousedown', (e) => {
          isDragging = true;
          videoPlayer.classList.add('dragging');
          handleSeek(e, progressWrapper);
        });

        progressWrapper.addEventListener('touchstart', (e) => {
          isDragging = true;
          videoPlayer.classList.add('dragging');
          handleSeek(e, progressWrapper);
        }, { passive: true });

        document.addEventListener('mousemove', (e) => {
          if (isDragging) handleSeek(e, progressWrapper);
        });

        document.addEventListener('touchmove', (e) => {
          if (isDragging) handleSeek(e, progressWrapper);
        }, { passive: true });

        document.addEventListener('mouseup', () => {
          if (isDragging) {
            isDragging = false;
            videoPlayer.classList.remove('dragging');
          }
        });

        document.addEventListener('touchend', () => {
          if (isDragging) {
            isDragging = false;
            videoPlayer.classList.remove('dragging');
          }
        });

        progressWrapper.addEventListener('click', (e) => handleSeek(e, progressWrapper));

        video.addEventListener('click', (e) => {
          if (!isFullscreen) {
            togglePlay();
            return;
          }

          tapCount++;
          lastTapX = e.clientX || (e.touches && e.touches[0].clientX);
          clearTimeout(tapTimeout);

          if (tapCount === 1) {
            tapTimeout = setTimeout(() => {
              togglePlay();
              tapCount = 0;
            }, 300);
          } else if (tapCount === 2) {
            const rect = video.getBoundingClientRect();
            (lastTapX - rect.left > rect.width / 2 ? skipForwardFunc : skipBackward)();
            tapCount = 0;
          }
        });

        videoPlayer.addEventListener('mousemove', showControls);
        videoPlayer.addEventListener('touchstart', showControls);

        if (pipBtn) {
          pipBtn.addEventListener('click', async () => {
            try {
              document.pictureInPictureElement ? await document.exitPictureInPicture() : await video.requestPictureInPicture();
            } catch {}
          });
        }

        document.addEventListener('fullscreenchange', () => {
          if (!document.fullscreenElement) exitFullscreen();
        });

        document.addEventListener('keydown', (e) => {
          if (e.target.tagName === 'INPUT') return;
          switch(e.key) {
            case ' ':
            case 'k':
              e.preventDefault();
              togglePlay();
              break;
            case 'ArrowLeft':
              e.preventDefault();
              skipBackward();
              break;
            case 'ArrowRight':
              e.preventDefault();
              skipForwardFunc();
              break;
            case 'm':
              e.preventDefault();
              video.muted = !video.muted;
              updateVolumeIcon();
              break;
            case 'f':
              e.preventDefault();
              toggleFullscreen();
              break;
          }
        });

        updateVolumeSliderBg();
      }

      init();
    })();
  </script>
</body>
</html>

